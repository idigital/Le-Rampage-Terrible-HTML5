var cc=cc=cc||{};cc.AppDelegate=cc.Application.extend({ctor:function(){this._super()},initInstance:function(){return!0},applicationDidFinishLaunching:function(){var a=cc.Director.sharedDirector();a.setDisplayFPS(!0);a.setAnimationInterval(1/60);var b=new TestController;a.runWithScene(b);return!0},applicationDidEnterBackground:function(){cc.Director.sharedDirector().pause()},applicationWillEnterForeground:function(){cc.Director.sharedDirector().resume()}});var cc=cc=cc||{},TestScene=cc.Scene.extend({_portrait:!1,ctor:function(a){this._super();(this._portrait=a)&&cc.Director.sharedDirector().setDeviceOrientation(cc.DEVICE_ORIENTATION_LANDSCAPE_RIGHT);this.init()},onEnter:function(){this._super();var a=cc.LabelTTF.create("MainMenu","Arial",20),a=cc.MenuItemLabel.create(a,this,this.MainMenuCallback),b=cc.Menu.create(a,null),c=cc.Director.sharedDirector().getWinSize();b.setPosition(cc.PointZero());a.setPosition(cc.PointMake(c.width-50,25));this.addChild(b,
1)},runThisTest:function(){},MainMenuCallback:function(){var a=cc.Scene.create(),b=new TestController;a.addChild(b);cc.Director.sharedDirector().replaceScene(a)}}),LINE_SPACE=40,s_pathClose=null,curPos=cc.PointZero(),TestController=cc.Layer.extend({_itemMenu:null,_beginPos:cc.PointZero(),isMouseDown:!1,ctor:function(){s_pathClose||(s_pathClose=cc.TextureCache.sharedTextureCache().textureForKey("Resources/CloseNormal.png"));var a=cc.MenuItemImage.create(s_pathClose,s_pathClose,this,this.closeCallback),
b=cc.Menu.create(a,null),c=cc.Director.sharedDirector().getWinSize();b.setPosition(cc.PointZero());a.setPosition(cc.PointMake(c.width-30,c.height-30));this._itemMenu=cc.Menu.create(null);for(var a=0,d=testNames.length;a<d;a++){var e=cc.LabelTTF.create(testNames[a].title,"Arial",24),e=cc.MenuItemLabel.create(e,this,this.menuCallback);this._itemMenu.addChild(e,a+1E4);e.setPosition(cc.PointMake(c.width/2,c.height-(a+1)*LINE_SPACE))}this._itemMenu.setContentSize(cc.SizeMake(c.width,(testNames.length+
1)*LINE_SPACE));this._itemMenu.setPosition(curPos);this.setIsTouchEnabled(!0);this.addChild(this._itemMenu);this.addChild(b,1)},menuCallback:function(a){a=a.getZOrder()-1E4;(a=testNames[a].testScene())&&a.runThisTest()},closeCallback:function(){history.go(-1)},ccTouchesBegan:function(a){this.isMouseDown||(this._beginPos=a[0].locationInView(0).y);this.isMouseDown=!0},ccTouchesMoved:function(a){if(this.isMouseDown){var a=a[0].locationInView(0).y,b=a-this._beginPos;curPos=cc.ccp(this._itemMenu.getPosition().x,
this._itemMenu.getPosition().y);var b=cc.ccp(curPos.x,curPos.y+b),c=cc.Director.sharedDirector().getWinSize();0>b.y?this._itemMenu.setPosition(cc.PointZero()):b.y>(testNames.length+1)*LINE_SPACE-c.height?this._itemMenu.setPosition(cc.ccp(0,(testNames.length+1)*LINE_SPACE-c.height)):(this._itemMenu.setPosition(b),this._beginPos=cc.ccp(0,a).y,curPos=b)}},ccTouchesEnded:function(){this.isMouseDown=!1}}),testNames=[{title:"ActionManagerTest",testScene:function(){return new ActionManagerTestScene}},{title:"ActionsTest",
testScene:function(){return new ActionsTestScene}},{title:"Box2DTest",testScene:function(){return new Box2DTestScene}},{title:"ClickAndMoveTest",testScene:function(){return new ClickAndMoveTestScene}},{title:"CocosDenshionTest",testScene:function(){return new CocosDenshionTestScene}},{title:"CocosNodeTest",testScene:function(){return new CocosNodeTestScene}},{title:"CurrentLanguageTest",testScene:function(){return new CurrentLanguageTestScene}},{title:"DirectorTest",testScene:function(){return new DirectorTestScene}},
{title:"DrawPrimitivesTest",testScene:function(){return new DrawPrimitivesTestScene}},{title:"EaseActionsTest",testScene:function(){return new EaseActionsTestScene}},{title:"FontTest",testScene:function(){return new FontTestScene}},{title:"IntervalTest",testScene:function(){return new IntervalTestScene}},{title:"LabelTest",testScene:function(){return new LabelTestScene}},{title:"LayerTest",testScene:function(){return new LayerTestScene}},{title:"MenuTest",testScene:function(){return new MenuTestScene}},
{title:"ParallaxTest",testScene:function(){return new ParallaxTestScene}},{title:"ParticleTest",testScene:function(){return new ParticleTestScene}},{title:"PerformanceTest",testScene:function(){return new PerformanceTestScene}},{title:"ProgressActionsTest",testScene:function(){return new ProgressActionsTestScene}},{title:"RotateWorldTest",testScene:function(){return new RotateWorldTestScene}},{title:"SceneTest",testScene:function(){return new SceneTestScene}},{title:"SchedulerTest",testScene:function(){return new SchedulerTestScene}},
{title:"SpriteTest",testScene:function(){return new SpriteTestScene}},{title:"TextInputTest",testScene:function(){return new TextInputTestScene}},{title:"TextureCacheTest",testScene:function(){return new TextureCacheTestScene}},{title:"TileMapTest",testScene:function(){return new TileMapTestScene}},{title:"TouchesTest",testScene:function(){return new TouchesTestScene}},{title:"TransitionsTest",testScene:function(){return new TransitionsTestScene}}];var s_pathGrossini="Resources/Images/grossini.png",s_pathSister1="Resources/Images/grossinis_sister1.png",s_pathSister2="Resources/Images/grossinis_sister2.png",s_pathB1="Resources/Images/b1.png",s_pathB2="Resources/Images/b2.png",s_pathR1="Resources/Images/r1.png",s_pathR2="Resources/Images/r2.png",s_pathF1="Resources/Images/f1.png",s_pathF2="Resources/Images/f2.png",s_pathBlock="Resources/Images/blocks.png",s_back="Resources/Images/background.png",s_back1="Resources/Images/background1.png",s_back2=
"Resources/Images/background2.png",s_back3="Resources/Images/background3.png",s_stars1="Resources/Images/stars.png",s_stars2="Resources/Images/stars2.png",s_fire="Resources/Images/fire.png",s_snow="Resources/Images/snow.png",s_streak="Resources/Images/streak.png",s_playNormal="Resources/Images/btn-play-normal.png",s_playSelect="Resources/Images/btn-play-selected.png",s_aboutNormal="Resources/Images/btn-about-normal.png",s_aboutSelect="Resources/Images/btn-about-selected.png",s_highNormal="Resources/Images/btn-highscores-normal.png",
s_highSelect="Resources/Images/btn-highscores-selected.png",s_ball="Resources/Images/ball.png",s_paddle="Resources/Images/paddle.png",s_pathClose="Resources/Images/close.png",s_menuItem="Resources/Images/menuitemsprite.png",s_shapeModeMenuItem="Resources/Images/shapemode.png",s_textureModeMenuItem="Resources/Images/texturemode.png",s_MovementMenuItem="Resources/Images/movement.png",s_sendScore="Resources/Images/SendScoreButton.png",s_pressSendScore="Resources/Images/SendScoreButtonPressed.png",s_power=
"Resources/Images/powered.png",s_atlasTest="Resources/Images/atlastest.png",s_stars2Grayscale="Resources/Images/stars2-grayscale.png",s_starsGrayscale="Resources/Images/stars-grayscale.png",s_grossini_dance_atlas="Resources/Images/grossini_dance_atlas.png",s_piece="Resources/Images/piece.png",s_grossini_dance_atlas_mono="Resources/Images/grossini_dance_atlas-mono.png",s_grossini="Resources/animations/grossini.png",s_grossini_gray="Resources/animations/grossini_gray.png",s_grossini_blue="Resources/animations/grossini_blue.png",
s_grossini_aliases="Resources/animations/grossini-aliases.png",s_dragon_animation="Resources/animations/dragon_animation.png",s_ghosts="Resources/animations/ghosts.png",s_grossini_family="Resources/animations/grossini_family.png",s_boilingFoamPlist="Resources/Images/BoilingFoam.plist",s_grossiniPlist="Resources/animations/grossini.plist",s_grossini_grayPlist="Resources/animations/grossini_gray.plist",s_grossini_bluePlist="Resources/animations/grossini_blue.plist",s_grossini_aliasesPlist="Resources/animations/grossini-aliases.plist",
s_ghostsPlist="Resources/animations/ghosts.plist",s_grossini_familyPlist="Resources/animations/grossini_family.plist",s_helloWorld="Resources/Images/HelloWorld.png",s_grossiniDance01="Resources/Images/grossini_dance_01.png",s_grossiniDance02="Resources/Images/grossini_dance_02.png",s_grossiniDance03="Resources/Images/grossini_dance_03.png",s_grossiniDance04="Resources/Images/grossini_dance_04.png",s_grossiniDance05="Resources/Images/grossini_dance_05.png",s_grossiniDance06="Resources/Images/grossini_dance_06.png",
s_grossiniDance07="Resources/Images/grossini_dance_07.png",s_grossiniDance08="Resources/Images/grossini_dance_08.png",s_grossiniDance09="Resources/Images/grossini_dance_09.png",s_grossiniDance10="Resources/Images/grossini_dance_10.png",s_grossiniDance11="Resources/Images/grossini_dance_11.png",s_grossiniDance12="Resources/Images/grossini_dance_12.png",s_grossiniDance13="Resources/Images/grossini_dance_13.png",s_grossiniDance14="Resources/Images/grossini_dance_14.png",s_tilesPng="Resources/TileMaps/tiles.png",
s_levelMapTga="Resources/TileMaps/levelmap.tga",s_fixedOrthoTest2Png="Resources/TileMaps/fixed-ortho-test2.png",s_hexaTilesPng="Resources/TileMaps/hexa-tiles.png",s_isoTestPng="Resources/TileMaps/iso-test.png",s_isoTest2Png="Resources/TileMaps/iso-test2.png",s_isoPng="Resources/TileMaps/iso.png",s_orthoTest1BwPng="Resources/TileMaps/ortho-test1_bw.png",s_orthoTest1Png="Resources/TileMaps/ortho-test1.png",s_tilesHdPng="Resources/TileMaps/tiles-hd.png",s_tmwDesertSpacingHdPng="Resources/TileMaps/tmw_desert_spacing-hd.png",
s_tmwDesertSpacingPng="Resources/TileMaps/tmw_desert_spacing.png",s_fnTuffyBoldItalicCharmapPng="Resources/fonts/tuffy_bold_italic-charmap.png",s_fpsImages="Resources/fonts/fps_images.png",s_bitmapFontTest="Resources/fonts/bitmapFontTest.png",s_bitmapFontTest2="Resources/fonts/bitmapFontTest2.png",s_bitmapFontTest3="Resources/fonts/bitmapFontTest3.png",s_bitmapFontTest4="Resources/fonts/bitmapFontTest4.png",s_bitmapFontTest5="Resources/fonts/bitmapFontTest5.png",s_konqa32="Resources/fonts/konqa32.png",
s_konqa32_hd="Resources/fonts/konqa32-hd.png",s_bitmapFontChinese="Resources/fonts/bitmapFontChinese.png",s_arial16="Resources/fonts/arial16.png",s_larabie_16="Resources/fonts/larabie-16.png",s_larabie_16_hd="Resources/fonts/larabie-16-hd.png",s_futura48="Resources/fonts/futura-48.png",s_bitmapFontTest_fnt="Resources/fonts/bitmapFontTest.fnt",s_bitmapFontTest2_fnt="Resources/fonts/bitmapFontTest2.fnt",s_bitmapFontTest3_fnt="Resources/fonts/bitmapFontTest3.fnt",s_bitmapFontTest4_fnt="Resources/fonts/bitmapFontTest4.fnt",
s_bitmapFontTest5_fnt="Resources/fonts/bitmapFontTest5.fnt",s_konqa32_fnt="Resources/fonts/konqa32.fnt",s_konqa32_hd_fnt="Resources/fonts/konqa32-hd.fnt",s_bitmapFontChinese_fnt="Resources/fonts/bitmapFontChinese.fnt",s_arial16_fnt="Resources/fonts/arial16.fnt",s_futura48_fnt="Resources/fonts/futura-48.fnt",g_ressources=[{type:"image",src:s_pathGrossini},{type:"image",src:s_fnTuffyBoldItalicCharmapPng},{type:"image",src:s_fpsImages},{type:"image",src:s_pathSister1},{type:"image",src:s_pathSister2},
{type:"image",src:s_pathB1},{type:"image",src:s_pathB2},{type:"image",src:s_pathR1},{type:"image",src:s_pathR2},{type:"image",src:s_pathF1},{type:"image",src:s_pathF2},{type:"image",src:s_pathBlock},{type:"image",src:s_back},{type:"image",src:s_back1},{type:"image",src:s_back2},{type:"image",src:s_back3},{type:"image",src:s_stars1},{type:"image",src:s_stars2},{type:"image",src:s_fire},{type:"image",src:s_snow},{type:"image",src:s_playNormal},{type:"image",src:s_playSelect},{type:"image",src:s_aboutNormal},
{type:"image",src:s_aboutSelect},{type:"image",src:s_highNormal},{type:"image",src:s_highSelect},{type:"image",src:s_ball},{type:"image",src:s_paddle},{type:"image",src:s_pathClose},{type:"image",src:s_menuItem},{type:"image",src:s_shapeModeMenuItem},{type:"image",src:s_textureModeMenuItem},{type:"image",src:s_MovementMenuItem},{type:"image",src:s_sendScore},{type:"image",src:s_pressSendScore},{type:"image",src:s_power},{type:"image",src:s_atlasTest},{type:"image",src:s_tilesPng},{type:"image",src:s_streak},
{type:"image",src:s_starsGrayscale},{type:"image",src:s_stars2Grayscale},{type:"image",src:s_piece},{type:"image",src:s_grossini_dance_atlas_mono},{type:"image",src:s_fixedOrthoTest2Png},{type:"image",src:s_hexaTilesPng},{type:"image",src:s_isoTestPng},{type:"image",src:s_isoTest2Png},{type:"image",src:s_isoPng},{type:"image",src:s_orthoTest1BwPng},{type:"image",src:s_orthoTest1Png},{type:"image",src:s_tilesHdPng},{type:"image",src:s_tmwDesertSpacingHdPng},{type:"image",src:s_tmwDesertSpacingPng},
{type:"image",src:s_grossini},{type:"image",src:s_grossini_gray},{type:"image",src:s_grossini_blue},{type:"image",src:s_grossini_dance_atlas},{type:"image",src:s_grossini_aliases},{type:"image",src:s_dragon_animation},{type:"image",src:s_ghosts},{type:"image",src:s_grossini_family},{type:"image",src:s_helloWorld},{type:"image",src:s_grossiniDance01},{type:"image",src:s_grossiniDance02},{type:"image",src:s_grossiniDance03},{type:"image",src:s_grossiniDance04},{type:"image",src:s_grossiniDance05},{type:"image",
src:s_grossiniDance06},{type:"image",src:s_grossiniDance07},{type:"image",src:s_grossiniDance08},{type:"image",src:s_grossiniDance09},{type:"image",src:s_grossiniDance10},{type:"image",src:s_grossiniDance11},{type:"image",src:s_grossiniDance12},{type:"image",src:s_grossiniDance13},{type:"image",src:s_grossiniDance14},{type:"image",src:s_bitmapFontTest},{type:"image",src:s_bitmapFontTest2},{type:"image",src:s_bitmapFontTest3},{type:"image",src:s_bitmapFontTest4},{type:"image",src:s_bitmapFontTest5},
{type:"image",src:s_konqa32},{type:"image",src:s_konqa32_hd},{type:"image",src:s_bitmapFontChinese},{type:"image",src:s_arial16},{type:"image",src:s_larabie_16},{type:"image",src:s_larabie_16_hd},{type:"image",src:s_futura48},{type:"plist",src:s_boilingFoamPlist},{type:"plist",src:s_grossiniPlist},{type:"plist",src:s_grossini_grayPlist},{type:"plist",src:s_grossini_bluePlist},{type:"plist",src:s_grossini_aliasesPlist},{type:"plist",src:s_ghostsPlist},{type:"plist",src:s_grossini_familyPlist},{type:"tmx",
src:"Resources/TileMaps/orthogonal-test1.tmx"},{type:"tmx",src:"Resources/TileMaps/orthogonal-test1.tsx"},{type:"tmx",src:"Resources/TileMaps/orthogonal-test2.tmx"},{type:"tmx",src:"Resources/TileMaps/orthogonal-test3.tmx"},{type:"tmx",src:"Resources/TileMaps/orthogonal-test4.tmx"},{type:"tmx",src:"Resources/TileMaps/orthogonal-test4-hd.tmx"},{type:"tmx",src:"Resources/TileMaps/orthogonal-test5.tmx"},{type:"tmx",src:"Resources/TileMaps/orthogonal-test6.tmx"},{type:"tmx",src:"Resources/TileMaps/orthogonal-test6-hd.tmx"},
{type:"tmx",src:"Resources/TileMaps/hexa-test.tmx"},{type:"tmx",src:"Resources/TileMaps/iso-test.tmx"},{type:"tmx",src:"Resources/TileMaps/iso-test1.tmx"},{type:"tmx",src:"Resources/TileMaps/iso-test2.tmx"},{type:"tmx",src:"Resources/TileMaps/iso-test2-uncompressed.tmx"},{type:"tmx",src:"Resources/TileMaps/ortho-objects.tmx"},{type:"tmx",src:"Resources/TileMaps/iso-test-objectgroup.tmx"},{type:"tmx",src:"Resources/TileMaps/iso-test-zorder.tmx"},{type:"tmx",src:"Resources/TileMaps/orthogonal-test-zorder.tmx"},
{type:"tmx",src:"Resources/TileMaps/iso-test-vertexz.tmx"},{type:"tmx",src:"Resources/TileMaps/orthogonal-test-vertexz.tmx"},{type:"tmx",src:"Resources/TileMaps/iso-test-movelayer.tmx"},{type:"tmx",src:"Resources/TileMaps/orthogonal-test-movelayer.tmx"},{type:"tmx",src:"Resources/TileMaps/iso-test-bug787.tmx"},{type:"tmx",src:"Resources/TileMaps/test-object-layer.tmx"},{type:"bgm",src:"Resources/background"},{type:"effect",src:"Resources/effect2"},{type:"tga",src:s_levelMapTga},{type:"fnt",src:s_bitmapFontTest_fnt},
{type:"fnt",src:s_bitmapFontTest2_fnt},{type:"fnt",src:s_bitmapFontTest3_fnt},{type:"fnt",src:s_bitmapFontTest4_fnt},{type:"fnt",src:s_bitmapFontTest5_fnt},{type:"fnt",src:s_konqa32_fnt},{type:"fnt",src:s_konqa32_hd_fnt},{type:"fnt",src:s_bitmapFontChinese_fnt},{type:"fnt",src:s_arial16_fnt},{type:"fnt",src:s_futura48_fnt}];var Ball=cc.Sprite.extend({_velocity:cc.PointZero(),_radius:0,radius:function(){return this._radius},setRadius:function(a){this._radius=a},move:function(a){this.setPosition(cc.ccpAdd(this.getPosition(),cc.ccpMult(this._velocity,a)));a=cc.Director.sharedDirector().getWinSize();this.getPosition().x>a.width-this.radius()?(this.setPosition(cc.ccp(a.width-this.radius(),this.getPosition().y)),this._velocity.x*=-1):this.getPosition().x<this.radius()&&(this.setPosition(cc.ccp(this.radius(),this.getPosition().y)),
this._velocity.x*=-1)},collideWithPaddle:function(a){var b=a.rect();b.origin.x+=a.getPosition().x;b.origin.y+=a.getPosition().y;var c=cc.Rect.CCRectGetMinY(b),d=cc.Rect.CCRectGetMidY(b),e=cc.Rect.CCRectGetMaxY(b),f=cc.Rect.CCRectGetMinX(b),b=cc.Rect.CCRectGetMaxX(b);if(this.getPosition().x>f&&this.getPosition().x<b&&(f=!1,b=0,this.getPositionY()>d&&this.getPositionY()<=e+this.radius()?(this.setPosition(cc.PointMake(this.getPosition().x,e+this.radius())),f=!0,b=Math.PI/2):this.getPosition().y<d&&this.getPosition().y>=
c-this.radius()&&(this.setPosition(cc.PointMake(this.getPosition().x,c-this.radius())),f=!0,b=-Math.PI/2),f))c=cc.ccpToAngle(cc.ccpSub(a.getPosition(),this.getPosition()))+b,a=1.00000005*cc.ccpLength(this._velocity),c=-cc.ccpToAngle(this._velocity)+5.0E-8*c,this._velocity=cc.ccpMult(cc.ccpForAngle(c),a)},setVelocity:function(a){this._velocity=a},getVelocity:function(){return this._velocity}});
Ball.ballWithTexture=function(a){var b=new Ball;b.initWithTexture(a);a instanceof cc.Texture2D?b.setRadius(a.getContentSize().width/2):(a instanceof HTMLImageElement||a instanceof HTMLCanvasElement)&&b.setRadius(a.width/2);return b};var PADDLE_STATE_GRABBED=0,PADDLE_STATE_UNGRABBED=1,Paddle=cc.Sprite.extend({_state:PADDLE_STATE_UNGRABBED,_rect:null,rect:function(){return cc.RectMake(-this._rect.size.width/2,-this._rect.size.height/2,this._rect.size.width,this._rect.size.height)},initWithTexture:function(a){this._super(a)&&(this._state=PADDLE_STATE_UNGRABBED);if(a instanceof cc.Texture2D)a=a.getContentSize(),this._rect=cc.RectMake(0,0,a.width,a.height);else if(a instanceof HTMLImageElement||a instanceof HTMLCanvasElement)this._rect=
cc.RectMake(0,0,a.width,a.height);return!0},onEnter:function(){cc.TouchDispatcher.sharedDispatcher().addTargetedDelegate(this,0,!0);this._super()},onExit:function(){cc.TouchDispatcher.sharedDispatcher().removeDelegate(this);this._super()},containsTouchLocation:function(a){var a=a.locationInView(a.view()),b=this.rect();b.origin.x+=this.getPosition().x;b.origin.y+=this.getPosition().y;return cc.Rect.CCRectContainsPoint(b,a)},ccTouchBegan:function(a){if(this._state!=PADDLE_STATE_UNGRABBED||!this.containsTouchLocation(a))return!1;
this._state=PADDLE_STATE_GRABBED;return!0},ccTouchMoved:function(a){cc.Assert(this._state==PADDLE_STATE_GRABBED,"Paddle - Unexpected state!");a=a.locationInView(a.view());this.setPosition(cc.PointMake(a.x,this.getPosition().y))},ccTouchEnded:function(){cc.Assert(this._state==PADDLE_STATE_GRABBED,"Paddle - Unexpected state!");this._state=PADDLE_STATE_UNGRABBED},touchDelegateRetain:function(){},touchDelegateRelease:function(){}});
Paddle.paddleWithTexture=function(a){var b=new Paddle;b.initWithTexture(a);return b};var HIGH_PLAYER=0,LOW_PLAYER=1,STATUS_BAR_HEIGHT=20,SPRITE_TAG=0,TouchesTestScene=TestScene.extend({ctor:function(){this._super(!0);this.addChild(new PongLayer)},runThisTest:function(){cc.Director.sharedDirector().replaceScene(this)},MainMenuCallback:function(a){cc.Director.sharedDirector().setDeviceOrientation(cc.DEVICE_ORIENTATION_PORTRAIT);this._super(a)}}),PongLayer=cc.Layer.extend({_ball:null,_paddles:[],_ballStartingVelocity:cc.PointZero(),_winSize:null,ctor:function(){this._ballStartingVelocity=
cc.PointMake(20,-100);this._winSize=cc.Director.sharedDirector().getWinSize();this._ball=Ball.ballWithTexture(cc.TextureCache.sharedTextureCache().addImage(s_ball));this._ball.setPosition(cc.PointMake(this._winSize.width/2,this._winSize.height/2));this._ball.setVelocity(this._ballStartingVelocity);this.addChild(this._ball);var a=cc.TextureCache.sharedTextureCache().addImage(s_paddle);this._paddles=[];var b=Paddle.paddleWithTexture(a);b.setPosition(cc.PointMake(this._winSize.width/2,15));this._paddles.push(b);
b=Paddle.paddleWithTexture(a);b.setPosition(cc.PointMake(this._winSize.width/2,this._winSize.height-STATUS_BAR_HEIGHT-15));this._paddles.push(b);b=Paddle.paddleWithTexture(a);b.setPosition(cc.PointMake(this._winSize.width/2,100));this._paddles.push(b);b=Paddle.paddleWithTexture(a);b.setPosition(cc.PointMake(this._winSize.width/2,this._winSize.height-STATUS_BAR_HEIGHT-100));this._paddles.push(b);for(a=0;a<this._paddles.length&&this._paddles[a];a++)this.addChild(this._paddles[a]);this.schedule(this.doStep)},
resetAndScoreBallForPlayer:function(){this._ballStartingVelocity=300>Math.abs(this._ball.getVelocity().y)?cc.ccpMult(this._ballStartingVelocity,-1.1):cc.ccpMult(this._ballStartingVelocity,-1);this._ball.setVelocity(this._ballStartingVelocity);this._ball.setPosition(cc.PointMake(this._winSize.width/2,this._winSize.height/2))},doStep:function(a){this._ball.move(a);for(a=0;a<this._paddles.length&&this._paddles[a];a++)this._ball.collideWithPaddle(this._paddles[a]);this._ball.getPosition().y>this._winSize.height-
STATUS_BAR_HEIGHT+this._ball.radius()?this.resetAndScoreBallForPlayer(LOW_PLAYER):this._ball.getPosition().y<-this._ball.radius()&&this.resetAndScoreBallForPlayer(HIGH_PLAYER);this._ball.draw()}});var TAG_ANIMATION_DANCE=1,MAX_TESTS=8,sceneIdx=-1,createSchedulerTest=function(a){var b=null;switch(a){case 0:b=new SchedulerAutoremove;break;case 1:b=new SchedulerPauseResume;break;case 2:b=new SchedulerUnscheduleAll;break;case 3:b=new SchedulerUnscheduleAllHard;break;case 4:b=new SchedulerSchedulesAndRemove;break;case 5:b=new SchedulerUpdate;break;case 6:b=new SchedulerUpdateAndCustom;break;case 7:b=new SchedulerUpdateFromCustom}return b},nextSchedulerTest=function(){sceneIdx++;sceneIdx%=MAX_TESTS;
return createSchedulerTest(sceneIdx)},backSchedulerTest=function(){sceneIdx--;0>sceneIdx&&(sceneIdx+=MAX_TESTS);return createSchedulerTest(sceneIdx)},restartSchedulerTest=function(){return createSchedulerTest(sceneIdx)},SchedulerTestLayer=cc.Layer.extend({onEnter:function(){this._super();var a=cc.Director.sharedDirector().getWinSize(),b=cc.LabelTTF.create(this.title(),"Arial",30);this.addChild(b);b.setPosition(cc.ccp(a.width/2,a.height-50));b=this.subtitle();""!=b&&(b=cc.LabelTTF.create(b,"Thonburi",
13),this.addChild(b,1),b.setPosition(cc.ccp(a.width/2,a.height-80)));var b=cc.MenuItemImage.create("Resources/Images/b1.png","Resources/Images/b2.png",this,this.backCallback),c=cc.MenuItemImage.create("Resources/Images/r1.png","Resources/Images/r2.png",this,this.restartCallback),d=cc.MenuItemImage.create("Resources/Images/f1.png","Resources/Images/f2.png",this,this.nextCallback),e=cc.Menu.create(b,c,d,null);e.setPosition(cc.PointZero());b.setPosition(cc.ccp(a.width/2-100,30));c.setPosition(cc.ccp(a.width/
2,30));d.setPosition(cc.ccp(a.width/2+100,30));this.addChild(e,1)},title:function(){return"No title"},subtitle:function(){return""},backCallback:function(){var a=new SchedulerTestScene,b=backSchedulerTest();a.addChild(b);cc.Director.sharedDirector().replaceScene(a)},nextCallback:function(){var a=new SchedulerTestScene,b=nextSchedulerTest();a.addChild(b);cc.Director.sharedDirector().replaceScene(a)},restartCallback:function(){var a=new SchedulerTestScene,b=restartSchedulerTest();a.addChild(b);cc.Director.sharedDirector().replaceScene(a)}}),
SchedulerAutoremove=SchedulerTestLayer.extend({_accum:0,onEnter:function(){this._super();this.schedule(this.autoremove,0.5);this.schedule(this.tick,0.5);this._accum=0},title:function(){return"Self-remove an scheduler"},subtitle:function(){return"1 scheduler will be autoremoved in 3 seconds. See console"},autoremove:function(a){this._accum+=a;cc.Log("Time: "+this._accum);3<this._accum&&(this.unschedule(this.autoremove),cc.Log("scheduler removed"))},tick:function(){cc.Log("This scheduler should not be removed")}}),
SchedulerPauseResume=SchedulerTestLayer.extend({onEnter:function(){this._super();this.schedule(this.tick1,0.5);this.schedule(this.tick2,0.5);this.schedule(this.pause,0.5)},title:function(){return"Pause / Resume"},subtitle:function(){return"Scheduler should be paused after 3 seconds. See console"},tick1:function(){cc.Log("tick1")},tick2:function(){cc.Log("tick2")},pause:function(){cc.Scheduler.sharedScheduler().pauseTarget(this)}}),SchedulerUnscheduleAll=SchedulerTestLayer.extend({onEnter:function(){this._super();
this.schedule(this.tick1,0.5);this.schedule(this.tick2,1);this.schedule(this.tick3,1.5);this.schedule(this.tick4,1.5);this.schedule(this.unscheduleAll,4)},title:function(){return"Unschedule All selectors"},subtitle:function(){return"All scheduled selectors will be unscheduled in 4 seconds. See console"},tick1:function(){cc.Log("tick1")},tick2:function(){cc.Log("tick2")},tick3:function(){cc.Log("tick3")},tick4:function(){cc.Log("tick4")},unscheduleAll:function(){this.unscheduleAllSelectors()}}),SchedulerUnscheduleAllHard=
SchedulerTestLayer.extend({onEnter:function(){this._super();this.schedule(this.tick1,0.5);this.schedule(this.tick2,1);this.schedule(this.tick3,1.5);this.schedule(this.tick4,1.5);this.schedule(this.unscheduleAll,4)},title:function(){return"Unschedule All selectors #2"},subtitle:function(){return"Unschedules all selectors after 4s. Uses CCScheduler. See console"},tick1:function(){cc.Log("tick1")},tick2:function(){cc.Log("tick2")},tick3:function(){cc.Log("tick3")},tick4:function(){cc.Log("tick4")},unscheduleAll:function(){cc.Scheduler.sharedScheduler().unscheduleAllSelectors()}}),
SchedulerSchedulesAndRemove=SchedulerTestLayer.extend({onEnter:function(){this._super();this.schedule(this.tick1,0.5);this.schedule(this.tick2,1);this.schedule(this.scheduleAndUnschedule,4)},title:function(){return"Schedule from Schedule"},subtitle:function(){return"Will unschedule and schedule selectors in 4s. See console"},tick1:function(){cc.Log("tick1")},tick2:function(){cc.Log("tick2")},tick3:function(){cc.Log("tick3")},tick4:function(){cc.Log("tick4")},scheduleAndUnschedule:function(){this.unschedule(this.tick1);
this.unschedule(this.tick2);this.unschedule(this.scheduleAndUnschedule);this.schedule(this.tick3,1);this.schedule(this.tick4,1)}}),TestNode=cc.Node.extend({_pString:"",initWithString:function(a,b){this._pString=a;this.scheduleUpdateWithPriority(b)}}),SchedulerUpdate=SchedulerTestLayer.extend({onEnter:function(){this._super();var a=new TestNode;a.initWithString("---",50);this.addChild(a);a=new TestNode;a.initWithString("3rd",0);this.addChild(a);a=new TestNode;a.initWithString("1st",-10);this.addChild(a);
a=new TestNode;a.initWithString("4th",10);this.addChild(a);a=new TestNode;a.initWithString("5th",20);this.addChild(a);a=new TestNode;a.initWithString("2nd",-5);this.addChild(a);this.schedule(this.removeUpdates,4)},title:function(){return"Schedule update with priority"},subtitle:function(){return"3 scheduled updates. Priority should work. Stops in 4s. See console"},removeUpdates:function(){for(var a=this.getChildren(),b=0;b<a.length;b++){var c=a[b];c&&c.unscheduleAllSelectors()}}}),SchedulerUpdateAndCustom=
SchedulerTestLayer.extend({onEnter:function(){this._super();this.scheduleUpdate();this.schedule(this.tick);this.schedule(this.stopSelectors,0.4)},title:function(){return"Schedule Update + custom selector"},subtitle:function(){return"Update + custom selector at the same time. Stops in 4s. See console"},update:function(a){cc.Log("update called:"+a)},tick:function(a){cc.Log("custom selector called:"+a)},stopSelectors:function(){this.unscheduleAllSelectors()}}),SchedulerUpdateFromCustom=SchedulerTestLayer.extend({onEnter:function(){this._super();
this.schedule(this.schedUpdate,2)},title:function(){return"Schedule Update in 2 sec"},subtitle:function(){return"Update schedules in 2 secs. Stops 2 sec later. See console"},update:function(a){cc.Log("update called:"+a)},schedUpdate:function(){this.unschedule(this.schedUpdate);this.scheduleUpdate();this.schedule(this.stopUpdate,2)},stopUpdate:function(){this.unscheduleUpdate();this.unschedule(this.stopUpdate)}}),RescheduleSelector=SchedulerTestLayer.extend({_interval:1,_ticks:0,onEnter:function(){this._super();
this._interval=1;this._ticks=0;this.schedule(this.schedUpdate,this._interval)},title:function(){return"Reschedule Selector"},subtitle:function(){return"Interval is 1 second, then 2, then 3..."},schedUpdate:function(a){this._ticks++;cc.Log("schedUpdate: "+a.toFixed(2));3<this._ticks&&(this._interval+=1,this.schedule(this.schedUpdate,this._interval),this._ticks=0)}}),SchedulerTestScene=TestScene.extend({runThisTest:function(){this.addChild(nextSchedulerTest());cc.Director.sharedDirector().replaceScene(this)}});var TAG_SPRITE=1,ClickAndMoveTestScene=TestScene.extend({runThisTest:function(){this.addChild(new MainLayer);cc.Director.sharedDirector().replaceScene(this)}}),MainLayer=cc.Layer.extend({ctor:function(){this.setIsTouchEnabled(!0);var a=cc.Sprite.create(s_pathGrossini),b=cc.LayerColor.create(cc.ccc4(255,255,0,100));this.addChild(b,-1);this.addChild(a,0,TAG_SPRITE);a.setPosition(cc.PointMake(20,150));a.runAction(cc.JumpTo.create(4,cc.PointMake(300,48),100,4));var a=cc.FadeIn.create(1),c=cc.FadeOut.create(1),
a=cc.RepeatForever.create(cc.Sequence.create(a,c));b.runAction(a)},ccTouchesEnded:function(a){if(!(0>=a.length)){var a=a[0],b=a.locationInView(a.view()),a=this.getChildByTag(TAG_SPRITE);a.stopAllActions();a.runAction(cc.MoveTo.create(1,cc.PointMake(b.x,b.y)));var c=b.x-a.getPositionX(),b=b.y-a.getPositionY(),d=cc.RADIANS_TO_DEGREES(Math.atan(c/b));0>b&&(d=0>c?180+Math.abs(d):180-Math.abs(d));a.runAction(cc.RotateTo.create(1,d%360))}}});var TAG_MENU=77771,TAG_MENU0=77770,TAG_MENU1=77771,MenuLayer1=cc.Layer.extend({ctor:function(){cc.MenuItemFont.setFontSize(30);cc.MenuItemFont.setFontName("Courier New");this.setIsTouchEnabled(!0);var a=cc.Sprite.create(s_menuItem,cc.RectMake(0,46,115,23)),b=cc.Sprite.create(s_menuItem,cc.RectMake(0,23,115,23)),c=cc.Sprite.create(s_menuItem,cc.RectMake(0,0,115,23)),b=cc.MenuItemSprite.create(a,b,c,this,this.menuCallback),c=cc.MenuItemImage.create(s_sendScore,s_pressSendScore,this,this.menuCallback2),
a=cc.LabelAtlas.create("0123456789","Resources/fonts/fps_images.png",16,24,"."),a=cc.MenuItemLabel.create(a,this,this.menuCallbackDisabled);a.setDisabledColor(cc.ccc3(32,32,64));a.setColor(cc.ccc3(200,200,255));var d=cc.MenuItemFont.create("I toggle enable items",this,this.menuCallbackEnabled);d.setFontSizeObj(20);cc.MenuItemFont.setFontName("Marker Felt");var e=cc.LabelBMFont.create("configuration","Resources/fonts/bitmapFontTest3.fnt"),e=cc.MenuItemLabel.create(e,this,this.menuCallbackConfig);e.setScale(0.8);
var f=cc.MenuItemFont.create("Quit",this,this.onQuit),g=cc.TintBy.create(0.5,0,-255,-255),h=g.reverse(),g=cc.Sequence.create(g,h,null);f.runAction(cc.RepeatForever.create(g));b=cc.Menu.create(b,c,a,d,e,f,null);b.alignItemsVertically();c=cc.Director.sharedDirector().getWinSize();e=b.getChildren();for(f=0;f<e.length&&null!=e[f];f++)d=e[f],g=d.getPosition(),h=c.width/2+50,0==f%2&&(h=-h),d.setPosition(cc.PointMake(g.x+h,g.y)),d.runAction(cc.EaseElasticOut.create(cc.MoveBy.create(2,cc.PointMake(g.x-h,
0)),0.35));this._disabledItem=a;this._disabledItem.setIsEnabled(!1);this.addChild(b)},registerWithTouchDispatcher:function(){cc.TouchDispatcher.sharedDispatcher().addTargetedDelegate(this,cc.CCMENU_TOUCH_PRIORITY+1,!0)},ccTouchBegan:function(){return!0},menuCallback:function(){this._parent.switchTo(1)},menuCallbackConfig:function(){this._parent.switchTo(3)},allowTouches:function(){cc.TouchDispatcher.sharedDispatcher().setPriority(cc.CCMENU_TOUCH_PRIORITY+1,this);this.unscheduleAllSelectors();cc.Log("Touches allowed again!")},
menuCallbackDisabled:function(){cc.TouchDispatcher.sharedDispatcher().setPriority(cc.CCMENU_TOUCH_PRIORITY-1,this);this.schedule(this.allowTouches,5);cc.Log("TOUCHES DISABLED FOR 5 SECONDS")},menuCallbackEnabled:function(){this._disabledItem.setIsEnabled(!this._disabledItem.getIsEnabled())},menuCallback2:function(){this._parent.switchTo(2)},onQuit:function(){cc.Assert(0,"Quit!")}}),MenuLayer2=cc.Layer.extend({ctor:function(){for(var a=0;2>a;a++){var b=cc.MenuItemImage.create(s_playNormal,s_playSelect,
this,this.menuCallback),c=cc.MenuItemImage.create(s_highNormal,s_highSelect,this,this.menuCallbackOpacity),d=cc.MenuItemImage.create(s_aboutNormal,s_aboutSelect,this,this.menuCallbackAlign);b.setScaleX(1.5);c.setScaleX(0.5);d.setScaleX(0.5);b=cc.Menu.create(b,c,d);b.setTag(TAG_MENU);this.addChild(b,0,100+a);this._centeredMenu=b.getPosition()}this._alignedH=!0;this.alignMenuH()},alignMenuH:function(){for(var a=0;2>a;a++){var b=this.getChildByTag(100+a);b.setPosition(this._centeredMenu);if(0==a){b.alignItemsHorizontally();
var c=b.getPosition();b.setPosition(cc.ccpAdd(c,cc.PointMake(0,30)))}else b.alignItemsHorizontallyWithPadding(40),c=b.getPosition(),b.setPosition(cc.ccpSub(c,cc.PointMake(0,30)))}},alignMenusV:function(){for(var a=0;2>a;a++){var b=this.getChildByTag(100+a);b.setPosition(this._centeredMenu);if(0==a){b.alignItemsVertically();var c=b.getPosition();b.setPosition(cc.ccpAdd(c,cc.PointMake(100,0)))}else b.alignItemsVerticallyWithPadding(40),c=b.getPosition(),b.setPosition(cc.ccpSub(c,cc.PointMake(100,0)))}},
menuCallback:function(){this._parent.switchTo(0)},menuCallbackOpacity:function(a){a=a.getParent();128==a.getOpacity()?a.setOpacity(255):a.setOpacity(128)},menuCallbackAlign:function(){(this._alignedH=!this._alignedH)?this.alignMenuH():this.alignMenusV()}}),MenuLayer3=cc.Layer.extend({ctor:function(){cc.MenuItemFont.setFontName("Marker Felt");cc.MenuItemFont.setFontSize(28);var a=cc.LabelBMFont.create("Enable AtlasItem","Resources/fonts/bitmapFontTest3.fnt"),a=cc.MenuItemLabel.create(a,this,this.menuCallback2),
b=cc.MenuItemFont.create("--- Go Back ---",this,this.menuCallback),c=cc.Sprite.create(s_menuItem,cc.RectMake(0,46,115,23)),d=cc.Sprite.create(s_menuItem,cc.RectMake(0,23,115,23)),e=cc.Sprite.create(s_menuItem,cc.RectMake(0,0,115,23));this._disabledItem=c=cc.MenuItemSprite.create(c,d,e,this,this.menuCallback3);this._disabledItem.setIsEnabled(!1);d=cc.Menu.create(a,b,c);d.setPosition(cc.PointMake(0,0));e=cc.Director.sharedDirector().getWinSize();a.setPosition(cc.PointMake(e.width/2-150,e.height/2));
b.setPosition(cc.PointMake(e.width/2-200,e.height/2));c.setPosition(cc.PointMake(e.width/2,e.height/2-100));e=cc.JumpBy.create(3,cc.PointMake(400,0),50,4);b.runAction(cc.RepeatForever.create(cc.Sequence.create(e,e.reverse())));var e=cc.RotateBy.create(3,360),f=e.copy(),g=e.copy();a.runAction(cc.RepeatForever.create(e));b.runAction(cc.RepeatForever.create(f));c.runAction(cc.RepeatForever.create(g));this.addChild(d)},menuCallback:function(){this._parent.switchTo(0)},menuCallback2:function(){this._disabledItem.setIsEnabled(!this._disabledItem.getIsEnabled());
this._disabledItem.stopAllActions()},menuCallback3:function(){cc.Log("do something")}}),MenuLayer4=cc.Layer.extend({ctor:function(){cc.MenuItemFont.setFontName("American Typewriter");cc.MenuItemFont.setFontSize(18);var a=cc.MenuItemFont.create("Sound");a.setIsEnabled(!1);cc.MenuItemFont.setFontName("Marker Felt");cc.MenuItemFont.setFontSize(34);var b=cc.MenuItemToggle.create(this,this.menuCallback,cc.MenuItemFont.create("On"),cc.MenuItemFont.create("Off"));cc.MenuItemFont.setFontName("American Typewriter");
cc.MenuItemFont.setFontSize(18);var c=cc.MenuItemFont.create("Music");c.setIsEnabled(!1);cc.MenuItemFont.setFontName("Marker Felt");cc.MenuItemFont.setFontSize(34);var d=cc.MenuItemToggle.create(this,this.menuCallback,cc.MenuItemFont.create("On"),cc.MenuItemFont.create("Off"));cc.MenuItemFont.setFontName("American Typewriter");cc.MenuItemFont.setFontSize(18);var e=cc.MenuItemFont.create("Quality");e.setIsEnabled(!1);cc.MenuItemFont.setFontName("Marker Felt");cc.MenuItemFont.setFontSize(34);var f=
cc.MenuItemToggle.create(this,this.menuCallback,cc.MenuItemFont.create("High"),cc.MenuItemFont.create("Low"));cc.MenuItemFont.setFontName("American Typewriter");cc.MenuItemFont.setFontSize(18);var g=cc.MenuItemFont.create("Orientation");g.setIsEnabled(!1);cc.MenuItemFont.setFontName("Marker Felt");cc.MenuItemFont.setFontSize(34);var h=cc.MenuItemToggle.create(this,this.menuCallback,cc.MenuItemFont.create("Off"));h.getSubItems().push(cc.MenuItemFont.create("33%"));h.getSubItems().push(cc.MenuItemFont.create("66%"));
h.getSubItems().push(cc.MenuItemFont.create("100%"));h.setSelectedIndex(2);cc.MenuItemFont.setFontName("Marker Felt");cc.MenuItemFont.setFontSize(34);var i=cc.LabelBMFont.create("go back","Resources/fonts/bitmapFontTest3.fnt"),i=cc.MenuItemLabel.create(i,this,this.backCallback),a=cc.Menu.create(a,c,b,d,e,g,f,h,i);a.alignItemsInColumns(2,2,2,2,1,null);this.addChild(a)},menuCallback:function(){},backCallback:function(){this._parent.switchTo(0)}}),MenuTestScene=TestScene.extend({runThisTest:function(){var a=
new MenuLayer1,b=new MenuLayer2,c=new MenuLayer3,d=new MenuLayer4;this.addChild(cc.LayerMultiplex.create(a,b,c,d,null),0);cc.Director.sharedDirector().replaceScene(this)}});var actionTests=[function(){return new ActionManual},function(){return new ActionMove},function(){return new ActionScale},function(){return new ActionRotate},function(){return new ActionSkew},function(){return new ActionSkewRotateScale},function(){return new ActionJump},function(){return new ActionBezier},function(){return new ActionBlink},function(){return new ActionFade},function(){return new ActionTint},function(){return new ActionSequence},function(){return new ActionSequence2},function(){return new ActionSpawn},
function(){return new ActionReverse},function(){return new ActionDelayTime},function(){return new ActionRepeat},function(){return new ActionRepeatForever},function(){return new ActionRotateToRepeat},function(){return new ActionRotateJerk},function(){return new ActionCallFunc},function(){return new ActionCallFuncND},function(){return new ActionReverseSequence},function(){return new ActionReverseSequence2},function(){return new ActionAnimate}],actionIdx=-1;
function NextAction(){++actionIdx;actionIdx%=actionTests.length;return actionTests[actionIdx]()}function BackAction(){--actionIdx;0>actionIdx&&(actionIdx+=actionTests.length);return actionTests[actionIdx]()}function RestartAction(){return actionTests[actionIdx]()}
var ActionsTestScene=TestScene.extend({runThisTest:function(){actionIdx=-1;this.addChild(NextAction());cc.Director.sharedDirector().replaceScene(this)}}),ActionsDemo=cc.Layer.extend({_grossini:null,_tamara:null,kathia:null,centerSprites:function(a){var b=cc.Director.sharedDirector().getWinSize();1==a?(this._tamara.setIsVisible(!1),this._kathia.setIsVisible(!1),this._grossini.setPosition(cc.PointMake(b.width/2,b.height/2))):2==a?(this._kathia.setPosition(cc.PointMake(b.width/3,b.height/2)),this._tamara.setPosition(cc.PointMake(2*
b.width/3,b.height/2)),this._grossini.setIsVisible(!1)):3==a&&(this._grossini.setPosition(cc.PointMake(b.width/2,b.height/2)),this._tamara.setPosition(cc.PointMake(b.width/4,b.height/2)),this._kathia.setPosition(cc.PointMake(3*b.width/4,b.height/2)))},alignSpritesLeft:function(a){var b=cc.Director.sharedDirector().getWinSize();1==a?(this._tamara.setIsVisible(!1),this._kathia.setIsVisible(!1),this._grossini.setPosition(cc.PointMake(60,b.height/2))):2==a?(this._kathia.setPosition(cc.PointMake(60,b.height/
3)),this._tamara.setPosition(cc.PointMake(60,2*b.height/3)),this._grossini.setIsVisible(!1)):3==a&&(this._grossini.setPosition(cc.PointMake(60,b.height/2)),this._tamara.setPosition(cc.PointMake(60,2*b.height/3)),this._kathia.setPosition(cc.PointMake(60,b.height/3)))},title:function(){return"ActionsTest"},subtitle:function(){return""},restartCallback:function(){var a=new ActionsTestScene;a.addChild(RestartAction());cc.Director.sharedDirector().replaceScene(a)},nextCallback:function(){var a=new ActionsTestScene;
a.addChild(NextAction());cc.Director.sharedDirector().replaceScene(a)},backCallback:function(){var a=new ActionsTestScene;a.addChild(BackAction());cc.Director.sharedDirector().replaceScene(a)},onEnter:function(){this._super();this._grossini=cc.Sprite.create(s_pathGrossini);this._tamara=cc.Sprite.create(s_pathSister1);this._kathia=cc.Sprite.create(s_pathSister2);this.addChild(this._grossini,1);this.addChild(this._tamara,2);this.addChild(this._kathia,3);var a=cc.Director.sharedDirector().getWinSize();
this._grossini.setPosition(cc.PointMake(a.width/2,a.height/3));this._tamara.setPosition(cc.PointMake(a.width/2,2*a.height/3));this._kathia.setPosition(cc.PointMake(a.width/2,a.height/2));var b=this.title(),b=cc.LabelTTF.create(b,"Arial",18);this.addChild(b,1);b.setPosition(cc.PointMake(a.width/2,a.height-30));if(b=this.subtitle())b=cc.LabelTTF.create(b,"Thonburi",22),this.addChild(b,1),b.setPosition(cc.PointMake(a.width/2,a.height-60));var b=cc.MenuItemImage.create(s_pathB1,s_pathB2,this,this.backCallback),
c=cc.MenuItemImage.create(s_pathR1,s_pathR2,this,this.restartCallback),d=cc.MenuItemImage.create(s_pathF1,s_pathF2,this,this.nextCallback),e=cc.Menu.create(b,c,d,null);e.setPosition(cc.PointZero());b.setPosition(cc.PointMake(a.width/2-100,30));c.setPosition(cc.PointMake(a.width/2,30));d.setPosition(cc.PointMake(a.width/2+100,30));this.addChild(e,1)}}),ActionManual=ActionsDemo.extend({onEnter:function(){this._super();var a=cc.Director.sharedDirector().getWinSize();this._tamara.setScaleX(2.5);this._tamara.setScaleY(-1);
this._tamara.setPosition(cc.PointMake(100,70));this._tamara.setOpacity(128);this._grossini.setRotation(120);this._grossini.setPosition(cc.PointMake(a.width/2,a.height/2));this._grossini.setColor(cc.ccc3(255,0,0));this._kathia.setPosition(cc.PointMake(a.width-100,a.height/2));this._kathia.setColor(cc.BLUE())},subtitle:function(){return"Manual Transformation"}}),ActionMove=ActionsDemo.extend({onEnter:function(){this._super();this.centerSprites(3);var a=cc.Director.sharedDirector().getWinSize(),a=cc.MoveTo.create(2,
cc.PointMake(a.width-40,a.height-40)),b=cc.MoveBy.create(2,cc.PointMake(80,80)),c=b.reverse();this._tamara.runAction(a);this._grossini.runAction(cc.Sequence.create(b,c));this._kathia.runAction(cc.MoveTo.create(1,cc.PointMake(40,40)))},subtitle:function(){return"MoveTo / MoveBy"}}),ActionScale=ActionsDemo.extend({onEnter:function(){this._super();this.centerSprites(3);var a=cc.ScaleTo.create(2,0.5),b=cc.ScaleBy.create(2,2),c=cc.ScaleBy.create(2,0.25,4.5),d=b.reverse(),e=c.reverse();this._tamara.runAction(a);
this._kathia.runAction(cc.Sequence.create(c,e));this._grossini.runAction(cc.Sequence.create(b,d,null))},subtitle:function(){return"ScaleTo / ScaleBy"}}),ActionSkew=ActionsDemo.extend({onEnter:function(){this._super();this.centerSprites(3);var a=cc.SkewTo.create(2,37.2,-37.2),b=cc.SkewTo.create(2,0,0),c=cc.SkewBy.create(2,0,-90),d=cc.SkewBy.create(2,45,45),e=c.reverse(),f=d.reverse();this._tamara.runAction(cc.Sequence.create(a,b,null));this._grossini.runAction(cc.Sequence.create(c,e,null));this._kathia.runAction(cc.Sequence.create(d,
f,null))},subtitle:function(){return"SkewTo / SkewBy"}}),ActionSkewRotateScale=ActionsDemo.extend({onEnter:function(){this._super();this._tamara.removeFromParentAndCleanup(!0);this._grossini.removeFromParentAndCleanup(!0);this._kathia.removeFromParentAndCleanup(!0);var a=cc.Director.sharedDirector().getWinSize(),b=cc.SizeMake(100,100),c=cc.LayerColor.create(cc.ccc4(255,255,0,255));c.setAnchorPoint(cc.ccp(0,0));c.setPosition(new cc.Point((a.width-b.width)/2,(a.height-b.height)/2));c.setContentSize(b);
a=cc.LayerColor.create(cc.ccc4(255,0,0,255));c.addChild(a);a.setContentSize(cc.SizeMake(10,10));a.setPosition(cc.ccp(0,b.height-10));a.setAnchorPoint(cc.ccp(0,0));a=cc.LayerColor.create(cc.ccc4(0,0,255,255));c.addChild(a);a.setContentSize(cc.SizeMake(10,10));a.setPosition(cc.ccp(b.width-10,b.height-10));a.setAnchorPoint(cc.ccp(0,0));this.addChild(c);var b=cc.SkewTo.create(2,0,2),a=cc.RotateTo.create(2,61),d=cc.ScaleTo.create(2,-0.44,0.47),e=cc.ScaleTo.create(2,1,1),f=cc.RotateTo.create(2,0),g=cc.SkewTo.create(2,
0,0);c.runAction(cc.Sequence.create(b,g,null));c.runAction(cc.Sequence.create(a,f,null));c.runAction(cc.Sequence.create(d,e,null))},subtitle:function(){return"Skew + Rotate + Scale"}}),ActionRotate=ActionsDemo.extend({onEnter:function(){this._super();this.centerSprites(3);var a=cc.RotateTo.create(2,45),b=cc.RotateTo.create(2,-45),c=cc.RotateTo.create(2,0);this._tamara.runAction(cc.Sequence.create(a,c,null));var a=cc.RotateBy.create(2,360),d=a.reverse();this._grossini.runAction(cc.Sequence.create(a,
d,null));this._kathia.runAction(cc.Sequence.create(b,c.copy(),null))},subtitle:function(){return"RotateTo / RotateBy"}}),ActionJump=ActionsDemo.extend({onEnter:function(){this._super();this.centerSprites(3);var a=cc.JumpTo.create(2,cc.PointMake(300,300),50,4),b=cc.JumpBy.create(2,cc.PointMake(300,0),50,4),c=cc.JumpBy.create(2,cc.PointMake(0,0),80,4),d=b.reverse();this._tamara.runAction(a);this._grossini.runAction(cc.Sequence.create(b,d,null));this._kathia.runAction(cc.RepeatForever.create(c))},subtitle:function(){return"JumpTo / JumpBy"}}),
ActionBezier=ActionsDemo.extend({onEnter:function(){this._super();var a=cc.Director.sharedDirector().getWinSize();this.centerSprites(3);var b=new cc.BezierConfig;b.controlPoint_1=cc.PointMake(0,a.height/2);b.controlPoint_2=cc.PointMake(300,-a.height/2);b.endPosition=cc.PointMake(300,100);var b=cc.BezierBy.create(3,b),c=b.reverse(),b=cc.RepeatForever.create(cc.Sequence.create(b,c,null));this._tamara.setPosition(cc.PointMake(80,160));c=new cc.BezierConfig;c.controlPoint_1=cc.PointMake(100,a.height/
2);c.controlPoint_2=cc.PointMake(200,-a.height/2);c.endPosition=cc.PointMake(240,160);a=cc.BezierTo.create(2,c);this._kathia.setPosition(cc.PointMake(400,160));c=cc.BezierTo.create(2,c);this._grossini.id="gro";this._tamara.id="tam";this._kathia.id="kat";this._grossini.runAction(b);this._tamara.runAction(a);this._kathia.runAction(c)},subtitle:function(){return"BezierBy / BezierTo"}}),ActionBlink=ActionsDemo.extend({onEnter:function(){this._super();this.centerSprites(2);var a=cc.Blink.create(2,10),
b=cc.Blink.create(2,5);this._tamara.runAction(a);this._kathia.runAction(b)},subtitle:function(){return"Blink"}}),ActionFade=ActionsDemo.extend({onEnter:function(){this._super();this.centerSprites(2);this._tamara.setOpacity(0);var a=cc.FadeIn.create(1),b=a.reverse(),c=cc.FadeOut.create(1),d=c.reverse();this._tamara.runAction(cc.Sequence.create(a,b,null));this._kathia.runAction(cc.Sequence.create(c,d,null))},subtitle:function(){return"FadeIn / FadeOut"}}),ActionTint=ActionsDemo.extend({onEnter:function(){this._super();
this.centerSprites(2);var a=cc.TintTo.create(2,255,0,255),b=cc.TintBy.create(2,-127,-255,-127),c=b.reverse();this._tamara.runAction(a);this._kathia.runAction(cc.Sequence.create(b,c))},subtitle:function(){return"TintTo / TintBy"}}),ActionAnimate=ActionsDemo.extend({onEnter:function(){this._super();this.centerSprites(1);for(var a=cc.Animation.create(),b="",c=1;15>c;c++)b=10>c?"0"+c:""+c,b="Resources/Images/grossini_dance_"+b+".png",a.addFrameWithFileName(b);a=cc.Animate.create(3,a,!1);c=a.reverse();
this._grossini.runAction(cc.Sequence.create(a,c,null))},subtitle:function(){return"Animation"}}),ActionSequence=ActionsDemo.extend({onEnter:function(){this._super();this.alignSpritesLeft(1);this._grossini.runAction(cc.Sequence.create(cc.MoveBy.create(2,cc.PointMake(240,0)),cc.RotateBy.create(2,540),null))},subtitle:function(){return"Sequence: Move + Rotate"}}),ActionSequence2=ActionsDemo.extend({onEnter:function(){this._super();this.centerSprites(1);this._grossini.setIsVisible(!1);this._grossini.runAction(cc.Sequence.create(cc.Place.create(cc.PointMake(200,
200)),cc.Show.create(),cc.MoveBy.create(1,cc.PointMake(100,0)),cc.CallFunc.create(this,this.callback1),cc.CallFunc.create(this,this.callback2),cc.CallFunc.create(this,this.callback3),null))},callback1:function(){var a=cc.Director.sharedDirector().getWinSize(),b=cc.LabelTTF.create("callback 1 called","Marker Felt",16);b.setPosition(cc.PointMake(1*(a.width/4),a.height/2));this.addChild(b)},callback2:function(){var a=cc.Director.sharedDirector().getWinSize(),b=cc.LabelTTF.create("callback 2 called",
"Marker Felt",16);b.setPosition(cc.PointMake(2*(a.width/4),a.height/2));this.addChild(b)},callback3:function(){var a=cc.Director.sharedDirector().getWinSize(),b=cc.LabelTTF.create("callback 3 called","Marker Felt",16);b.setPosition(cc.PointMake(3*(a.width/4),a.height/2));this.addChild(b)},subtitle:function(){return"Sequence of InstantActions"}}),ActionCallFunc=ActionsDemo.extend({onEnter:function(){this._super();this.centerSprites(3);var a=cc.Sequence.create(cc.MoveBy.create(2,cc.PointMake(200,0)),
cc.CallFunc.create(this,this.callback1)),b=cc.Sequence.create(cc.ScaleBy.create(2,2),cc.FadeOut.create(2),cc.CallFunc.create(this,this.callback2)),c=cc.Sequence.create(cc.RotateBy.create(3,360),cc.FadeOut.create(2),cc.CallFunc.create(this,this.callback3,3199909562));this._grossini.runAction(a);this._tamara.runAction(b);this._kathia.runAction(c)},callback1:function(){var a=cc.Director.sharedDirector().getWinSize(),b=cc.LabelTTF.create("callback 1 called","Marker Felt",16);b.setPosition(cc.PointMake(1*
(a.width/4),a.height/2));this.addChild(b)},callback2:function(){var a=cc.Director.sharedDirector().getWinSize(),b=cc.LabelTTF.create("callback 2 called","Marker Felt",16);b.setPosition(cc.PointMake(2*(a.width/4),a.height/2));this.addChild(b)},callback3:function(){var a=cc.Director.sharedDirector().getWinSize(),b=cc.LabelTTF.create("callback 3 called","Marker Felt",16);b.setPosition(cc.PointMake(3*(a.width/4),a.height/2));this.addChild(b)},subtitle:function(){return"Callbacks: CallFunc and friends"}}),
ActionCallFuncND=ActionsDemo.extend({onEnter:function(){this._super();this.centerSprites(1);this._grossini.runAction(cc.Sequence.create(cc.MoveBy.create(2,cc.ccp(200,0)),cc.CallFunc.create(this._grossini,this.removeFromParentAndCleanup,!0),null))},title:function(){return"CallFuncND + auto remove"},subtitle:function(){return"CallFuncND + removeFromParentAndCleanup. Grossini dissapears in 2s"}}),ActionSpawn=ActionsDemo.extend({onEnter:function(){this._super();this.alignSpritesLeft(1);this._grossini.runAction(cc.Spawn.create(cc.JumpBy.create(2,
cc.PointMake(300,0),50,4),cc.RotateBy.create(2,720),null))},subtitle:function(){return"Spawn: Jump + Rotate"}}),ActionRepeatForever=ActionsDemo.extend({onEnter:function(){this._super();this.centerSprites(1);this._grossini.runAction(cc.Sequence.create(cc.DelayTime.create(1),cc.CallFunc.create(this,this.repeatForever),null))},repeatForever:function(a){var b=cc.RepeatForever.create(cc.RotateBy.create(1,360));a.runAction(b)},subtitle:function(){return"CallFuncN + RepeatForever"}}),ActionRotateToRepeat=
ActionsDemo.extend({onEnter:function(){this._super();this.centerSprites(2);var a=cc.RotateTo.create(1,90),b=cc.RotateTo.create(1,0),b=cc.Sequence.create(a,b,null),a=cc.RepeatForever.create(b),b=cc.Repeat.create(b.copy(),10);this._tamara.runAction(a);this._kathia.runAction(b)},subtitle:function(){return"Repeat/RepeatForever + RotateTo"}}),ActionRotateJerk=ActionsDemo.extend({onEnter:function(){this._super();this.centerSprites(2);var a=cc.Sequence.create(cc.RotateTo.create(0.5,-20),cc.RotateTo.create(0.5,
20),null),b=cc.Repeat.create(a,10),a=cc.RepeatForever.create(a.copy());this._tamara.runAction(b);this._kathia.runAction(a)},subtitle:function(){return"RepeatForever / Repeat + Rotate"}}),ActionReverse=ActionsDemo.extend({onEnter:function(){this._super();this.alignSpritesLeft(1);var a=cc.JumpBy.create(2,cc.PointMake(300,0),50,4);this._grossini.runAction(cc.Sequence.create(a,a.reverse(),null))},subtitle:function(){return"Reverse an action"}}),ActionDelayTime=ActionsDemo.extend({onEnter:function(){this._super();
this.alignSpritesLeft(1);var a=cc.MoveBy.create(1,cc.PointMake(150,0));this._grossini.runAction(cc.Sequence.create(a,cc.DelayTime.create(2),a,null))},subtitle:function(){return"DelayTime: m + delay + m"}}),ActionReverseSequence=ActionsDemo.extend({onEnter:function(){this._super();this.alignSpritesLeft(1);var a=cc.MoveBy.create(1,cc.PointMake(250,0)),b=cc.MoveBy.create(1,cc.PointMake(0,50)),a=cc.Sequence.create(a,b,a.reverse(),null);this._grossini.runAction(cc.Sequence.create(a,a.reverse(),null))},
subtitle:function(){return"Reverse a sequence"}}),ActionReverseSequence2=ActionsDemo.extend({onEnter:function(){this._super();this.alignSpritesLeft(2);var a=cc.MoveBy.create(3,cc.PointMake(250,0)),b=cc.MoveBy.create(3,cc.PointMake(0,50)),c=new cc.ToggleVisibility,d=new cc.ToggleVisibility,a=cc.Sequence.create(a,c,b,d,a.reverse(),null);this._kathia.runAction(cc.Repeat.create(cc.Sequence.create(a,a.reverse(),null),3));a=cc.MoveBy.create(1,cc.PointMake(100,0));b=cc.MoveBy.create(1,cc.PointMake(50,0));
c=new cc.Hide;a=cc.Sequence.create(a,c,b,null);b=a.reverse();this._tamara.runAction(cc.Sequence.create(a,b,null))},subtitle:function(){return"Reverse sequence 2"}}),ActionRepeat=ActionsDemo.extend({onEnter:function(){this._super();this.alignSpritesLeft(2);var a=cc.MoveBy.create(1,cc.PointMake(150,0)),b=cc.Repeat.create(cc.Sequence.create(cc.Place.create(cc.PointMake(60,60)),a,null),3),a=cc.RepeatForever.create(cc.Sequence.create(a.copy(),a.reverse(),null));this._kathia.runAction(b);this._tamara.runAction(a)},
subtitle:function(){return"Repeat / RepeatForever actions"}}),ActionOrbit=ActionsDemo.extend({onEnter:function(){this._super();this.centerSprites(3);var a=cc.OrbitCamera.create(2,1,0,0,180,0,0),a=cc.Sequence.create(a,a.reverse(),null),b=cc.OrbitCamera.create(2,1,0,0,180,-45,0),b=cc.Sequence.create(b,b.reverse(),null),c=cc.OrbitCamera.create(2,1,0,0,180,90,0),c=cc.Sequence.create(c,c.reverse(),null);this._kathia.runAction(cc.RepeatForever.create(a));this._tamara.runAction(cc.RepeatForever.create(b));
this._grossini.runAction(cc.RepeatForever.create(c));a=cc.MoveBy.create(3,cc.PointMake(100,-100));b=a.reverse();a=cc.Sequence.create(a,b,null);a=cc.RepeatForever.create(a);this._kathia.runAction(a);this._tamara.runAction(a.copy());this._grossini.runAction(a.copy())},subtitle:function(){return"OrbitCamera action"}}),ActionFollow=ActionsDemo.extend({onEnter:function(){this._super();this.centerSprites(1);var a=cc.Director.sharedDirector().getWinSize();this._grossini.setPosition(cc.PointMake(-200,a.height/
2));var b=cc.MoveBy.create(2,cc.PointMake(3*a.width,0)),c=b.reverse(),b=cc.Sequence.create(b,c,null);this._grossini.runAction(cc.RepeatForever.create(b));this.runAction(cc.Follow.create(this._grossini,cc.RectMake(0,0,2*a.width-100,a.height)))},subtitle:function(){return"Follow action"}});var TAG_TILE_MAP=1,TileMapTests=[function(){return new TMXOrthoTest},function(){return new TMXOrthoTest2},function(){return new TMXOrthoTest3},function(){return new TMXOrthoTest4},function(){return new TMXReadWriteTest},function(){return new TMXHexTest},function(){return new TMXIsoTest},function(){return new TMXIsoTest1},function(){return new TMXIsoTest2},function(){return new TMXUncompressedTest},function(){return new TMXTilesetTest},function(){return new TMXOrthoObjectsTest},function(){return new TMXIsoObjectsTest},
function(){return new TMXResizeTest},function(){return new TMXIsoZorder},function(){return new TMXOrthoZorder},function(){return new TMXIsoMoveLayer},function(){return new TMXOrthoMoveLayer},function(){return new TMXBug987},function(){return new TMXBug787}],tileMapIdx=-1;function nextTileMapAction(){++tileMapIdx;tileMapIdx%=TileMapTests.length;return TileMapTests[tileMapIdx]()}
function backTileMapAction(){--tileMapIdx;0>tileMapIdx&&(tileMapIdx+=TileMapTests.length);return TileMapTests[tileMapIdx]()}function restartTileMapAction(){return TileMapTests[tileMapIdx]()}
var TileMapTestScene=TestScene.extend({runThisTest:function(){tileMapIdx=-1;this.addChild(nextTileMapAction());cc.Director.sharedDirector().replaceScene(this)}}),TileDemo=cc.Layer.extend({ctor:function(){this.setIsTouchEnabled(!0)},title:function(){return"No title"},subtitle:function(){return"drag the screen"},onEnter:function(){this._super();var a=cc.Director.sharedDirector().getWinSize(),b=this.title(),b=cc.LabelTTF.create(b,"Arial",28);this.addChild(b,1);b.setPosition(cc.PointMake(a.width/2,a.height-
50));if(b=this.subtitle())b=cc.LabelTTF.create(b,"Thonburi",16),this.addChild(b,1),b.setPosition(cc.PointMake(a.width/2,a.height-80));var b=cc.MenuItemImage.create(s_pathB1,s_pathB2,this,this.backCallback),c=cc.MenuItemImage.create(s_pathR1,s_pathR2,this,this.restartCallback),d=cc.MenuItemImage.create(s_pathF1,s_pathF2,this,this.nextCallback),e=cc.Menu.create(b,c,d,null);e.setPosition(cc.PointZero());b.setPosition(cc.PointMake(a.width/2-100,30));c.setPosition(cc.PointMake(a.width/2,30));d.setPosition(cc.PointMake(a.width/
2+100,30));this.addChild(e,1)},restartCallback:function(){var a=new TileMapTestScene;a.addChild(restartTileMapAction());cc.Director.sharedDirector().replaceScene(a)},nextCallback:function(){var a=new TileMapTestScene;a.addChild(nextTileMapAction());cc.Director.sharedDirector().replaceScene(a)},backCallback:function(){var a=new TileMapTestScene;a.addChild(backTileMapAction());cc.Director.sharedDirector().replaceScene(a)},registerWithTouchDispatcher:function(){cc.TouchDispatcher.sharedDispatcher().addTargetedDelegate(this,
0,!0)},ccTouchBegan:function(){return!0},ccTouchEnded:function(){this.prevLocation=null},ccTouchCancelled:function(){},prevLocation:null,ccTouchMoved:function(a){a=a.locationInView(a.view());if(this.prevLocation){var b=this.getChildByTag(TAG_TILE_MAP),c=cc.ccpSub(a,this.prevLocation),d=b.getPosition(),c=cc.ccpAdd(d,c);b.setPosition(c)}this.prevLocation=cc.ccp(a.x,a.y)}}),TileMapTest=TileDemo.extend({ctor:function(){this._super();var a=cc.TileMapAtlas.create(s_tilesPng,s_levelMapTga,16,16);a.getTexture().setAntiAliasTexParameters();
a.getContentSize();a.releaseMap();this.addChild(a,0,TAG_TILE_MAP);a.setAnchorPoint(cc.ccp(0,0.5));var b=cc.ScaleBy.create(4,0.8),c=b.reverse(),b=cc.Sequence.create(b,c,null);a.runAction(cc.RepeatForever.create(b))},title:function(){return"TileMapAtlas"}}),TileMapEditTest=TileDemo.extend({ctor:function(){this._super();var a=cc.TileMapAtlas.create(s_tilesPng,s_levelMapTga,16,16);a.getTexture().setAliasTexParameters();a.getContentSize();this.schedule(this.updateMap,0.2);this.addChild(a,0,TAG_TILE_MAP);
a.setAnchorPoint(cc.ccp(0,0));a.setPosition(cc.ccp(-20,-200))},title:function(){return"Editable TileMapAtlas"},updateMap:function(){var a=this.getChildByTag(TAG_TILE_MAP),b=a.tileAt(cc.ccg(13,21));b.r++;b.r%=50;0==b.r&&(b.r=1);a.setTile(b,cc.ccg(13,21))}}),TMXOrthoTest=TileDemo.extend({ctor:function(){this._super();var a=cc.TMXTiledMap.create("Resources/TileMaps/orthogonal-test1.tmx");this.addChild(a,0,TAG_TILE_MAP);for(var b=a.getChildren(),c=0;c<b.length&&b[c];c++);a.runAction(cc.ScaleBy.create(2,
0.5))},title:function(){return"TMX Ortho test2"}}),TMXOrthoTest2=TileDemo.extend({ctor:function(){this._super();var a=cc.TMXTiledMap.create("Resources/TileMaps/orthogonal-test2.tmx");this.addChild(a,0,TAG_TILE_MAP);a.getContentSize();for(var b=a.getChildren(),c=null,d=0,e=b.length;d<e&&!(c=b[d],!c);d++);a.getCamera().getEyeXYZ(void 0,void 0,void 0);a.getCamera().setEyeXYZ(NaN,void 0,NaN)},title:function(){return"TMX Orthogonal test"},onEnter:function(){this._super();cc.Director.sharedDirector().setProjection(cc.DIRECTOR_PROJECTION_3D)},
onExit:function(){this._super();cc.Director.sharedDirector().setProjection(cc.DIRECTOR_PROJECTION_2D)}}),TMXOrthoTest3=TileDemo.extend({ctor:function(){this._super();var a=cc.TMXTiledMap.create("Resources/TileMaps/orthogonal-test3.tmx");this.addChild(a,0,TAG_TILE_MAP);a.getContentSize();for(var b=a.getChildren(),c=null,d=0,e=b.length;d<e&&!(c=b[d],!c);d++);a.setScale(0.2);a.setAnchorPoint(cc.ccp(0.5,0.5))},title:function(){return"TMX anchorPoint test"}}),TMXOrthoTest4=TileDemo.extend({ctor:function(){this._super();
var a=cc.TMXTiledMap.create("Resources/TileMaps/orthogonal-test4.tmx");this.addChild(a,0,TAG_TILE_MAP);for(var b=a.getChildren(),c=null,d=0,e=b.length;d<e&&!(c=b[d],!c);d++);a.setAnchorPoint(cc.ccp(0,0));a=a.layerNamed("Layer 0");b=a.getLayerSize();c=a.tileAt(cc.ccp(0,0));c.setScale(2);c=a.tileAt(cc.ccp(b.width-1,0));c.setScale(2);c=a.tileAt(cc.ccp(0,b.height-1));c.setScale(2);c=a.tileAt(cc.ccp(b.width-1,b.height-1));c.setScale(2);this.schedule(this.removeSprite,2)},removeSprite:function(){this.unschedule(this.removeSprite);
var a=this.getChildByTag(TAG_TILE_MAP).layerNamed("Layer 0"),b=a.getLayerSize(),b=a.tileAt(cc.ccp(b.width-1,0));a.removeChild(b,!0)},title:function(){return"TMX width/height test"}}),TMXReadWriteTest=TileDemo.extend({gid:0,ctor:function(){this._super();var a=cc.TMXTiledMap.create("Resources/TileMaps/orthogonal-test2.tmx");this.addChild(a,0,TAG_TILE_MAP);a.getContentSize();var b=a.layerNamed("Layer 0");a.setScale(1);var a=b.tileAt(cc.ccp(1,63)),c=b.tileAt(cc.ccp(2,63)),d=b.tileAt(cc.ccp(3,62)),e=b.tileAt(cc.ccp(2,
62));a.setAnchorPoint(cc.ccp(0.5,0.5));c.setAnchorPoint(cc.ccp(0.5,0.5));d.setAnchorPoint(cc.ccp(0.5,0.5));e.setAnchorPoint(cc.ccp(0.5,0.5));var f=cc.MoveBy.create(0.5,cc.ccp(0,160)),g=cc.RotateBy.create(2,360),h=cc.ScaleBy.create(2,5),i=cc.FadeOut.create(2),j=cc.FadeIn.create(2),k=cc.ScaleTo.create(1,1),l=cc.CallFunc.create(this,this.removeSprite),f=cc.Sequence.create(f,g,h,i,j,k,l,null);a.runAction(f);c.runAction(f.copy());d.runAction(f.copy());e.runAction(f.copy());this.gid=b.tileGIDAt(cc.ccp(0,
63));this.schedule(this.updateCol,2);this.schedule(this.repaintWithGID,2);this.schedule(this.removeTiles,1);this.gid2=0},removeSprite:function(a){var b=a.getParent();b&&b.removeChild(a,!0)},updateCol:function(){for(var a=this.getChildByTag(TAG_TILE_MAP).getChildByTag(0),b=a.getLayerSize(),c=0;c<b.height;c++)a.setTileGID(this.gid2,cc.ccp(3,c));this.gid2=(this.gid2+1)%80},repaintWithGID:function(){for(var a=this.getChildByTag(TAG_TILE_MAP).getChildByTag(0),b=a.getLayerSize(),c=0;c<b.width;c++){var d=
b.height-1,e=a.tileGIDAt(cc.ccp(c,d));a.setTileGID(e+1,cc.ccp(c,d))}},removeTiles:function(){this.unschedule(this.removeTiles);for(var a=this.getChildByTag(TAG_TILE_MAP).getChildByTag(0),b=a.getLayerSize(),c=0;c<b.height;c++)a.removeTileAt(cc.ccp(5,c))},title:function(){return"TMX Read/Write test"}}),TMXHexTest=TileDemo.extend({ctor:function(){this._super();this.addChild(cc.LayerColor.create(cc.ccc4(64,64,64,255)),-1);this.addChild(cc.TMXTiledMap.create("Resources/TileMaps/hexa-test.tmx"),0,TAG_TILE_MAP)},
title:function(){return"TMX Hex test"}}),TMXIsoTest=TileDemo.extend({ctor:function(){this._super();this.addChild(cc.LayerColor.create(cc.ccc4(64,64,64,255)),-1);var a=cc.TMXTiledMap.create("Resources/TileMaps/iso-test.tmx");this.addChild(a,0,TAG_TILE_MAP);var b=a.getMapSize(),c=a.getTileSize();a.runAction(cc.MoveTo.create(1,cc.ccp(-b.width*c.width/2,-b.height*c.height/2)))},title:function(){return"TMX Isometric test 0"}}),TMXIsoTest1=TileDemo.extend({ctor:function(){this._super();this.addChild(cc.LayerColor.create(cc.ccc4(64,
64,64,255)),-1);var a=cc.TMXTiledMap.create("Resources/TileMaps/iso-test1.tmx");this.addChild(a,0,TAG_TILE_MAP);a.getContentSize();a.setAnchorPoint(cc.ccp(0.5,0.5))},title:function(){return"TMX Isometric test + anchorPoint"}}),TMXIsoTest2=TileDemo.extend({ctor:function(){this._super();this.addChild(cc.LayerColor.create(cc.ccc4(64,64,64,255)),-1);var a=cc.TMXTiledMap.create("Resources/TileMaps/iso-test2.tmx");this.addChild(a,0,TAG_TILE_MAP);a.getContentSize();var b=a.getMapSize(),c=a.getTileSize();
a.runAction(cc.MoveTo.create(1,cc.ccp(-b.width*c.width/2,-b.height*c.height/2)))},title:function(){return"TMX Isometric test 2"}}),TMXUncompressedTest=TileDemo.extend({ctor:function(){this._super();this.addChild(cc.LayerColor.create(cc.ccc4(64,64,64,255)),-1);var a=cc.TMXTiledMap.create("Resources/TileMaps/iso-test2-uncompressed.tmx");this.addChild(a,0,TAG_TILE_MAP);a.getContentSize();var b=a.getMapSize(),c=a.getTileSize();a.runAction(cc.MoveTo.create(1,cc.ccp(-b.width*c.width/2,-b.height*c.height/
2)));for(var a=a.getChildren(),b=null,c=0,d=a.length;c<d;c++){b=a[c];if(!b)break;b.releaseMap()}},title:function(){return"TMX Uncompressed test"}}),TMXTilesetTest=TileDemo.extend({ctor:function(){this._super();var a=cc.TMXTiledMap.create("Resources/TileMaps/orthogonal-test5.tmx");this.addChild(a,0,TAG_TILE_MAP);a.getContentSize()},title:function(){return"TMX Tileset test"}}),TMXOrthoObjectsTest=TileDemo.extend({ctor:function(){this._super();var a=cc.TMXTiledMap.create("Resources/TileMaps/ortho-objects.tmx");
this.addChild(a,-1,TAG_TILE_MAP);a.getContentSize();for(var a=a.objectGroupNamed("Object Group 1").getObjects(),b=0;b<a.length&&a[b];b++);},draw:function(){for(var a=this.getChildByTag(TAG_TILE_MAP).objectGroupNamed("Object Group 1").getObjects(),b=0;b<a.length;b++){var c=a[b];if(!c)break;var d=parseInt(c.x),e=parseInt(c.y),f=parseInt(c.width),c=parseInt(c.height);cc.renderContext.lineWidth=3;cc.renderContext.strokeStyle="#ffffff";cc.drawingUtil.drawLine(cc.ccp(d,e),cc.ccp(d+f,e));cc.drawingUtil.drawLine(cc.ccp(d+
f,e),cc.ccp(d+f,e+c));cc.drawingUtil.drawLine(cc.ccp(d+f,e+c),cc.ccp(d,e+c));cc.drawingUtil.drawLine(cc.ccp(d,e+c),cc.ccp(d,e));cc.renderContext.lineWidth=1}},title:function(){return"TMX Ortho object test"},subtitle:function(){return"You should see a white box around the 3 platforms"}}),TMXIsoObjectsTest=TileDemo.extend({ctor:function(){this._super();var a=cc.TMXTiledMap.create("Resources/TileMaps/iso-test-objectgroup.tmx");this.addChild(a,-1,TAG_TILE_MAP);a.getContentSize();for(var a=a.objectGroupNamed("Object Group 1").getObjects(),
b,c=0,d=a.length;c<d&&!(b=a[c],!b);c++);},title:function(){return"TMX Iso object test"},draw:function(){for(var a=this.getChildByTag(TAG_TILE_MAP).objectGroupNamed("Object Group 1").getObjects(),b,c=0,d=a.length;c<d;c++){b=a[c];if(!b)break;var e=parseInt(b.x),f=parseInt(b.y),g=parseInt(b.width);b=parseInt(b.height);cc.renderContext.lineWidth=3;cc.renderContext.strokeStyle="#ffffff";cc.drawingUtil.drawLine(cc.ccp(e,f),cc.ccp(e+g,f));cc.drawingUtil.drawLine(cc.ccp(e+g,f),cc.ccp(e+g,f+b));cc.drawingUtil.drawLine(cc.ccp(e+
g,f+b),cc.ccp(e,f+b));cc.drawingUtil.drawLine(cc.ccp(e,f+b),cc.ccp(e,f));cc.renderContext.lineWidth=1}},subtitle:function(){return"You need to parse them manually. See bug #810"}}),TMXResizeTest=TileDemo.extend({ctor:function(){this._super();var a=cc.TMXTiledMap.create("Resources/TileMaps/orthogonal-test5.tmx");this.addChild(a,0,TAG_TILE_MAP);a.getContentSize();for(var a=a.layerNamed("Layer 0"),b=a.getLayerSize(),c=0;c<b.height;c++)for(var d=0;d<b.width;d++)a.setTileGID(1,cc.ccp(d,c))},title:function(){return"TMX resize test"},
subtitle:function(){return"Should not crash. Testing issue #740"}}),TMXIsoZorder=TileDemo.extend({tamara:null,ctor:function(){this._super();var a=cc.TMXTiledMap.create("Resources/TileMaps/iso-test-zorder.tmx");this.addChild(a,0,TAG_TILE_MAP);var b=a.getContentSize();a.setPosition(cc.ccp(-b.width/2,0));this.tamara=cc.Sprite.create(s_pathSister1);a.addChild(this.tamara,a.getChildren().length);a=a.getMapSize().width*a.getTileSize().width;this.tamara.setPositionInPixels(cc.ccp(a/2,0));this.tamara.setAnchorPoint(cc.ccp(0.5,
0));a=cc.MoveBy.create(10,cc.ccpMult(cc.ccp(300,250),1/cc.CONTENT_SCALE_FACTOR()));b=a.reverse();a=cc.Sequence.create(a,b,null);this.tamara.runAction(cc.RepeatForever.create(a));this.schedule(this.repositionSprite)},title:function(){return"TMX Iso Zorder"},subtitle:function(){return"Sprite should hide behind the trees"},onExit:function(){this.unschedule(this.repositionSprite);this._super()},repositionSprite:function(){var a=this.tamara.getPositionInPixels(),b=this.getChildByTag(TAG_TILE_MAP),a=4-
a.y/48,a=Math.max(a,0);b.reorderChild(this.tamara,a)}}),TMXOrthoZorder=TileDemo.extend({tamara:null,ctor:function(){this._super();var a=cc.TMXTiledMap.create("Resources/TileMaps/orthogonal-test-zorder.tmx");this.addChild(a,0,TAG_TILE_MAP);a.getContentSize();this.tamara=cc.Sprite.create(s_pathSister1);a.addChild(this.tamara,a.getChildren().length,TAG_TILE_MAP);this.tamara.setAnchorPoint(cc.ccp(0.5,0));var a=cc.MoveBy.create(10,cc.ccpMult(cc.ccp(400,450),1/cc.CONTENT_SCALE_FACTOR())),b=a.reverse(),
a=cc.Sequence.create(a,b,null);this.tamara.runAction(cc.RepeatForever.create(a));this.schedule(this.repositionSprite)},title:function(){return"TMX Ortho Zorder"},subtitle:function(){return"Sprite should hide behind the trees"},repositionSprite:function(){var a=this.tamara.getPositionInPixels(),b=this.getChildByTag(TAG_TILE_MAP),a=4-(a.y-10)/81,a=Math.max(a,0);b.reorderChild(this.tamara,a)}}),TMXIsoVertexZ=TileDemo.extend({tamara:null,tamara1:null,ctor:function(){this._super();var a=cc.TMXTiledMap.create("Resources/TileMaps/iso-test-vertexz.tmx");
this.addChild(a,0,TAG_TILE_MAP);var b=a.getContentSize();a.setPosition(cc.ccp(-b.width/2,0));this.tamara=a.layerNamed("Trees").tileAt(cc.ccp(29,29));a=cc.MoveBy.create(10,cc.ccpMult(cc.ccp(300,250),1/cc.CONTENT_SCALE_FACTOR()));b=a.reverse();a=cc.Sequence.create(a,b,null);this.tamara.runAction(cc.RepeatForever.create(a));this.schedule(this.repositionSprite)},title:function(){return"TMX Iso VertexZ"},subtitle:function(){return"Sprite should hide behind the trees"},onEnter:function(){this._super();
cc.Director.sharedDirector().setProjection(cc.CCDIRECTOR_PROJECTION_2D)},onExit:function(){this._super()},repositionSprite:function(){this.tamara.setVertexZ(-((this.tamara.getPositionInPixels().y+32)/16))}}),TMXOrthoVertexZ=TileDemo.extend({tamara:null,ctor:function(){this._super();var a=cc.TMXTiledMap.create("Resources/TileMaps/orthogonal-test-vertexz.tmx");this.addChild(a,0,TAG_TILE_MAP);a.getContentSize();this.tamara=a.layerNamed("trees").tileAt(cc.ccp(0,11));cc.Log("vertexZ: "+this.tamara.getVertexZ());
var a=cc.MoveBy.create(10,cc.ccpMult(cc.ccp(400,450),1/cc.CONTENT_SCALE_FACTOR())),b=a.reverse(),a=cc.Sequence.create(a,b,null);this.tamara.runAction(cc.RepeatForever.create(a));this.schedule(this.repositionSprite)},title:function(){return"TMX Ortho vertexZ"},subtitle:function(){return"Sprite should hide behind the trees"},onEnter:function(){this._super();cc.Director.sharedDirector().setProjection(cc.CCDIRECTOR_PROJECTION_2D)},onExit:function(){this._super()},repositionSprite:function(){this.tamara.setVertexZ(-((this.tamara.getPositionInPixels().y+
32)/16))}}),TMXIsoMoveLayer=TileDemo.extend({ctor:function(){this._super();var a=cc.TMXTiledMap.create("Resources/TileMaps/iso-test-movelayer.tmx");this.addChild(a,0,TAG_TILE_MAP);a.setPosition(cc.ccp(-700,-50));a.getContentSize()},title:function(){return"TMX Iso Move Layer"},subtitle:function(){return"Trees should be horizontally aligned"}}),TMXOrthoMoveLayer=TileDemo.extend({ctor:function(){this._super();var a=cc.TMXTiledMap.create("Resources/TileMaps/orthogonal-test-movelayer.tmx");this.addChild(a,
0,TAG_TILE_MAP);a.getContentSize()},title:function(){return"TMX Ortho Move Layer"},subtitle:function(){return"Trees should be horizontally aligned"}}),TMXBug987=TileDemo.extend({ctor:function(){this._super();var a=cc.TMXTiledMap.create("Resources/TileMaps/orthogonal-test6.tmx");this.addChild(a,0,TAG_TILE_MAP);var b=a.getContentSize();cc.Log("ContentSize:"+b.width+","+b.height);for(var b=a.getChildren(),c=null,d=0,e=b.length;d<e&&!(c=b[d],!c);d++);a.setAnchorPoint(cc.ccp(0,0));a.layerNamed("Tile Layer 1").setTileGID(3,
cc.ccp(2,2))},title:function(){return"TMX Bug 987"},subtitle:function(){return"You should see an square"}}),TMXBug787=TileDemo.extend({ctor:function(){this._super();var a=cc.TMXTiledMap.create("Resources/TileMaps/iso-test-bug787.tmx");this.addChild(a,0,TAG_TILE_MAP);a.setScale(0.25)},title:function(){return"TMX Bug 787"},subtitle:function(){return"You should see a map"}}),TMXGIDObjectsTest=TileDemo.extend({ctor:function(){this._super();var a=cc.TMXTiledMap.create("Resources/TileMaps/test-object-layer.tmx");
this.addChild(a,-1,TAG_TILE_MAP);a=a.getContentSize();cc.Log("ContentSize:"+a.width+","+a.height);cc.Log("---. Iterating over all the group objets")},title:function(){return"TMX GID objects"},subtitle:function(){return"Tiles are created from an object group"},draw:function(){for(var a=this.getChildByTag(TAG_TILE_MAP).objectGroupNamed("Object Layer 1").getObjects(),b,c=0,d=a.length;c<d;c++){b=a[c];if(!b)break;var e="x",f=parseInt(b[e]),e="y",g=parseInt(b[e]),e="width",h=parseInt(b[e]),e="height";b=
parseInt(b[e]);cc.renderContext.lineWidth=3;cc.renderContext.strokeStyle="#ffffff";cc.drawingUtil.drawLine(cc.ccp(f,g),cc.ccp(f+h,g));cc.drawingUtil.drawLine(cc.ccp(f+h,g),cc.ccp(f+h,g+b));cc.drawingUtil.drawLine(cc.ccp(f+h,g+b),cc.ccp(f,g+b));cc.drawingUtil.drawLine(cc.ccp(f,g+b),cc.ccp(f,g));cc.renderContext.lineWidth=1}}});TRANSITION_DURATION=1.2;
var TransitionsTests=[{title:"JumpZoomTransition",transitionFunc:function(a,b){return new JumpZoomTransition(a,b)}},{title:"FadeTransition",transitionFunc:function(a,b){return new FadeTransition(a,b)}},{title:"FadeWhiteTransition",transitionFunc:function(a,b){return new FadeWhiteTransition(a,b)}},{title:"ShrinkGrowTransition",transitionFunc:function(a,b){return new ShrinkGrowTransition(a,b)}},{title:"RotoZoomTransition",transitionFunc:function(a,b){return new RotoZoomTransition(a,b)}},{title:"MoveInLTransition",
transitionFunc:function(a,b){return new MoveInLTransition(a,b)}},{title:"MoveInRTransition",transitionFunc:function(a,b){return new MoveInRTransition(a,b)}},{title:"MoveInTTransition",transitionFunc:function(a,b){return new MoveInTTransition(a,b)}},{title:"MoveInBTransition",transitionFunc:function(a,b){return new MoveInBTransition(a,b)}},{title:"SlideInLTransition",transitionFunc:function(a,b){return new SlideInLTransition(a,b)}},{title:"SlideInRTransition",transitionFunc:function(a,b){return new SlideInRTransition(a,
b)}},{title:"SlideInTTransition",transitionFunc:function(a,b){return new SlideInTTransition(a,b)}},{title:"SlideInBTransition",transitionFunc:function(a,b){return new SlideInBTransition(a,b)}}],transitionsIdx=0;function nextTransitionAction(a,b){++transitionsIdx;transitionsIdx%=TransitionsTests.length;return TransitionsTests[transitionsIdx].transitionFunc(a,b)}
function backTransitionAction(a,b){--transitionsIdx;0>transitionsIdx&&(transitionsIdx+=TransitionsTests.length);return TransitionsTests[transitionsIdx].transitionFunc(a,b)}function restartTransitionAction(a,b){return TransitionsTests[transitionsIdx].transitionFunc(a,b)}
var TransitionsTestScene=TestScene.extend({runThisTest:function(){this.addChild(new TestLayer1);cc.Director.sharedDirector().replaceScene(this)}}),TestLayer1=cc.Layer.extend({ctor:function(){this._super();var a,b,c=cc.Director.sharedDirector().getWinSize();a=c.width;b=c.height;var d=cc.Sprite.create(s_back1);d.setPosition(cc.PointMake(c.width/2,c.height/2));d.setScale(1.7);this.addChild(d,-1);d=cc.LabelTTF.create(TransitionsTests[transitionsIdx].title,"Thonburi",32);this.addChild(d);d.setColor(cc.ccc3(255,
32,32));d.setPosition(cc.PointMake(a/2,b-100));d=cc.LabelTTF.create("SCENE 1","Marker Felt",38);d.setColor(cc.ccc3(16,16,255));d.setPosition(cc.PointMake(a/2,b/2));this.addChild(d);a=cc.MenuItemImage.create(s_pathB1,s_pathB2,this,this.backCallback);b=cc.MenuItemImage.create(s_pathR1,s_pathR2,this,this.restartCallback);var d=cc.MenuItemImage.create(s_pathF1,s_pathF2,this,this.nextCallback),e=cc.Menu.create(a,b,d,null);e.setPosition(cc.PointZero());a.setPosition(cc.PointMake(c.width/2-100,30));b.setPosition(cc.PointMake(c.width/
2,30));d.setPosition(cc.PointMake(c.width/2+100,30));this.addChild(e,1);this.schedule(this.step,1)},restartCallback:function(){var a=new TransitionsTestScene,b=new TestLayer2;a.addChild(b);(a=restartTransitionAction(TRANSITION_DURATION,a))&&cc.Director.sharedDirector().replaceScene(a)},nextCallback:function(){var a=new TransitionsTestScene,b=new TestLayer2;a.addChild(b);(a=nextTransitionAction(TRANSITION_DURATION,a))&&cc.Director.sharedDirector().replaceScene(a)},backCallback:function(){var a=new TransitionsTestScene,
b=new TestLayer2;a.addChild(b);(a=backTransitionAction(TRANSITION_DURATION,a))&&cc.Director.sharedDirector().replaceScene(a)},step:function(){}}),TestLayer2=cc.Layer.extend({ctor:function(){this._super();var a,b,c=cc.Director.sharedDirector().getWinSize();a=c.width;b=c.height;var d=cc.Sprite.create(s_back2);d.setPosition(cc.PointMake(c.width/2,c.height/2));d.setScale(1.7);this.addChild(d,-1);c=cc.LabelTTF.create(TransitionsTests[transitionsIdx].title,"Thonburi",32);this.addChild(c);c.setColor(cc.ccc3(255,
32,32));c.setPosition(cc.PointMake(a/2,b-100));c=cc.LabelTTF.create("SCENE 2","Marker Felt",38);c.setColor(cc.ccc3(16,16,255));c.setPosition(cc.PointMake(a/2,b/2));this.addChild(c);b=cc.MenuItemImage.create(s_pathB1,s_pathB2,this,this.backCallback);var c=cc.MenuItemImage.create(s_pathR1,s_pathR2,this,this.restartCallback),d=cc.MenuItemImage.create(s_pathF1,s_pathF2,this,this.nextCallback),e=cc.Menu.create(b,c,d,null);e.setPosition(cc.PointZero());b.setPosition(cc.PointMake(a/2-100,30));c.setPosition(cc.PointMake(a/
2,30));d.setPosition(cc.PointMake(a/2+100,30));this.addChild(e,1);this.schedule(this.step,1)},restartCallback:function(){var a=new TransitionsTestScene,b=new TestLayer1;a.addChild(b);(a=restartTransitionAction(TRANSITION_DURATION,a))&&cc.Director.sharedDirector().replaceScene(a)},nextCallback:function(){var a=new TransitionsTestScene,b=new TestLayer1;a.addChild(b);(a=nextTransitionAction(TRANSITION_DURATION,a))&&cc.Director.sharedDirector().replaceScene(a)},backCallback:function(){var a=new TransitionsTestScene,
b=new TestLayer1;a.addChild(b);(a=backTransitionAction(TRANSITION_DURATION,a))&&cc.Director.sharedDirector().replaceScene(a)},step:function(){}}),JumpZoomTransition=function(a,b){return cc.TransitionJumpZoom.create(a,b)},FadeTransition=function(a,b){return cc.TransitionFade.create(a,b)},FadeWhiteTransition=function(a,b){return cc.TransitionFade.create(a,b,cc.WHITE())},FlipXLeftOver=function(a,b){return cc.TransitionFlipX.create(a,b,cc.ORIENTATION_LEFT_OVER)},FlipXRightOver=function(a,b){return cc.TransitionFlipX.create(a,
b,cc.ORIENTATION_RIGHT_OVER)},FlipYUpOver=function(a,b){return cc.TransitionFlipY.create(a,b,cc.ORIENTATION_UP_OVER)},FlipYDownOver=function(a,b){return cc.TransitionFlipY.create(a,b,cc.ORIENTATION_DOWN_OVER)},FlipAngularLeftOver=function(a,b){return cc.TransitionFlipAngular.create(a,b,cc.ORIENTATION_LEFT_OVER)},FlipAngularRightOver=function(a,b){return cc.TransitionFlipAngular.create(a,b,cc.ORIENTATION_RIGHT_OVER)},ZoomFlipXLeftOver=function(a,b){return cc.TransitionZoomFlipX.create(a,b,cc.ORIENTATION_LEFT_OVER)},
ZoomFlipXRightOver=function(a,b){return cc.TransitionZoomFlipX.create(a,b,cc.ORIENTATION_RIGHT_OVER)},ZoomFlipYUpOver=function(a,b){return cc.TransitionZoomFlipY.create(a,b,cc.ORIENTATION_UP_OVER)},ZoomFlipYDownOver=function(a,b){return cc.TransitionZoomFlipY.create(a,b,cc.ORIENTATION_DOWN_OVER)},ZoomFlipAngularLeftOver=function(a,b){return cc.TransitionZoomFlipAngular.create(a,b,cc.ORIENTATION_LEFT_OVER)},ZoomFlipAngularRightOver=function(a,b){return cc.TransitionZoomFlipAngular.create(a,b,cc.ORIENTATION_RIGHT_OVER)},
ShrinkGrowTransition=function(a,b){return cc.TransitionShrinkGrow.create(a,b)},RotoZoomTransition=function(a,b){return cc.TransitionRotoZoom.create(a,b)},MoveInLTransition=function(a,b){return cc.TransitionMoveInL.create(a,b)},MoveInRTransition=function(a,b){return cc.TransitionMoveInR.create(a,b)},MoveInTTransition=function(a,b){return cc.TransitionMoveInT.create(a,b)},MoveInBTransition=function(a,b){return cc.TransitionMoveInB.create(a,b)},SlideInLTransition=function(a,b){return cc.TransitionSlideInL.create(a,
b)},SlideInRTransition=function(a,b){return cc.TransitionSlideInR.create(a,b)},SlideInTTransition=function(a,b){return cc.TransitionSlideInT.create(a,b)},SlideInBTransition=function(a,b){return cc.TransitionSlideInB.create(a,b)},CCTransitionCrossFade=function(a,b){return cc.TransitionCrossFade.create(a,b)},CCTransitionRadialCCW=function(a,b){return cc.TransitionRadialCCW.create(a,b)},CCTransitionRadialCW=function(a,b){return cc.TransitionRadialCW.create(a,b)},PageTransitionForward=function(a,b){cc.Director.sharedDirector().setDepthTest(!0);
return cc.TransitionPageTurn.create(a,b,!1)},PageTransitionBackward=function(a,b){cc.Director.sharedDirector().setDepthTest(!0);return cc.TransitionPageTurn.create(a,b,!0)},FadeTRTransition=function(a,b){return cc.TransitionFadeTR.create(a,b)},FadeBLTransition=function(a,b){return cc.TransitionFadeBL.create(a,b)},FadeUpTransition=function(a,b){return cc.TransitionFadeUp.create(a,b)},FadeDownTransition=function(a,b){return cc.TransitionFadeDown.create(a,b)},TurnOffTilesTransition=function(a,b){return cc.TransitionTurnOffTiles.create(a,
b)},SplitRowsTransition=function(a,b){return cc.TransitionSplitRows.create(a,b)},SplitColsTransition=function(a,b){return cc.TransitionSplitCols.create(a,b)};var DrawPrimitivesTest=cc.Layer.extend({ctor:function(){},draw:function(){this._super();var a=cc.Director.sharedDirector().getWinSize();cc.renderContext.fillStyle="rgba(255,255,255,1)";cc.renderContext.strokeStyle="rgba(255,255,255,1)";cc.drawingUtil.drawLine(cc.PointMake(0,0),cc.PointMake(a.width,a.height));cc.renderContext.strokeStyle="rgba(255,0,0,1)";cc.renderContext.lineWidth="5";cc.drawingUtil.drawLine(cc.PointMake(0,a.height),cc.PointMake(a.width,0));cc.renderContext.fillStyle="rgba(0,0,255,0.5)";
cc.drawingUtil.drawPoint(cc.PointMake(a.width/2,a.height/2),40);var b=[cc.PointMake(60,60),cc.PointMake(70,70),cc.PointMake(60,70),cc.PointMake(70,60)];cc.renderContext.fillStyle="rgba(0,255,255,1)";cc.drawingUtil.drawPoints(b,4,4);cc.renderContext.lineWidth="16";cc.renderContext.strokeStyle="rgba(0,255,0,1)";cc.drawingUtil.drawCircle(cc.PointMake(a.width/2,a.height/2),100,0,10,!1);cc.renderContext.lineWidth="2";cc.renderContext.strokeStyle="rgba(0,255,255,1)";cc.drawingUtil.drawCircle(cc.PointMake(a.width/
2,a.height/2),50,cc.DEGREES_TO_RADIANS(90),50,!0);cc.renderContext.strokeStyle="rgba(255,255,0,1)";cc.renderContext.lineWidth="10";b=[cc.PointMake(0,0),cc.PointMake(50,50),cc.PointMake(100,50),cc.PointMake(100,100),cc.PointMake(50,100)];cc.drawingUtil.drawPoly(b,5,!1);cc.renderContext.strokeStyle="rgba(255,0,255,1)";cc.renderContext.lineWidth="2";b=[cc.PointMake(30,130),cc.PointMake(30,230),cc.PointMake(50,200)];cc.drawingUtil.drawPoly(b,3,!0);cc.drawingUtil.drawQuadBezier(cc.PointMake(0,a.height),
cc.PointMake(a.width/2,a.height/2),cc.PointMake(a.width,a.height),50);cc.drawingUtil.drawCubicBezier(cc.PointMake(a.width/2,a.height/2),cc.PointMake(a.width/2+30,a.height/2+50),cc.PointMake(a.width/2+60,a.height/2-50),cc.PointMake(a.width,a.height/2),100);cc.renderContext.lineWidth="1";cc.renderContext.fillStyle="rgba(255,255,255,1)";cc.renderContext.strokeStyle="rgba(255,255,255,1)"}}),DrawPrimitivesTestScene=TestScene.extend({runThisTest:function(){this.addChild(new DrawPrimitivesTest);cc.Director.sharedDirector().replaceScene(this)}});var TAG_LABEL_ATLAS=1,sceneIdx=-1,MAX_LAYER=33,ParticleTestScene=TestScene.extend({runThisTest:function(){sceneIdx=-1;MAX_LAYER=15;this.addChild(nextParticleAction());cc.Director.sharedDirector().replaceScene(this)}}),IDC_NEXT=100,IDC_BACK=101,IDC_RESTART=102,IDC_TOGGLE=103,createParticleLayer=function(a){switch(a){case 0:return new DemoFlower;case 1:return new DemoGalaxy;case 2:return new DemoFirework;case 3:return new DemoSpiral;case 4:return new DemoSun;case 5:return new DemoMeteor;case 6:return new DemoFire;
case 7:return new Issue704;case 8:return new DemoExplosion;case 9:return new DemoSnow;case 10:return new DemoRain;case 11:return new DemoBigFlower;case 12:return new DemoRotFlower;case 13:return new DemoModernArt;case 14:return new DemoRing;case 15:return new ParallaxParticle;case 16:return new DemoParticleFromFile("BoilingFoam");case 17:return new DemoParticleFromFile("BurstPipe");case 18:return new DemoParticleFromFile("Comet");case 19:return new DemoParticleFromFile("debian");case 20:return new DemoParticleFromFile("ExplodingRing");
case 21:return new DemoParticleFromFile("LavaFlow");case 22:return new DemoParticleFromFile("SpinningPeas");case 23:return new DemoParticleFromFile("SpookyPeas");case 24:return new DemoParticleFromFile("Upsidedown");case 25:return new DemoParticleFromFile("Flower");case 26:return new DemoParticleFromFile("Spiral");case 27:return new DemoParticleFromFile("Galaxy");case 28:return new RadiusMode1;case 29:return new RadiusMode2;case 30:return new Issue704;case 31:return new Issue870;case 32:return new DemoParticleFromFile("Phoenix")}return null},
nextParticleAction=function(){sceneIdx++;sceneIdx%=MAX_LAYER;return createParticleLayer(sceneIdx)},backParticleAction=function(){sceneIdx--;0>sceneIdx&&(sceneIdx+=MAX_LAYER);return createParticleLayer(sceneIdx)},restartParticleAction=function(){return createParticleLayer(sceneIdx)},ParticleDemo=cc.LayerColor.extend({_emitter:null,_background:null,_shapeModeButton:null,_textureModeButton:null,ctor:function(){this._super();this.initWithColor(cc.ccc4(127,127,127,255));this._emitter=null;this.setIsTouchEnabled(!0);
var a=cc.Director.sharedDirector().getWinSize(),b=cc.LabelTTF.create(this.title(),"Arial",28);this.addChild(b,100,1E3);b.setPosition(cc.PointMake(a.width/2,a.height-50));b=cc.LabelTTF.create("(Tap the Screen)","Arial",20);b.setPosition(cc.PointMake(a.width/2,a.height-80));this.addChild(b,100);var c=this,b=cc.MenuItemImage.create(s_pathB1,s_pathB2,this,this.backCallback),d=cc.MenuItemImage.create(s_pathR1,s_pathR2,this,function(){c._emitter.resetSystem()}),e=cc.MenuItemImage.create(s_pathF1,s_pathF2,
this,this.nextCallback),f=cc.Sprite.create(s_MovementMenuItem,cc.RectMake(0,46,123,23)),g=cc.Sprite.create(s_MovementMenuItem,cc.RectMake(0,23,123,23)),h=cc.Sprite.create(s_MovementMenuItem,cc.RectMake(0,0,123,23)),i=cc.Sprite.create(s_MovementMenuItem,cc.RectMake(123,46,138,23)),j=cc.Sprite.create(s_MovementMenuItem,cc.RectMake(123,23,138,23)),k=cc.Sprite.create(s_MovementMenuItem,cc.RectMake(123,0,138,23)),l=cc.Sprite.create(s_MovementMenuItem,cc.RectMake(261,46,136,23)),m=cc.Sprite.create(s_MovementMenuItem,
cc.RectMake(261,23,136,23)),n=cc.Sprite.create(s_MovementMenuItem,cc.RectMake(261,0,136,23));this._freeMovementButton=cc.MenuItemSprite.create(f,g,h,this,function(){c._emitter.setPositionType(cc.CCPARTICLE_TYPE_RELATIVE);c._relativeMovementButton.setIsVisible(!0);c._freeMovementButton.setIsVisible(!1);c._groupMovementButton.setIsVisible(!1)});this._freeMovementButton.setPosition(new cc.Point(10,150));this._freeMovementButton.setAnchorPoint(cc.PointMake(0,0));this._relativeMovementButton=cc.MenuItemSprite.create(i,
j,k,this,function(){c._emitter.setPositionType(cc.CCPARTICLE_TYPE_GROUPED);c._relativeMovementButton.setIsVisible(!1);c._freeMovementButton.setIsVisible(!1);c._groupMovementButton.setIsVisible(!0)});this._relativeMovementButton.setIsVisible(!1);this._relativeMovementButton.setPosition(new cc.Point(10,150));this._relativeMovementButton.setAnchorPoint(cc.PointMake(0,0));this._groupMovementButton=cc.MenuItemSprite.create(l,m,n,this,function(){c._emitter.setPositionType(cc.CCPARTICLE_TYPE_FREE);c._relativeMovementButton.setIsVisible(!1);
c._freeMovementButton.setIsVisible(!0);c._groupMovementButton.setIsVisible(!1)});this._groupMovementButton.setIsVisible(!1);this._groupMovementButton.setPosition(new cc.Point(10,150));this._groupMovementButton.setAnchorPoint(cc.PointMake(0,0));f=cc.Sprite.create(s_shapeModeMenuItem,cc.RectMake(0,46,115,23));g=cc.Sprite.create(s_shapeModeMenuItem,cc.RectMake(0,23,115,23));h=cc.Sprite.create(s_shapeModeMenuItem,cc.RectMake(0,0,115,23));this._shapeModeButton=cc.MenuItemSprite.create(f,g,h,this,function(){c._emitter.setDrawMode(cc.PARTICLE_TEXTURE_MODE);
c._textureModeButton.setIsVisible(!0);c._shapeModeButton.setIsVisible(!1)});this._shapeModeButton.setPosition(new cc.Point(10,100));this._shapeModeButton.setAnchorPoint(cc.PointMake(0,0));f=cc.Sprite.create(s_textureModeMenuItem,cc.RectMake(0,46,115,23));g=cc.Sprite.create(s_textureModeMenuItem,cc.RectMake(0,23,115,23));h=cc.Sprite.create(s_textureModeMenuItem,cc.RectMake(0,0,115,23));this._textureModeButton=cc.MenuItemSprite.create(f,g,h,this,function(){c._emitter.setDrawMode(cc.PARTICLE_SHAPE_MODE);
c._textureModeButton.setIsVisible(!1);c._shapeModeButton.setIsVisible(!0)});this._textureModeButton.setIsVisible(!1);this._textureModeButton.setPosition(new cc.Point(10,100));this._textureModeButton.setAnchorPoint(cc.PointMake(0,0));f=cc.Menu.create(b,d,e,this._shapeModeButton,this._textureModeButton,this._freeMovementButton,this._relativeMovementButton,this._groupMovementButton);f.setPosition(cc.PointZero());b.setPosition(cc.PointMake(a.width/2-100,30));d.setPosition(cc.PointMake(a.width/2,30));
e.setPosition(cc.PointMake(a.width/2+100,30));this.addChild(f,100);b=cc.LabelTTF.create("0000","Arial",24);this.addChild(b,100,TAG_LABEL_ATLAS);b.setPosition(cc.PointMake(a.width-66,50));this._background=cc.Sprite.create(s_back3);this.addChild(this._background,5);this._background.setPosition(cc.PointMake(a.width/2,a.height-180));a=cc.MoveBy.create(4,cc.PointMake(300,0));b=a.reverse();a=cc.Sequence.create(a,b,null);this._background.runAction(cc.RepeatForever.create(a));this.schedule(this.step)},onEnter:function(){this._super();
this.getChildByTag(1E3).setString(this.title())},title:function(){return"No title"},restartCallback:function(){this._emitter.resetSystem()},nextCallback:function(){var a=new ParticleTestScene;a.addChild(nextParticleAction());cc.Director.sharedDirector().replaceScene(a)},backCallback:function(){var a=new ParticleTestScene;a.addChild(backParticleAction());cc.Director.sharedDirector().replaceScene(a)},toggleCallback:function(){this._emitter.getPositionType()==cc.CCPARTICLE_TYPE_GROUPED?this._emitter.setPositionType(cc.CCPARTICLE_TYPE_FREE):
this._emitter.getPositionType()==cc.CCPARTICLE_TYPE_FREE?this._emitter.setPositionType(cc.CCPARTICLE_TYPE_RELATIVE):this._emitter.getPositionType()==cc.CCPARTICLE_TYPE_RELATIVE&&this._emitter.setPositionType(cc.CCPARTICLE_TYPE_GROUPED)},registerWithTouchDispatcher:function(){cc.TouchDispatcher.sharedDispatcher().addTargetedDelegate(this,0,!1)},ccTouchBegan:function(){return!0},ccTouchMoved:function(a,b){return this.ccTouchEnded(a,b)},ccTouchEnded:function(a){var a=a.locationInView(a.view()),b=cc.PointZero();
this._background&&(b=this._background.convertToWorldSpace(cc.PointZero()));this._emitter.setPosition(cc.ccpSub(a,b))},step:function(){this._emitter&&this.getChildByTag(TAG_LABEL_ATLAS).setString(this._emitter.getParticleCount().toFixed(0))},setEmitterPosition:function(){var a=cc.Director.sharedDirector().getWinSize();this._emitter.setPosition(cc.PointMake(a.width/2,a.height/2))}}),DemoFirework=ParticleDemo.extend({onEnter:function(){this._super();this._emitter=cc.ParticleFireworks.create();this._background.addChild(this._emitter,
10);this._emitter.setTexture(cc.TextureCache.sharedTextureCache().addImage(s_stars1));this._emitter.setShapeType(cc.PARTICLE_STAR_SHAPE);this.setEmitterPosition()},title:function(){return"ParticleFireworks"}}),DemoFire=ParticleDemo.extend({onEnter:function(){this._super();this._emitter=cc.ParticleFire.create();this._background.addChild(this._emitter,10);this._emitter.setTexture(cc.TextureCache.sharedTextureCache().addImage(s_fire));this._emitter.setShapeType(cc.PARTICLE_BALL_SHAPE);var a=this._emitter.getPosition();
this._emitter.setPosition(cc.PointMake(a.x,100));this.setEmitterPosition()},title:function(){return"ParticleFire"}}),DemoSun=ParticleDemo.extend({onEnter:function(){this._super();this._emitter=cc.ParticleSun.create();this._background.addChild(this._emitter,10);this._emitter.setTexture(cc.TextureCache.sharedTextureCache().addImage(s_fire));this._emitter.setShapeType(cc.PARTICLE_BALL_SHAPE);this.setEmitterPosition()},title:function(){return"ParticleSun"}}),DemoGalaxy=ParticleDemo.extend({onEnter:function(){this._super();
this._emitter=cc.ParticleGalaxy.create();this._background.addChild(this._emitter,10);this._emitter.setTexture(cc.TextureCache.sharedTextureCache().addImage(s_fire));this._emitter.setShapeType(cc.PARTICLE_BALL_SHAPE);this.setEmitterPosition()},title:function(){return"ParticleGalaxy"}}),DemoFlower=ParticleDemo.extend({ctor:function(){this._super()},onEnter:function(){this._super();this._emitter=cc.ParticleFlower.create();this._background.addChild(this._emitter,10);this._emitter.setTexture(cc.TextureCache.sharedTextureCache().addImage(s_stars1));
this._emitter.setShapeType(cc.PARTICLE_STAR_SHAPE);this.setEmitterPosition()},title:function(){return"ParticleFlower"}}),DemoBigFlower=ParticleDemo.extend({onEnter:function(){this._super();this._emitter=new cc.ParticleSystemQuad;this._emitter.initWithTotalParticles(50);this._background.addChild(this._emitter,10);this._emitter.setTexture(cc.TextureCache.sharedTextureCache().addImage(s_stars1));this._emitter.setShapeType(cc.PARTICLE_STAR_SHAPE);this._emitter.setDuration(-1);this._emitter.setGravity(cc.PointZero());
this._emitter.setAngle(90);this._emitter.setAngleVar(360);this._emitter.setSpeed(160);this._emitter.setSpeedVar(20);this._emitter.setRadialAccel(-120);this._emitter.setRadialAccelVar(0);this._emitter.setTangentialAccel(30);this._emitter.setTangentialAccelVar(0);this._emitter.setPosition(cc.PointMake(160,240));this._emitter.setPosVar(cc.PointZero());this._emitter.setLife(4);this._emitter.setLifeVar(1);this._emitter.setStartSpin(0);this._emitter.setStartSizeVar(0);this._emitter.setEndSpin(0);this._emitter.setEndSpinVar(0);
this._emitter.setStartColor(new cc.Color4F(0.5,0.5,0.5,1));this._emitter.setStartColorVar(new cc.Color4F(0.5,0.5,0.5,1));this._emitter.setEndColor(new cc.Color4F(0.1,0.1,0.1,0.2));this._emitter.setEndColorVar(new cc.Color4F(0.1,0.1,0.1,0.2));this._emitter.setStartSize(80);this._emitter.setStartSizeVar(40);this._emitter.setEndSize(cc.PARTICLE_START_SIZE_EQUAL_TO_END_SIZE);this._emitter.setEmissionRate(this._emitter.getTotalParticles()/this._emitter.getLife());this._emitter.setIsBlendAdditive(!0);this.setEmitterPosition()},
title:function(){return"ParticleBigFlower"}}),DemoRotFlower=ParticleDemo.extend({onEnter:function(){this._super();this._emitter=new cc.ParticleSystemQuad;this._emitter.initWithTotalParticles(150);this._background.addChild(this._emitter,10);this._emitter.setTexture(cc.TextureCache.sharedTextureCache().addImage(s_stars2));this._emitter.setShapeType(cc.PARTICLE_STAR_SHAPE);this._emitter.setDuration(-1);this._emitter.setGravity(cc.PointZero());this._emitter.setAngle(90);this._emitter.setAngleVar(360);
this._emitter.setSpeed(160);this._emitter.setSpeedVar(20);this._emitter.setRadialAccel(-120);this._emitter.setRadialAccelVar(0);this._emitter.setTangentialAccel(30);this._emitter.setTangentialAccelVar(0);this._emitter.setPosition(cc.PointMake(160,240));this._emitter.setPosVar(cc.PointZero());this._emitter.setLife(3);this._emitter.setLifeVar(1);this._emitter.setStartSpin(0);this._emitter.setStartSpinVar(0);this._emitter.setEndSpin(0);this._emitter.setEndSpinVar(2E3);this._emitter.setStartColor(new cc.Color4F(0.5,
0.5,0.5,1));this._emitter.setStartColorVar(new cc.Color4F(0.5,0.5,0.5,1));this._emitter.setEndColor(new cc.Color4F(0.1,0.1,0.1,0.2));this._emitter.setEndColorVar(new cc.Color4F(0.1,0.1,0.1,0.2));this._emitter.setStartSize(30);this._emitter.setStartSizeVar(0);this._emitter.setEndSize(cc.PARTICLE_START_SIZE_EQUAL_TO_END_SIZE);this._emitter.setEmissionRate(this._emitter.getTotalParticles()/this._emitter.getLife());this._emitter.setIsBlendAdditive(!1);this.setEmitterPosition()},title:function(){return"ParticleRotFlower"}}),
DemoMeteor=ParticleDemo.extend({onEnter:function(){this._super();this._emitter=cc.ParticleMeteor.create();this._background.addChild(this._emitter,10);this._emitter.setTexture(cc.TextureCache.sharedTextureCache().addImage(s_fire));this._emitter.setShapeType(cc.PARTICLE_BALL_SHAPE);this.setEmitterPosition()},title:function(){return"ParticleMeteor"}}),DemoSpiral=ParticleDemo.extend({onEnter:function(){this._super();this._emitter=cc.ParticleSpiral.create();this._background.addChild(this._emitter,10);
this._emitter.setTexture(cc.TextureCache.sharedTextureCache().addImage(s_fire));this._emitter.setShapeType(cc.PARTICLE_BALL_SHAPE);this.setEmitterPosition()},title:function(){return"ParticleSpiral"}}),DemoExplosion=ParticleDemo.extend({onEnter:function(){this._super();this._emitter=cc.ParticleExplosion.create();this._background.addChild(this._emitter,10);this._emitter.setTexture(cc.TextureCache.sharedTextureCache().addImage(s_stars1));this._emitter.setShapeType(cc.PARTICLE_STAR_SHAPE);this._emitter.setIsAutoRemoveOnFinish(!0);
this.setEmitterPosition()},title:function(){return"ParticleExplosion"}}),DemoSmoke=ParticleDemo.extend({onEnter:function(){this._super();this._emitter=cc.ParticleSmoke.create();this._background.addChild(this._emitter,10);this._emitter.setTexture(cc.TextureCache.sharedTextureCache().addImage(s_fire));var a=this._emitter.getPosition();this._emitter.setPosition(cc.PointMake(a.x,100));this.setEmitterPosition()},title:function(){return"ParticleSmoke"}}),DemoSnow=ParticleDemo.extend({onEnter:function(){this._super();
this._emitter=cc.ParticleSnow.create();this._background.addChild(this._emitter,10);var a=this._emitter.getPosition();this._emitter.setPosition(cc.PointMake(a.x,a.y-110));this._emitter.setLife(3);this._emitter.setLifeVar(1);this._emitter.setGravity(cc.PointMake(0,-10));this._emitter.setSpeed(130);this._emitter.setSpeedVar(30);a=this._emitter.getStartColor();a.r=0.9;a.g=0.9;a.b=0.9;this._emitter.setStartColor(a);a=this._emitter.getStartColorVar();a.b=0.1;this._emitter.setStartColorVar(a);this._emitter.setEmissionRate(this._emitter.getTotalParticles()/
this._emitter.getLife());this._emitter.setTexture(cc.TextureCache.sharedTextureCache().addImage(s_snow));this._emitter.setShapeType(cc.PARTICLE_STAR_SHAPE);this.setEmitterPosition()},title:function(){return"ParticleSnow"}}),DemoRain=ParticleDemo.extend({onEnter:function(){this._super();this._emitter=cc.ParticleRain.create();this._background.addChild(this._emitter,10);var a=this._emitter.getPosition();this._emitter.setPosition(cc.PointMake(a.x,a.y-100));this._emitter.setLife(4);this._emitter.setTexture(cc.TextureCache.sharedTextureCache().addImage(s_fire));
this._emitter.setShapeType(cc.PARTICLE_BALL_SHAPE);this.setEmitterPosition()},title:function(){return"ParticleRain"}}),DemoModernArt=ParticleDemo.extend({onEnter:function(){this._super();this._emitter=new cc.ParticleSystemQuad;this._emitter.initWithTotalParticles(200);this._background.addChild(this._emitter,10);var a=cc.Director.sharedDirector().getWinSize();this._emitter.setDuration(-1);this._emitter.setGravity(cc.PointMake(0,0));this._emitter.setAngle(0);this._emitter.setAngleVar(360);this._emitter.setRadialAccel(70);
this._emitter.setRadialAccelVar(10);this._emitter.setTangentialAccel(80);this._emitter.setTangentialAccelVar(0);this._emitter.setSpeed(50);this._emitter.setSpeedVar(10);this._emitter.setPosition(cc.PointMake(a.width/2,a.height/2));this._emitter.setPosVar(cc.PointZero());this._emitter.setLife(2);this._emitter.setLifeVar(0.3);this._emitter.setEmissionRate(this._emitter.getTotalParticles()/this._emitter.getLife());this._emitter.setStartColor(new cc.Color4F(0.5,0.5,0.5,1));this._emitter.setStartColorVar(new cc.Color4F(0.5,
0.5,0.5,1));this._emitter.setEndColor(new cc.Color4F(0.1,0.1,0.1,0.2));this._emitter.setEndColorVar(new cc.Color4F(0.1,0.1,0.1,0.2));this._emitter.setStartSize(1);this._emitter.setStartSizeVar(1);this._emitter.setEndSize(32);this._emitter.setEndSizeVar(8);this._emitter.setTexture(cc.TextureCache.sharedTextureCache().addImage(s_fire));this._emitter.setShapeType(cc.PARTICLE_BALL_SHAPE);this._emitter.setIsBlendAdditive(!1);this.setEmitterPosition()},title:function(){return"Varying size"}}),DemoRing=
ParticleDemo.extend({onEnter:function(){this._super();this._emitter=cc.ParticleFlower.create();this._background.addChild(this._emitter,10);this._emitter.setTexture(cc.TextureCache.sharedTextureCache().addImage(s_stars1));this._emitter.setShapeType(cc.PARTICLE_STAR_SHAPE);this._emitter.setLifeVar(0);this._emitter.setLife(10);this._emitter.setSpeed(100);this._emitter.setSpeedVar(0);this._emitter.setEmissionRate(1E4);this.setEmitterPosition()},title:function(){return"Ring Demo"}}),ParallaxParticle=ParticleDemo.extend({onEnter:function(){this._super();
this._background.getParent().removeChild(this._background,!0);this._background=null;var a=cc.ParallaxNode.create();this.addChild(a,5);var b=cc.Sprite.create(s_back3),c=cc.Sprite.create(s_back3);a.addChild(b,1,cc.PointMake(0.5,1),cc.PointMake(0,250));a.addChild(c,2,cc.PointMake(1.5,1),cc.PointMake(0,50));this._emitter=cc.ParticleFlower.create();this._emitter.setTexture(cc.TextureCache.sharedTextureCache().addImage(s_fire));b.addChild(this._emitter,10);this._emitter.setPosition(cc.PointMake(250,200));
b=cc.ParticleSun.create();c.addChild(b,10);b.setTexture(cc.TextureCache.sharedTextureCache().addImage(s_fire));c=cc.MoveBy.create(4,cc.PointMake(300,0));b=c.reverse();c=cc.Sequence.create(c,b,null);a.runAction(cc.RepeatForever.create(c))},title:function(){return"Parallax + Particles"}}),DemoParticleFromFile=ParticleDemo.extend({title:"",ctor:function(a){this._super();this.title=a},onEnter:function(){this._super();this.setColor(cc.BLACK());this.removeChild(this._background,!0);this._background=null;
this._emitter=new cc.ParticleSystemQuad;this._emitter.initWithFile("Resources/Images/"+this.title+".plist");this.addChild(this._emitter,10);this.setEmitterPosition()},title:function(){return this.title}}),RadiusMode1=ParticleDemo.extend({onEnter:function(){this._super();this.setColor(cc.BLACK());this.removeChild(this._background,!0);this._background=null;this._emitter=new cc.ParticleSystemQuad;this._emitter.initWithTotalParticles(150);this.addChild(this._emitter,10);this._emitter.setTexture(cc.TextureCache.sharedTextureCache().addImage(s_starsGrayscale));
this._emitter.setDuration(cc.CCPARTICLE_DURATION_INFINITY);this._emitter.setEmitterMode(cc.CCPARTICLE_MODE_RADIUS);this._emitter.setStartRadius(0);this._emitter.setStartRadiusVar(0);this._emitter.setEndRadius(160);this._emitter.setEndRadiusVar(0);this._emitter.setRotatePerSecond(180);this._emitter.setRotatePerSecondVar(0);this._emitter.setAngle(90);this._emitter.setAngleVar(0);var a=cc.Director.sharedDirector().getWinSize();this._emitter.setPosition(cc.ccp(a.width/2,a.height/2));this._emitter.setPosVar(cc.PointZero());
this._emitter.setLife(5);this._emitter.setLifeVar(0);this._emitter.setStartSpin(0);this._emitter.setStartSpinVar(0);this._emitter.setEndSpin(0);this._emitter.setEndSpinVar(0);this._emitter.setStartColor(new cc.Color4F(0.5,0.5,0.5,1));this._emitter.setStartColorVar(new cc.Color4F(0.5,0.5,0.5,1));this._emitter.setEndColor(new cc.Color4F(0.1,0.1,0.1,0.2));this._emitter.setEndColorVar(new cc.Color4F(0.1,0.1,0.1,0.2));this._emitter.setStartSize(32);this._emitter.setStartSizeVar(0);this._emitter.setEndSize(cc.CCPARTICLE_START_SIZE_EQUAL_TO_END_SIZE);
this._emitter.setEmissionRate(this._emitter.getTotalParticles()/this._emitter.getLife());this._emitter.setIsBlendAdditive(!1)},title:function(){return"Radius Mode: Spiral"}}),RadiusMode2=ParticleDemo.extend({onEnter:function(){this._super();this.setColor(cc.BLACK());this.removeChild(this._background,!0);this._background=null;this._emitter=new cc.ParticleSystemQuad;this._emitter.initWithTotalParticles(200);this.addChild(this._emitter,10);this._emitter.setTexture(cc.TextureCache.sharedTextureCache().addImage(s_starsGrayscale));
this._emitter.setDuration(cc.CCPARTICLE_DURATION_INFINITY);this._emitter.setEmitterMode(cc.CCPARTICLE_MODE_RADIUS);this._emitter.setStartRadius(100);this._emitter.setStartRadiusVar(0);this._emitter.setEndRadius(cc.CCPARTICLE_START_RADIUS_EQUAL_TO_END_RADIUS);this._emitter.setEndRadiusVar(0);this._emitter.setRotatePerSecond(45);this._emitter.setRotatePerSecondVar(0);this._emitter.setAngle(90);this._emitter.setAngleVar(0);var a=cc.Director.sharedDirector().getWinSize();this._emitter.setPosition(cc.ccp(a.width/
2,a.height/2));this._emitter.setPosVar(cc.PointZero());this._emitter.setLife(4);this._emitter.setLifeVar(0);this._emitter.setStartSpin(0);this._emitter.setStartSpinVar(0);this._emitter.setEndSpin(0);this._emitter.setEndSpinVar(0);this._emitter.setStartColor(new cc.Color4F(0.5,0.5,0.5,1));this._emitter.setStartColorVar(new cc.Color4F(0.5,0.5,0.5,1));this._emitter.setEndColor(new cc.Color4F(0.1,0.1,0.1,0.2));this._emitter.setEndColorVar(new cc.Color4F(0.1,0.1,0.1,0.2));this._emitter.setStartSize(32);
this._emitter.setStartSizeVar(0);this._emitter.setEndSize(cc.CCPARTICLE_START_SIZE_EQUAL_TO_END_SIZE);this._emitter.setEmissionRate(this._emitter.getTotalParticles()/this._emitter.getLife());this._emitter.setIsBlendAdditive(!1)},title:function(){return"Radius Mode: Semi Circle"}}),Issue704=ParticleDemo.extend({onEnter:function(){this._super();this.setColor(cc.BLACK());this.removeChild(this._background,!0);this._background=null;this._emitter=new cc.ParticleSystemQuad;this._emitter.initWithTotalParticles(100);
this.addChild(this._emitter,10);this._emitter.setTexture(cc.TextureCache.sharedTextureCache().addImage(s_fire));this._emitter.setShapeType(cc.PARTICLE_BALL_SHAPE);this._emitter.setDuration(cc.CCPARTICLE_DURATION_INFINITY);this._emitter.setStartRadius(50);this._emitter.setStartRadiusVar(0);this._emitter.setEndRadius(cc.CCPARTICLE_START_RADIUS_EQUAL_TO_END_RADIUS);this._emitter.setEndRadiusVar(0);this._emitter.setRotatePerSecond(0);this._emitter.setRotatePerSecondVar(0);this._emitter.setAngle(90);this._emitter.setAngleVar(0);
var a=cc.Director.sharedDirector().getWinSize();this._emitter.setPosition(cc.ccp(a.width/2,a.height/2));this._emitter.setPosVar(cc.PointZero());this._emitter.setLife(5);this._emitter.setLifeVar(0);this._emitter.setStartSpin(0);this._emitter.setStartSpinVar(0);this._emitter.setEndSpin(0);this._emitter.setEndSpinVar(0);this._emitter.setStartColor(new cc.Color4F(0.5,0.5,0.5,1));this._emitter.setStartColorVar(new cc.Color4F(0.5,0.5,0.5,1));this._emitter.setEndColor(new cc.Color4F(0.1,0.1,0.1,0.2));this._emitter.setEndColorVar(new cc.Color4F(0.1,
0.1,0.1,0.2));this._emitter.setStartSize(16);this._emitter.setStartSizeVar(0);this._emitter.setEndSize(cc.CCPARTICLE_START_SIZE_EQUAL_TO_END_SIZE);this._emitter.setEmissionRate(this._emitter.getTotalParticles()/this._emitter.getLife());this._emitter.setIsBlendAdditive(!1);a=cc.RotateBy.create(16,360);this._emitter.runAction(cc.RepeatForever.create(a))},title:function(){return"Issue 704. Free + Rot"},subtitle:function(){return"Emitted particles should not rotate"}}),Issue870=ParticleDemo.extend({_index:0,
onEnter:function(){this._super();this.setColor(cc.BLACK());this.removeChild(this._background,!0);this._background=null;var a=new cc.ParticleSystemQuad;a.initWithFile("Images/SpinningPeas.plist");a.setTextureWithRect(cc.TextureCache.sharedTextureCache().addImage("Images/particles.png"),cc.RectMake(0,0,32,32));this.addChild(a,10);this._emitter=a;this._index=0;this.schedule(this.updateQuads,2)},title:function(){return"Issue 870. SubRect"},subtitle:function(){return"Every 2 seconds the particle should change"},
updateQuads:function(){this._index=(this._index+1)%4;var a=cc.RectMake(32*this._index,0,32,32);this._emitter.setTextureWithRect(this._emitter.getTexture(),a)}});var sceneIdx_Progress=-1,MAX_LAYER_Progress=3,nextProgressAction=function(){sceneIdx_Progress++;sceneIdx_Progress%=MAX_LAYER_Progress;return createLayer(sceneIdx_Progress)},backProgressAction=function(){sceneIdx_Progress--;0>sceneIdx_Progress&&(sceneIdx_Progress+=MAX_LAYER_Progress);return createLayer(sceneIdx_Progress)},restartProgressAction=function(){return createLayer(sceneIdx_Progress)},createLayer=function(a){switch(a){case 0:return new SpriteProgressToRadial;case 1:return new SpriteProgressToHorizontal;
case 2:return new SpriteProgressToVertical}return null},SpriteDemo=cc.Layer.extend({ctor:function(){this._super()},title:function(){return"ProgressActionsTest"},subtitle:function(){return""},onEnter:function(){this._super();var a=cc.Director.sharedDirector().getWinSize(),b=cc.LabelTTF.create(this.title(),"Arial",18);this.addChild(b,1);b.setPosition(cc.PointMake(a.width/2,a.height-50));b=this.subtitle();""!=b&&(b=cc.LabelTTF.create(b,"Thonburi",22),this.addChild(b,1),b.setPosition(cc.PointMake(a.width/
2,a.height-80)));var b=cc.MenuItemImage.create(s_pathB1,s_pathB2,this,this.backCallback),c=cc.MenuItemImage.create(s_pathR1,s_pathR2,this,this.restartCallback),d=cc.MenuItemImage.create(s_pathF1,s_pathF2,this,this.nextCallback),e=cc.Menu.create(b,c,d);e.setPosition(cc.PointZero());b.setPosition(cc.PointMake(a.width/2-100,30));c.setPosition(cc.PointMake(a.width/2,30));d.setPosition(cc.PointMake(a.width/2+100,30));this.addChild(e,1)},restartCallback:function(){var a=new ProgressActionsTestScene;a.addChild(restartProgressAction());
cc.Director.sharedDirector().replaceScene(a)},nextCallback:function(){var a=new ProgressActionsTestScene;a.addChild(nextProgressAction());cc.Director.sharedDirector().replaceScene(a)},backCallback:function(){var a=new ProgressActionsTestScene;a.addChild(backProgressAction());cc.Director.sharedDirector().replaceScene(a)}}),SpriteProgressToRadial=SpriteDemo.extend({onEnter:function(){this._super();var a=cc.Director.sharedDirector().getWinSize(),b=cc.ProgressTo.create(2,100),c=cc.ProgressTo.create(2,
100),d=cc.ProgressTimer.create(s_pathSister1);d.setType(cc.CCPROGRESS_TIMER_TYPE_RADIAL_CW);this.addChild(d);d.setPosition(cc.PointMake(100,a.height/2));d.runAction(cc.RepeatForever.create(b));b=cc.ProgressTimer.create(s_pathBlock);b.setType(cc.CCPROGRESS_TIMER_RADIAL_CCW);this.addChild(b);b.setPosition(cc.PointMake(a.width-100,a.height/2));b.runAction(cc.RepeatForever.create(c))},subtitle:function(){return"ProgressTo Radial"}}),SpriteProgressToHorizontal=SpriteDemo.extend({onEnter:function(){this._super();
var a=cc.Director.sharedDirector().getWinSize(),b=cc.ProgressTo.create(2,100),c=cc.ProgressTo.create(2,100),d=cc.ProgressTimer.create(s_pathSister1);d.setType(cc.CCPROGRESS_TIMER_TYPE_HORIZONTATAL_BAR_LR);this.addChild(d);d.setPosition(cc.PointMake(100,a.height/2));d.runAction(cc.RepeatForever.create(b));b=cc.ProgressTimer.create(s_pathSister2);b.setType(cc.CCPROGRESS_TIMER_TYPE_HORIZONTATAL_BAR_RL);this.addChild(b);b.setPosition(cc.PointMake(a.width-100,a.height/2));b.runAction(cc.RepeatForever.create(c))},
subtitle:function(){return"ProgressTo Horizontal"}}),SpriteProgressToVertical=SpriteDemo.extend({onEnter:function(){this._super();var a=cc.Director.sharedDirector().getWinSize(),b=cc.ProgressTo.create(2,100),c=cc.ProgressTo.create(2,100),d=cc.ProgressTimer.create(s_pathSister1);d.setType(cc.CCPROGRESS_TIMER_TYPE_VERTICAL_BAR_BT);this.addChild(d);d.setPosition(cc.PointMake(100,a.height/2));d.runAction(cc.RepeatForever.create(b));b=cc.ProgressTimer.create(s_pathSister2);b.setType(cc.CCPROGRESS_TIMER_TYPE_VERTICAL_BAR_TB);
this.addChild(b);b.setPosition(cc.PointMake(a.width-100,a.height/2));b.runAction(cc.RepeatForever.create(c))},subtitle:function(){return"ProgressTo Vertical"}}),ProgressActionsTestScene=TestScene.extend({runThisTest:function(){sceneIdx_Progress=-1;MAX_LAYER_Progress=3;this.addChild(nextProgressAction());cc.Director.sharedDirector().replaceScene(this)}});cc.TAG_LAYER=1;var LayerTests=[function(){return new LayerTest1},function(){return new LayerTest2},function(){return new LayerTestBlend},function(){return new LayerGradient}],s_nLayerTestsIdx=-1;function nextLayerTestAction(){++s_nLayerTestsIdx;s_nLayerTestsIdx%=LayerTests.length;return LayerTests[s_nLayerTestsIdx]()}function backLayerTestAction(){--s_nLayerTestsIdx;0>s_nLayerTestsIdx&&(s_nLayerTestsIdx+=LayerTests.length);return LayerTests[s_nLayerTestsIdx]()}
function restartLayerTestAction(){return LayerTests[s_nLayerTestsIdx]()}
var LayerTestScene=TestScene.extend({runThisTest:function(){s_nLayerTestsIdx=-1;this.addChild(nextLayerTestAction());cc.Director.sharedDirector().replaceScene(this)}}),LayerTest=cc.Layer.extend({title:null,title:function(){return"No title"},subtitle:function(){return""},onEnter:function(){this._super();var a=cc.Director.sharedDirector().getWinSize(),b=cc.LabelTTF.create(this.title(),"Arial",32);this.addChild(b,1);b.setPosition(cc.PointMake(a.width/2,a.height-50));if(b=this.subtitle())b=cc.LabelTTF.create(b,
"Thonburi",16),this.addChild(b,1),b.setPosition(cc.ccp(a.width/2,a.height-80));var b=cc.MenuItemImage.create(s_pathB1,s_pathB2,this,this.backCallback),c=cc.MenuItemImage.create(s_pathR1,s_pathR2,this,this.restartCallback),d=cc.MenuItemImage.create(s_pathF1,s_pathF2,this,this.nextCallback),e=cc.Menu.create(b,c,d,null);e.setPosition(cc.PointZero());b.setPosition(cc.PointMake(a.width/2-100,30));c.setPosition(cc.PointMake(a.width/2,30));d.setPosition(cc.PointMake(a.width/2+100,30));this.addChild(e,1)},
restartCallback:function(){var a=new LayerTestScene;a.addChild(restartLayerTestAction());cc.Director.sharedDirector().replaceScene(a)},nextCallback:function(){var a=new LayerTestScene;a.addChild(nextLayerTestAction());cc.Director.sharedDirector().replaceScene(a)},backCallback:function(){var a=new LayerTestScene;a.addChild(backLayerTestAction());cc.Director.sharedDirector().replaceScene(a)}}),LayerTest1=LayerTest.extend({onEnter:function(){this._super();this.setIsTouchEnabled(!0);var a=cc.Director.sharedDirector().getWinSize(),
b=cc.LayerColor.create(cc.ccc4(255,0,0,128),200,200);b.setIsRelativeAnchorPoint(!0);b.setPosition(cc.PointMake(a.width/2,a.height/2));this.addChild(b,1,cc.TAG_LAYER)},title:function(){return"ColorLayer resize (tap & move)"},registerWithTouchDispatcher:function(){cc.TouchDispatcher.sharedDispatcher().addTargetedDelegate(this,cc.CCMENU_TOUCH_PRIORITY+1,!0)},updateSize:function(a){var a=a.locationInView(a.view()),a=cc.Director.sharedDirector().convertToGL(a),b=cc.Director.sharedDirector().getWinSize(),
a=cc.SizeMake(2*Math.abs(a.x-b.width/2),2*Math.abs(a.y-b.height/2));this.getChildByTag(cc.TAG_LAYER).setContentSize(a)},ccTouchBegan:function(a){this.updateSize(a);return!0},ccTouchMoved:function(a){this.updateSize(a)},ccTouchEnded:function(a){this.updateSize(a)}}),LayerTest2=LayerTest.extend({onEnter:function(){this._super();var a=cc.Director.sharedDirector().getWinSize(),b=cc.LayerColor.create(cc.ccc4(255,255,0,80),100,300);b.setPosition(cc.PointMake(a.width/3,a.height/2));b.setIsRelativeAnchorPoint(!0);
this.addChild(b,1);var c=cc.LayerColor.create(cc.ccc4(0,0,255,255),100,300);c.setPosition(cc.PointMake(2*(a.width/3),a.height/2));c.setIsRelativeAnchorPoint(!0);this.addChild(c,1);var a=cc.TintBy.create(2,-255,-127,0),d=a.reverse(),a=cc.Sequence.create(a,d,null);b.runAction(a);b=cc.FadeOut.create(2);a=b.reverse();b=cc.Sequence.create(b,a,null);c.runAction(b)},title:function(){return"ColorLayer: fade and tint"}}),LayerTestBlend=LayerTest.extend({ctor:function(){var a=cc.Director.sharedDirector().getWinSize(),
b=cc.LayerColor.create(cc.ccc4(255,255,255,80)),c=cc.Sprite.create(s_pathSister1),d=cc.Sprite.create(s_pathSister2);this.addChild(c);this.addChild(d);this.addChild(b,100,cc.TAG_LAYER);c.setPosition(cc.PointMake(160,a.height/2));d.setPosition(cc.PointMake(320,a.height/2));this.schedule(this.newBlend,1)},newBlend:function(){var a=this.getChildByTag(cc.TAG_LAYER),b,c;a.getBlendFunc().dst==cc.ZERO?(b=cc.BLEND_SRC,c=cc.BLEND_DST):(b=cc.ONE_MINUS_DST_COLOR,c=cc.ZERO);a.setBlendFunc({src:b,dst:c})},title:function(){return"ColorLayer: blend"}}),
LayerGradient=LayerTest.extend({ctor:function(){this.addChild(cc.LayerGradient.create(cc.ccc4(255,0,0,255),cc.ccc4(0,255,0,255),cc.ccp(0.9,0.9)),0,cc.TAG_LAYER);this.setIsTouchEnabled(!0)},prevLocation:null,registerWithTouchDispatcher:function(){cc.TouchDispatcher.sharedDispatcher().addTargetedDelegate(this,0,!0)},ccTouchBegan:function(){return!0},ccTouchEnded:function(){this.prevLocation=null},ccTouchCancelled:function(){},ccTouchMoved:function(a){var b=cc.Director.sharedDirector().getWinSize(),
a=a.locationInView(a.view()),b=cc.ccpSub(cc.ccp(b.width/2,b.height/2),a),b=cc.ccpNormalize(b);this.getChildByTag(1).setVector(b)},title:function(){return"LayerGradient"},subtitle:function(){return"Touch the screen and move your finger"},toggleItem:function(){var a=this.getChildByTag(cc.TAG_LAYER);a.setIsCompressedInterpolation(!a.getIsCompressedInterpolation())}});var MID_PUSHSCENE=100,MID_PUSHSCENETRAN=101,MID_QUIT=102,MID_REPLACESCENE=103,MID_REPLACESCENETRAN=104,MID_GOBACK=105;
SceneTestLayer1=cc.Layer.extend({ctor:function(){var a=cc.Director.sharedDirector().getWinSize(),b=cc.MenuItemFont.create("Test pushScene",this,this.onPushScene),c=cc.MenuItemFont.create("Test pushScene w/transition",this,this.onPushSceneTran),d=cc.MenuItemFont.create("Quit",this,function(){alert("quit")}),b=cc.Menu.create(b,c,d);b.alignItemsVertically();this.addChild(b);b=cc.Sprite.create(s_pathGrossini);this.addChild(b);b.setPosition(cc.PointMake(a.width-40,a.height/2));a=cc.RotateBy.create(2,360);
a=cc.RepeatForever.create(a);b.runAction(a);this._super()},onEnter:function(){cc.Log("SceneTestLayer1#onEnter");this._super()},onEnterTransitionDidFinish:function(){cc.Log("SceneTestLayer1#onEnterTransitionDidFinish");this._super()},testDealloc:function(){},onPushScene:function(){var a=new SceneTestScene,b=new SceneTestLayer2;a.addChild(b,0);cc.Director.sharedDirector().pushScene(a)},onPushSceneTran:function(){var a=new SceneTestScene,b=new SceneTestLayer2;a.addChild(b,0);cc.Director.sharedDirector().pushScene(cc.TransitionSlideInT.create(1,
a))},onQuit:function(){}});
SceneTestLayer2=cc.Layer.extend({timeCounter:0,ctor:function(){this.timeCounter=0;var a=cc.Director.sharedDirector().getWinSize(),b=cc.MenuItemFont.create("replaceScene",this,this.onReplaceScene),c=cc.MenuItemFont.create("replaceScene w/transition",this,this.onReplaceSceneTran),d=cc.MenuItemFont.create("Go Back",this,this.onGoBack),b=cc.Menu.create(b,c,d,null);b.alignItemsVertically();this.addChild(b);b=cc.Sprite.create(s_pathGrossini);this.addChild(b);b.setPosition(cc.PointMake(a.width-40,a.height/
2));a=cc.RotateBy.create(2,360);a=cc.RepeatForever.create(a);b.runAction(a);this._super()},testDealloc:function(){},onGoBack:function(){cc.Director.sharedDirector().popScene()},onReplaceScene:function(){var a=new SceneTestScene,b=new SceneTestLayer3;a.addChild(b,0);cc.Director.sharedDirector().replaceScene(a)},onReplaceSceneTran:function(){var a=new SceneTestScene,b=new SceneTestLayer3;a.addChild(b,0);cc.Director.sharedDirector().replaceScene(cc.TransitionSlideInT.create(2,a))}});
SceneTestLayer3=cc.LayerColor.extend({ctor:function(){this._super();this.setIsTouchEnabled(!0);var a=cc.LabelTTF.create("Touch to popScene","Arial",28);this.addChild(a);var b=cc.Director.sharedDirector().getWinSize();a.setPosition(cc.PointMake(b.width/2,b.height/2));a=cc.Sprite.create(s_pathGrossini);this.addChild(a);a.setPosition(cc.PointMake(b.width-40,b.height/2));b=cc.RotateBy.create(2,360);b=cc.RepeatForever.create(b);a.runAction(b)},testDealloc:function(){},ccTouchesEnded:function(){cc.Director.sharedDirector().popScene()}});
SceneTestScene=TestScene.extend({runThisTest:function(){this.addChild(new SceneTestLayer1);cc.Director.sharedDirector().replaceScene(this)}});var TextureCacheTest=cc.Layer.extend({_labelLoading:null,_labelPercent:null,_numberOfSprites:20,_numberOfLoadedSprites:0,ctor:function(){var a=cc.Director.sharedDirector().getWinSize();this._labelLoading=cc.LabelTTF.create("loading...","Arial",15);this._labelPercent=cc.LabelTTF.create("%0","Arial",15);this._labelLoading.setPosition(cc.PointMake(a.width/2,a.height/2-20));this._labelPercent.setPosition(cc.PointMake(a.width/2,a.height/2+20));this.addChild(this._labelLoading);this.addChild(this._labelPercent);
cc.TextureCache.sharedTextureCache().addImageAsync("Resources/Images/HelloWorld.png",this,this.loadingCallBack);cc.TextureCache.sharedTextureCache().addImageAsync("Resources/Images/grossini.png",this,this.loadingCallBack);cc.TextureCache.sharedTextureCache().addImageAsync("Resources/Images/grossini_dance_01.png",this,this.loadingCallBack);cc.TextureCache.sharedTextureCache().addImageAsync("Resources/Images/grossini_dance_02.png",this,this.loadingCallBack);cc.TextureCache.sharedTextureCache().addImageAsync("Resources/Images/grossini_dance_03.png",
this,this.loadingCallBack);cc.TextureCache.sharedTextureCache().addImageAsync("Resources/Images/grossini_dance_04.png",this,this.loadingCallBack);cc.TextureCache.sharedTextureCache().addImageAsync("Resources/Images/grossini_dance_05.png",this,this.loadingCallBack);cc.TextureCache.sharedTextureCache().addImageAsync("Resources/Images/grossini_dance_06.png",this,this.loadingCallBack);cc.TextureCache.sharedTextureCache().addImageAsync("Resources/Images/grossini_dance_07.png",this,this.loadingCallBack);
cc.TextureCache.sharedTextureCache().addImageAsync("Resources/Images/grossini_dance_08.png",this,this.loadingCallBack);cc.TextureCache.sharedTextureCache().addImageAsync("Resources/Images/grossini_dance_09.png",this,this.loadingCallBack);cc.TextureCache.sharedTextureCache().addImageAsync("Resources/Images/grossini_dance_10.png",this,this.loadingCallBack);cc.TextureCache.sharedTextureCache().addImageAsync("Resources/Images/grossini_dance_11.png",this,this.loadingCallBack);cc.TextureCache.sharedTextureCache().addImageAsync("Resources/Images/grossini_dance_12.png",
this,this.loadingCallBack);cc.TextureCache.sharedTextureCache().addImageAsync("Resources/Images/grossini_dance_13.png",this,this.loadingCallBack);cc.TextureCache.sharedTextureCache().addImageAsync("Resources/Images/grossini_dance_14.png",this,this.loadingCallBack);cc.TextureCache.sharedTextureCache().addImageAsync("Resources/Images/background1.png",this,this.loadingCallBack);cc.TextureCache.sharedTextureCache().addImageAsync("Resources/Images/background2.png",this,this.loadingCallBack);cc.TextureCache.sharedTextureCache().addImageAsync("Resources/Images/background3.png",
this,this.loadingCallBack);cc.TextureCache.sharedTextureCache().addImageAsync("Resources/Images/blocks.png",this,this.loadingCallBack)},addSprite:function(){var a=cc.Director.sharedDirector().getWinSize(),b=cc.Sprite.create("Resources/Images/HelloWorld.png");b.setPosition(cc.PointMake(a.width/2,a.height/2));var a=cc.Sprite.create("Resources/Images/grossini.png"),c=cc.Sprite.create("Resources/Images/grossini_dance_01.png"),d=cc.Sprite.create("Resources/Images/grossini_dance_02.png"),e=cc.Sprite.create("Resources/Images/grossini_dance_03.png"),
f=cc.Sprite.create("Resources/Images/grossini_dance_04.png"),g=cc.Sprite.create("Resources/Images/grossini_dance_05.png"),h=cc.Sprite.create("Resources/Images/grossini_dance_06.png"),i=cc.Sprite.create("Resources/Images/grossini_dance_07.png"),j=cc.Sprite.create("Resources/Images/grossini_dance_08.png"),k=cc.Sprite.create("Resources/Images/grossini_dance_09.png"),l=cc.Sprite.create("Resources/Images/grossini_dance_10.png"),m=cc.Sprite.create("Resources/Images/grossini_dance_11.png"),n=cc.Sprite.create("Resources/Images/grossini_dance_12.png"),
o=cc.Sprite.create("Resources/Images/grossini_dance_13.png"),p=cc.Sprite.create("Resources/Images/grossini_dance_14.png");cc.Sprite.create("Resources/Images/background1.png");cc.Sprite.create("Resources/Images/background2.png");cc.Sprite.create("Resources/Images/background3.png");cc.Sprite.create("Resources/Images/blocks.png");a.setPosition(cc.PointMake(50,50));c.setPosition(cc.PointMake(60,50));d.setPosition(cc.PointMake(70,50));e.setPosition(cc.PointMake(80,50));f.setPosition(cc.PointMake(90,50));
g.setPosition(cc.PointMake(100,50));h.setPosition(cc.PointMake(50,180));i.setPosition(cc.PointMake(60,180));j.setPosition(cc.PointMake(70,180));k.setPosition(cc.PointMake(80,180));l.setPosition(cc.PointMake(90,180));m.setPosition(cc.PointMake(100,180));n.setPosition(cc.PointMake(50,270));o.setPosition(cc.PointMake(60,270));p.setPosition(cc.PointMake(70,270));this.addChild(b);this.addChild(a);this.addChild(c);this.addChild(d);this.addChild(e);this.addChild(f);this.addChild(g);this.addChild(h);this.addChild(i);
this.addChild(j);this.addChild(k);this.addChild(l);this.addChild(m);this.addChild(n);this.addChild(o);this.addChild(p)},loadingCallBack:function(){++this._numberOfLoadedSprites;this._labelPercent=100*(this._numberOfLoadedSprites/this._numberOfSprites);this._numberOfLoadedSprites==this._numberOfSprites&&(this.removeChild(this._labelLoading,!0),this.removeChild(this._labelPercent,!0),this.addSprite())}}),TextureCacheTestScene=TestScene.extend({runThisTest:function(){this.addChild(new TextureCacheTest);
cc.Director.sharedDirector().replaceScene(this)}});var TAG_SPRITE_BATCH_NODE=TAG_TILE_MAP=1,TAG_NODE=2,TAG_ANIMATION1=1,TAG_SPRITE_LEFT=2,TAG_SPRITE_RIGHT=3,TAG_SPRITE1=0,TAG_SPRITE2=1,TAG_SPRITE3=2,TAG_SPRITE4=3,TAG_SPRITE5=4,TAG_SPRITE6=5,TAG_SPRITE7=6,TAG_SPRITE8=7,IDC_NEXT=100,IDC_BACK=101,IDC_RESTART=102,sceneIdx=-1,MAX_LAYER=48,nextSpriteTestAction=function(){sceneIdx++;sceneIdx%=MAX_LAYER;return createSpriteTestLayer(sceneIdx)},backSpriteTestAction=function(){sceneIdx--;0>sceneIdx&&(sceneIdx+=MAX_LAYER);return createSpriteTestLayer(sceneIdx)},
restartSpriteTestAction=function(){return createSpriteTestLayer(sceneIdx)},createSpriteTestLayer=function(a){switch(a){case 0:return new Sprite1;case 1:return new SpriteBatchNode1;case 2:return new SpriteFrameTest;case 3:return new SpriteFrameAliasNameTest;case 4:return new SpriteAnchorPoint;case 5:return new SpriteBatchNodeAnchorPoint;case 6:return new SpriteOffsetAnchorRotation;case 7:return new SpriteBatchNodeOffsetAnchorRotation;case 8:return new SpriteOffsetAnchorScale;case 9:return new SpriteBatchNodeOffsetAnchorScale;
case 10:return new SpriteAnimationSplit;case 11:return new SpriteColorOpacity;case 12:return new SpriteBatchNodeColorOpacity;case 13:return new SpriteZOrder;case 14:return new SpriteBatchNodeZOrder;case 15:return new SpriteBatchNodeReorder;case 16:return new SpriteBatchNodeReorderIssue744;case 17:return new SpriteBatchNodeReorderIssue766;case 18:return new SpriteBatchNodeReorderIssue767;case 19:return new SpriteZVertex;case 20:return new SpriteBatchNodeZVertex;case 21:return new Sprite6;case 22:return new SpriteFlip;
case 23:return new SpriteBatchNodeFlip;case 24:return new SpriteAliased;case 25:return new SpriteBatchNodeAliased;case 26:return new SpriteNewTexture;case 27:return new SpriteBatchNodeNewTexture;case 28:return new SpriteHybrid;case 29:return new SpriteBatchNodeChildren;case 30:return new SpriteBatchNodeChildren2;case 31:return new SpriteBatchNodeChildrenZ;case 32:return new SpriteChildrenVisibility;case 33:return new SpriteChildrenVisibilityIssue665;case 34:return new SpriteChildrenAnchorPoint;case 35:return new SpriteBatchNodeChildrenAnchorPoint;
case 36:return new SpriteBatchNodeChildrenScale;case 37:return new SpriteChildrenChildren;case 38:return new SpriteBatchNodeChildrenChildren;case 39:return new SpriteNilTexture;case 40:return new SpriteSubclass;case 41:return new AnimationCache;case 42:return new SpriteOffsetAnchorSkew;case 43:return new SpriteBatchNodeOffsetAnchorSkew;case 44:return new SpriteOffsetAnchorSkewScale;case 45:return new SpriteBatchNodeOffsetAnchorSkewScale;case 46:return new SpriteOffsetAnchorFlip;case 47:return new SpriteBatchNodeOffsetAnchorFlip}return null},
SpriteTestDemo=cc.Layer.extend({_title:"",ctor:function(){this._super()},title:function(){return"No title"},subtitle:function(){return""},onEnter:function(){this._super();var a=cc.Director.sharedDirector().getWinSize(),b=cc.LabelTTF.create(this.title(),"Arial",28);this.addChild(b,1);b.setPosition(cc.ccp(a.width/2,a.height-50));b=this.subtitle();""!=b&&(b=cc.LabelTTF.create(b,"Thonburi",16),this.addChild(b,1),b.setPosition(cc.ccp(a.width/2,a.height-80)));var b=cc.MenuItemImage.create(s_pathB1,s_pathB2,
this,this.backCallback),c=cc.MenuItemImage.create(s_pathR1,s_pathR2,this,this.restartCallback),d=cc.MenuItemImage.create(s_pathF1,s_pathF2,this,this.nextCallback),e=cc.Menu.create(b,c,d,null);e.setPosition(cc.PointZero());b.setPosition(cc.ccp(a.width/2-100,30));c.setPosition(cc.ccp(a.width/2,30));d.setPosition(cc.ccp(a.width/2+100,30));this.addChild(e,1)},restartCallback:function(){var a=new SpriteTestScene;a.addChild(restartSpriteTestAction());cc.Director.sharedDirector().replaceScene(a)},nextCallback:function(){var a=
new SpriteTestScene;a.addChild(nextSpriteTestAction());cc.Director.sharedDirector().replaceScene(a)},backCallback:function(){var a=new SpriteTestScene;a.addChild(backSpriteTestAction());cc.Director.sharedDirector().replaceScene(a)}}),Sprite1=SpriteTestDemo.extend({ctor:function(){this.setIsTouchEnabled(!0);var a=cc.Director.sharedDirector().getWinSize();this.addNewSpriteWithCoords(cc.ccp(a.width/2,a.height/2))},title:function(){return"Sprite (tap screen)"},addNewSpriteWithCoords:function(a){var b=
0|14*cc.RANDOM_0_1(),b=cc.Sprite.create(s_grossini_dance_atlas,cc.RectMake(85*(b%5),121*(0|b/5),85,121));this.addChild(b);b.setPosition(cc.ccp(a.x,a.y));var a=cc.RANDOM_0_1(),a=0.2>a?cc.ScaleBy.create(3,2):0.4>a?cc.RotateBy.create(3,360):0.6>a?cc.Blink.create(1,3):0.8>a?cc.TintBy.create(2,0,-255,-255):cc.FadeOut.create(2),c=a.reverse(),a=cc.Sequence.create(a,c,null);b.runAction(cc.RepeatForever.create(a))},ccTouchesEnded:function(a){for(var b=0;b<a.length;b++){var c=a[b];if(!c)break;this.addNewSpriteWithCoords(c.locationInView(c.view()))}}}),
SpriteBatchNode1=SpriteTestDemo.extend({ctor:function(){this.setIsTouchEnabled(!0);this.addChild(cc.SpriteBatchNode.create(s_grossini_dance_atlas,50),0,TAG_SPRITE_BATCH_NODE);var a=cc.Director.sharedDirector().getWinSize();this.addNewSpriteWithCoords(cc.ccp(a.width/2,a.height/2))},title:function(){return"SpriteBatchNode (tap screen)"},addNewSpriteWithCoords:function(a){var b=this.getChildByTag(TAG_SPRITE_BATCH_NODE),c=0|14*cc.RANDOM_0_1(),d=85*(c%5),c=121*(0|c/5),d=cc.Sprite.createWithTexture(b.getTexture(),
cc.RectMake(d,c,85,121));b.addChild(d);d.setPosition(cc.ccp(a.x,a.y));a=cc.RANDOM_0_1();a=0.2>a?cc.ScaleBy.create(3,2):0.4>a?cc.RotateBy.create(3,360):0.6>a?cc.Blink.create(1,3):0.8>a?cc.TintBy.create(2,0,-255,-255):cc.FadeOut.create(2);b=a.reverse();a=cc.Sequence.create(a,b,null);d.runAction(cc.RepeatForever.create(a))},ccTouchesEnded:function(a){for(var b=0;b<a.length;b++){var c=a[b];if(!c)break;this.addNewSpriteWithCoords(c.locationInView(c.view()))}}}),SpriteColorOpacity=SpriteTestDemo.extend({ctor:function(){var a=
cc.Sprite.create(s_grossini_dance_atlas,cc.RectMake(0,121,85,121)),b=cc.Sprite.create(s_grossini_dance_atlas,cc.RectMake(85,121,85,121)),c=cc.Sprite.create(s_grossini_dance_atlas,cc.RectMake(170,121,85,121)),d=cc.Sprite.create(s_grossini_dance_atlas,cc.RectMake(255,121,85,121)),e=cc.Sprite.create(s_grossini_dance_atlas,cc.RectMake(0,121,85,121)),f=cc.Sprite.create(s_grossini_dance_atlas,cc.RectMake(85,121,85,121)),g=cc.Sprite.create(s_grossini_dance_atlas,cc.RectMake(170,121,85,121)),h=cc.Sprite.create(s_grossini_dance_atlas,
cc.RectMake(255,121,85,121)),i=cc.Director.sharedDirector().getWinSize();a.setPosition(cc.ccp(1*(i.width/5),1*(i.height/3)));b.setPosition(cc.ccp(2*(i.width/5),1*(i.height/3)));c.setPosition(cc.ccp(3*(i.width/5),1*(i.height/3)));d.setPosition(cc.ccp(4*(i.width/5),1*(i.height/3)));e.setPosition(cc.ccp(1*(i.width/5),2*(i.height/3)));f.setPosition(cc.ccp(2*(i.width/5),2*(i.height/3)));g.setPosition(cc.ccp(3*(i.width/5),2*(i.height/3)));h.setPosition(cc.ccp(4*(i.width/5),2*(i.height/3)));var i=cc.FadeIn.create(2),
j=i.reverse(),i=cc.RepeatForever.create(cc.Sequence.create(i,j,null)),j=cc.TintBy.create(2,0,-255,-255),k=j.reverse(),j=cc.RepeatForever.create(cc.Sequence.create(j,k,null)),k=cc.TintBy.create(2,-255,0,-255),l=k.reverse(),k=cc.RepeatForever.create(cc.Sequence.create(k,l,null)),l=cc.TintBy.create(2,-255,-255,0),m=l.reverse(),l=cc.RepeatForever.create(cc.Sequence.create(l,m,null));e.runAction(j);f.runAction(k);g.runAction(l);h.runAction(i);this.addChild(a,0,TAG_SPRITE1);this.addChild(b,0,TAG_SPRITE2);
this.addChild(c,0,TAG_SPRITE3);this.addChild(d,0,TAG_SPRITE4);this.addChild(e,0,TAG_SPRITE5);this.addChild(f,0,TAG_SPRITE6);this.addChild(g,0,TAG_SPRITE7);this.addChild(h,0,TAG_SPRITE8);this.schedule(this.removeAndAddSprite,2)},removeAndAddSprite:function(){var a=this.getChildByTag(TAG_SPRITE5);this.removeChild(a,!1);this.addChild(a,0,TAG_SPRITE5)},title:function(){return"Sprite: Color & Opacity"}}),SpriteBatchNodeColorOpacity=SpriteTestDemo.extend({ctor:function(){var a=cc.SpriteBatchNode.create(s_grossini_dance_atlas,
1);this.addChild(a,0,TAG_SPRITE_BATCH_NODE);var b=cc.Sprite.createWithTexture(a.getTexture(),cc.RectMake(0,121,85,121)),c=cc.Sprite.createWithTexture(a.getTexture(),cc.RectMake(85,121,85,121)),d=cc.Sprite.createWithTexture(a.getTexture(),cc.RectMake(170,121,85,121)),e=cc.Sprite.createWithTexture(a.getTexture(),cc.RectMake(255,121,85,121)),f=cc.Sprite.createWithTexture(a.getTexture(),cc.RectMake(0,121,85,121)),g=cc.Sprite.createWithTexture(a.getTexture(),cc.RectMake(85,121,85,121)),h=cc.Sprite.createWithTexture(a.getTexture(),
cc.RectMake(170,121,85,121)),i=cc.Sprite.createWithTexture(a.getTexture(),cc.RectMake(255,121,85,121)),j=cc.Director.sharedDirector().getWinSize();b.setPosition(cc.ccp(1*(j.width/5),1*(j.height/3)));c.setPosition(cc.ccp(2*(j.width/5),1*(j.height/3)));d.setPosition(cc.ccp(3*(j.width/5),1*(j.height/3)));e.setPosition(cc.ccp(4*(j.width/5),1*(j.height/3)));f.setPosition(cc.ccp(1*(j.width/5),2*(j.height/3)));g.setPosition(cc.ccp(2*(j.width/5),2*(j.height/3)));h.setPosition(cc.ccp(3*(j.width/5),2*(j.height/
3)));i.setPosition(cc.ccp(4*(j.width/5),2*(j.height/3)));var j=cc.FadeIn.create(2),k=j.reverse(),j=cc.RepeatForever.create(cc.Sequence.create(j,k,null)),k=cc.TintBy.create(2,0,-255,-255),l=k.reverse(),k=cc.RepeatForever.create(cc.Sequence.create(k,l,null)),l=cc.TintBy.create(2,-255,0,-255),m=l.reverse(),l=cc.RepeatForever.create(cc.Sequence.create(l,m,null)),m=cc.TintBy.create(2,-255,-255,0),n=m.reverse(),m=cc.RepeatForever.create(cc.Sequence.create(m,n,null));f.runAction(k);g.runAction(l);h.runAction(m);
i.runAction(j);a.addChild(b,0,TAG_SPRITE1);a.addChild(c,0,TAG_SPRITE2);a.addChild(d,0,TAG_SPRITE3);a.addChild(e,0,TAG_SPRITE4);a.addChild(f,0,TAG_SPRITE5);a.addChild(g,0,TAG_SPRITE6);a.addChild(h,0,TAG_SPRITE7);a.addChild(i,0,TAG_SPRITE8);this.schedule(this.removeAndAddSprite,2)},removeAndAddSprite:function(){var a=this.getChildByTag(TAG_SPRITE_BATCH_NODE),b=a.getChildByTag(TAG_SPRITE5);a.removeChild(b,!1);a.addChild(b,0,TAG_SPRITE5)},title:function(){return"SpriteBatchNode: Color & Opacity"}}),SpriteZOrder=
SpriteTestDemo.extend({_dir:0,ctor:function(){this._dir=1;for(var a=cc.Director.sharedDirector().getWinSize(),b=a.width/11,c=0;5>c;c++){var d=cc.Sprite.create(s_grossini_dance_atlas,cc.RectMake(0,121,85,121));d.setPosition(cc.ccp((c+1)*b,a.height/2));this.addChild(d,c)}for(c=5;10>c;c++)d=cc.Sprite.create(s_grossini_dance_atlas,cc.RectMake(85,0,85,121)),d.setPosition(cc.ccp((c+1)*b,a.height/2)),this.addChild(d,14-c);d=cc.Sprite.create(s_grossini_dance_atlas,cc.RectMake(255,0,85,121));this.addChild(d,
-1,TAG_SPRITE1);d.setPosition(cc.ccp(a.width/2,a.height/2-20));d.setScaleX(6);d.setColor(cc.RED());this.schedule(this.reorderSprite,1)},reorderSprite:function(){var a=this.getChildByTag(TAG_SPRITE1),b=a.getZOrder();-1>b&&(this._dir=1);10<b&&(this._dir=-1);b+=3*this._dir;this.reorderChild(a,b)},title:function(){return"Sprite: Z order"}}),SpriteBatchNodeZOrder=SpriteTestDemo.extend({_dir:0,ctor:function(){this._dir=1;var a=cc.SpriteBatchNode.create(s_grossini_dance_atlas,1);this.addChild(a,0,TAG_SPRITE_BATCH_NODE);
for(var b=cc.Director.sharedDirector().getWinSize(),c=b.width/11,d=0;5>d;d++){var e=cc.Sprite.createWithTexture(a.getTexture(),cc.RectMake(0,121,85,121));e.setPosition(cc.ccp((d+1)*c,b.height/2));a.addChild(e,d)}for(d=5;10>d;d++)e=cc.Sprite.createWithTexture(a.getTexture(),cc.RectMake(85,0,85,121)),e.setPosition(cc.ccp((d+1)*c,b.height/2)),a.addChild(e,14-d);e=cc.Sprite.createWithTexture(a.getTexture(),cc.RectMake(255,0,85,121));a.addChild(e,-1,TAG_SPRITE1);e.setPosition(cc.ccp(b.width/2,b.height/
2-20));e.setScaleX(6);e.setColor(cc.RED());this.schedule(this.reorderSprite,1)},reorderSprite:function(){var a=this.getChildByTag(TAG_SPRITE_BATCH_NODE),b=a.getChildByTag(TAG_SPRITE1),c=b.getZOrder();-1>c&&(this._dir=1);10<c&&(this._dir=-1);c+=3*this._dir;a.reorderChild(b,c)},title:function(){return"SpriteBatchNode: Z order"}}),SpriteBatchNodeReorder=SpriteTestDemo.extend({ctor:function(){for(var a=[],b=cc.SpriteBatchNode.create(s_ghosts),c=0;10>c;c++){var d=cc.Sprite.createWithBatchNode(b,cc.RectMake(0,
0,50,50));a.push(d);b.addChild(d,10)}for(c=0;10>c;c++)5!=c&&b.reorderChild(a[c],9);d=b.getChildren();for(c=0;c<d.length;c++){a=d[c];if(!a)break;a.getAtlasIndex()}b=b.getDescendants();for(c=0;c<b.length;c++){a=b[c];if(!a)break;a.getAtlasIndex()}},title:function(){return"SpriteBatchNode: reorder #1"},subtitle:function(){return"Should not crash"}}),SpriteBatchNodeReorderIssue744=SpriteTestDemo.extend({ctor:function(){var a=cc.Director.sharedDirector().getWinSize(),b=cc.SpriteBatchNode.create(s_grossini_dance_atlas,
15);this.addChild(b,0,TAG_SPRITE_BATCH_NODE);var c=cc.Sprite.createWithBatchNode(b,cc.RectMake(0,0,85,121));c.setPosition(cc.ccp(a.width/2,a.height/2));b.addChild(c,3);b.reorderChild(c,1)},title:function(){return"SpriteBatchNode: reorder issue #744"},subtitle:function(){return"Should not crash"}}),SpriteBatchNodeReorderIssue766=SpriteTestDemo.extend({_batchNode:null,_sprite1:null,_sprite2:null,_sprite3:null,ctor:function(){this._batchNode=cc.SpriteBatchNode.create(s_piece,15);this.addChild(this._batchNode,
1,0);this._sprite1=this.makeSpriteZ(2);this._sprite1.setPosition(cc.PointMake(200,160));this._sprite2=this.makeSpriteZ(3);this._sprite2.setPosition(cc.PointMake(264,160));this._sprite3=this.makeSpriteZ(4);this._sprite3.setPosition(cc.PointMake(328,160));this.schedule(this.reorderSprite,2)},title:function(){return"SpriteBatchNode: reorder issue #766"},subtitle:function(){return"In 2 seconds 1 sprite will be reordered"},reorderSprite:function(){this.unschedule(this.reorderSprite);this._batchNode.reorderChild(this._sprite1,
4)},makeSpriteZ:function(a){var b=cc.Sprite.createWithBatchNode(this._batchNode,cc.RectMake(128,0,64,64));this._batchNode.addChild(b,a+1,0);var c=cc.Sprite.createWithBatchNode(this._batchNode,cc.RectMake(0,0,64,64));c.setOpacity(128);b.addChild(c,a,3);c=cc.Sprite.createWithBatchNode(this._batchNode,cc.RectMake(64,0,64,64));b.addChild(c,a+2,3);return b}}),SpriteBatchNodeReorderIssue767=SpriteTestDemo.extend({ctor:function(){var a=cc.Director.sharedDirector().getWinSize();cc.SpriteFrameCache.sharedSpriteFrameCache().addSpriteFramesWithFile(s_ghostsPlist,
s_ghosts);var b=cc.SpriteBatchNode.create(s_ghosts);this.addChild(b,0,TAG_SPRITE1);var c=cc.Sprite.createWithSpriteFrame(cc.SpriteFrameCache.sharedSpriteFrameCache().spriteFrameByName("father.gif"));c.setPosition(cc.ccp(a.width/2,a.height/2));b.addChild(c,0,TAG_SPRITE2);var d=c.getContentSize(),b=cc.Sprite.createWithSpriteFrame(cc.SpriteFrameCache.sharedSpriteFrameCache().spriteFrameByName("sister1.gif"));b.setPosition(cc.ccp(-25+d.width/2,0+d.height/2));c.addChild(b,-1,TAG_SPRITE_LEFT);var e=b.getContentSize(),
a=cc.Sprite.createWithSpriteFrame(cc.SpriteFrameCache.sharedSpriteFrameCache().spriteFrameByName("sister2.gif"));a.setPosition(cc.ccp(25+d.width/2,0+d.height/2));c.addChild(a,1,TAG_SPRITE_RIGHT);c=b.getContentSize();d=cc.Sprite.createWithSpriteFrame(cc.SpriteFrameCache.sharedSpriteFrameCache().spriteFrameByName("child1.gif"));d.setScale(0.65);d.setPosition(cc.ccp(0+e.width/2,-50+e.height/2));b.addChild(d,-1);d=cc.Sprite.createWithSpriteFrame(cc.SpriteFrameCache.sharedSpriteFrameCache().spriteFrameByName("child1.gif"));
d.setScale(0.65);d.setPosition(cc.ccp(0+e.width/2,50+e.height/2));b.addChild(d,1);b=cc.Sprite.createWithSpriteFrame(cc.SpriteFrameCache.sharedSpriteFrameCache().spriteFrameByName("child1.gif"));b.setScale(0.65);b.setPosition(cc.ccp(0+c.width/2,-50+c.height/2));a.addChild(b,-1);b=cc.Sprite.createWithSpriteFrame(cc.SpriteFrameCache.sharedSpriteFrameCache().spriteFrameByName("child1.gif"));b.setScale(0.65);b.setPosition(cc.ccp(0+c.width/2,50+c.height/2));a.addChild(b,1);this.schedule(this.reorderSprites,
1)},title:function(){return"SpriteBatchNode: reorder issue #767"},subtitle:function(){return"Should not crash"},reorderSprites:function(){var a=this.getChildByTag(TAG_SPRITE1).getChildByTag(TAG_SPRITE2),b=a.getChildByTag(TAG_SPRITE_LEFT),c=a.getChildByTag(TAG_SPRITE_RIGHT),d=1;1==b.getZOrder()&&(d=-1);a.reorderChild(b,d);a.reorderChild(c,-d)}}),SpriteZVertex=SpriteTestDemo.extend({_dir:0,_time:0,ctor:function(){this._dir=1;this._time=0;var a=cc.Director.sharedDirector().getWinSize(),b=a.width/12,
c=cc.Node.create();c.setContentSize(cc.SizeMake(a.width,a.height));c.setAnchorPoint(cc.ccp(0.5,0.5));c.setPosition(cc.ccp(a.width/2,a.height/2));this.addChild(c,0);for(var d=0;5>d;d++){var e=cc.Sprite.create(s_grossini_dance_atlas,cc.RectMake(0,121,85,121));e.setPosition(cc.ccp((d+1)*b,a.height/2));e.setVertexZ(10+40*d);c.addChild(e,0)}for(d=5;11>d;d++)e=cc.Sprite.create(s_grossini_dance_atlas,cc.RectMake(85,0,85,121)),e.setPosition(cc.ccp((d+1)*b,a.height/2)),e.setVertexZ(10+40*(10-d)),c.addChild(e,
0);c.runAction(cc.OrbitCamera.create(10,1,0,0,360,0,0))},title:function(){return"Sprite: openGL Z vertex"},onEnter:function(){this._super();cc.Director.sharedDirector().setProjection(cc.DIRECTOR_PROJECTION_3D)},onExit:function(){cc.Director.sharedDirector().setProjection(cc.DIRECTOR_PROJECTION_2D);this._super()}}),SpriteBatchNodeZVertex=SpriteTestDemo.extend({_dir:0,_time:0,ctor:function(){var a=cc.Director.sharedDirector().getWinSize(),b=a.width/12,c=cc.SpriteBatchNode.create(s_grossini_dance_atlas,
1);c.setContentSize(cc.SizeMake(a.width,a.height));c.setAnchorPoint(cc.ccp(0.5,0.5));c.setPosition(cc.ccp(a.width/2,a.height/2));this.addChild(c,0,TAG_SPRITE_BATCH_NODE);for(var d=0;5>d;d++){var e=cc.Sprite.createWithTexture(c.getTexture(),cc.RectMake(0,121,85,121));e.setPosition(cc.ccp((d+1)*b,a.height/2));e.setVertexZ(10+40*d);c.addChild(e,0)}for(d=5;11>d;d++)e=cc.Sprite.createWithTexture(c.getTexture(),cc.RectMake(85,0,85,121)),e.setPosition(cc.ccp((d+1)*b,a.height/2)),e.setVertexZ(10+40*(10-d)),
c.addChild(e,0);c.runAction(cc.OrbitCamera.create(10,1,0,0,360,0,0))},title:function(){return"SpriteBatchNode: openGL Z vertex"},onEnter:function(){this._super();cc.Director.sharedDirector().setProjection(cc.DIRECTOR_PROJECTION_3D)},onExit:function(){cc.Director.sharedDirector().setProjection(cc.DIRECTOR_PROJECTION_2D);this._super()}}),SpriteAnchorPoint=SpriteTestDemo.extend({ctor:function(){for(var a=cc.Director.sharedDirector().getWinSize(),b=0;3>b;b++){var c=cc.RotateBy.create(10,360),c=cc.RepeatForever.create(c),
d=cc.Sprite.create(s_grossini_dance_atlas,cc.RectMake(85*b,121,85,121));d.setPosition(cc.ccp(a.width/4*(b+1),a.height/2));var e=cc.Sprite.create(s_pathR1);e.setScale(0.25);e.setPosition(d.getPosition());this.addChild(e,10);switch(b){case 0:d.setAnchorPoint(cc.PointZero());break;case 1:d.setAnchorPoint(cc.ccp(0.5,0.5));break;case 2:d.setAnchorPoint(cc.ccp(1,1))}e.setPosition(d.getPosition());d.runAction(c);this.addChild(d,b)}},title:function(){return"Sprite: anchor point"}}),SpriteBatchNodeAnchorPoint=
SpriteTestDemo.extend({ctor:function(){var a=cc.SpriteBatchNode.create(s_grossini_dance_atlas,1);this.addChild(a,0,TAG_SPRITE_BATCH_NODE);for(var b=cc.Director.sharedDirector().getWinSize(),c=0;3>c;c++){var d=cc.RotateBy.create(10,360),d=cc.RepeatForever.create(d),e=cc.Sprite.createWithTexture(a.getTexture(),cc.RectMake(85*c,121,85,121));e.setPosition(cc.ccp(b.width/4*(c+1),b.height/2));var f=cc.Sprite.create(s_pathR1);f.setScale(0.25);f.setPosition(e.getPosition());this.addChild(f,1);switch(c){case 0:e.setAnchorPoint(cc.PointZero());
break;case 1:e.setAnchorPoint(cc.ccp(0.5,0.5));break;case 2:e.setAnchorPoint(cc.ccp(1,1))}f.setPosition(e.getPosition());e.runAction(d);a.addChild(e,c)}},title:function(){return"SpriteBatchNode: anchor point"}}),Sprite6=SpriteTestDemo.extend({ctor:function(){var a=cc.SpriteBatchNode.create(s_grossini_dance_atlas,1);this.addChild(a,0,TAG_SPRITE_BATCH_NODE);a.setIsRelativeAnchorPoint(!1);var b=cc.Director.sharedDirector().getWinSize();a.setAnchorPoint(cc.ccp(0.5,0.5));a.setContentSize(cc.SizeMake(b.width,
b.height));for(var c=cc.RotateBy.create(5,360),d=c.reverse(),c=cc.Sequence.create(c,d,null),c=cc.RepeatForever.create(c),d=cc.ScaleBy.create(5,1.5),e=d.reverse(),d=cc.Sequence.create(d,e,null),d=cc.RepeatForever.create(d),e=b.width/4,f=0;3>f;f++){var g=cc.Sprite.createWithTexture(a.getTexture(),cc.RectMake(85*f,121,85,121));g.setPosition(cc.ccp((f+1)*e,b.height/2));var h=cc.RotateBy.create(5,360),h=cc.RepeatForever.create(h);g.runAction(h.copy());a.addChild(g,f)}a.runAction(d);a.runAction(c)},title:function(){return"SpriteBatchNode transformation"}}),
SpriteFlip=SpriteTestDemo.extend({ctor:function(){var a=cc.Director.sharedDirector().getWinSize(),b=cc.Sprite.create(s_grossini_dance_atlas,cc.RectMake(85,121,85,121));b.setPosition(cc.ccp(a.width/2-100,a.height/2));this.addChild(b,0,TAG_SPRITE1);b=cc.Sprite.create(s_grossini_dance_atlas,cc.RectMake(85,121,85,121));b.setPosition(cc.ccp(a.width/2+100,a.height/2));this.addChild(b,0,TAG_SPRITE2);this.schedule(this.flipSprites,1)},title:function(){return"Sprite Flip X & Y"},flipSprites:function(){var a=
this.getChildByTag(TAG_SPRITE1),b=this.getChildByTag(TAG_SPRITE2);cc.Log("Pre: "+a.getContentSize().height);a.setFlipX(!a.isFlipX());b.setFlipY(!b.isFlipY());cc.Log("Post: "+a.getContentSize().height)}}),SpriteBatchNodeFlip=SpriteTestDemo.extend({ctor:function(){var a=cc.SpriteBatchNode.create(s_grossini_dance_atlas,10);this.addChild(a,0,TAG_SPRITE_BATCH_NODE);var b=cc.Director.sharedDirector().getWinSize(),c=cc.Sprite.createWithTexture(a.getTexture(),cc.RectMake(85,121,85,121));c.setPosition(cc.ccp(b.width/
2-100,b.height/2));a.addChild(c,0,TAG_SPRITE1);c=cc.Sprite.createWithTexture(a.getTexture(),cc.RectMake(85,121,85,121));c.setPosition(cc.ccp(b.width/2+100,b.height/2));a.addChild(c,0,TAG_SPRITE2);this.schedule(this.flipSprites,1)},title:function(){return"SpriteBatchNode Flip X & Y"},flipSprites:function(){var a=this.getChildByTag(TAG_SPRITE_BATCH_NODE),b=a.getChildByTag(TAG_SPRITE1),a=a.getChildByTag(TAG_SPRITE2);cc.Log("Pre: "+b.getContentSize().height);b.setFlipX(!b.isFlipX());a.setFlipY(!a.isFlipY());
cc.Log("Post: "+b.getContentSize().height)}}),SpriteAliased=SpriteTestDemo.extend({ctor:function(){var a=cc.Director.sharedDirector().getWinSize(),b=cc.Sprite.create(s_grossini_dance_atlas,cc.RectMake(85,121,85,121));b.setPosition(cc.ccp(a.width/2-100,a.height/2));this.addChild(b,0,TAG_SPRITE1);var c=cc.Sprite.create(s_grossini_dance_atlas,cc.RectMake(85,121,85,121));c.setPosition(cc.ccp(a.width/2+100,a.height/2));this.addChild(c,0,TAG_SPRITE2);var a=cc.ScaleBy.create(2,5),d=a.reverse(),a=cc.Sequence.create(a,
d,null),a=cc.RepeatForever.create(a),d=cc.ScaleBy.create(2,5),e=d.reverse(),d=cc.Sequence.create(d,e,null),d=cc.RepeatForever.create(d);b.runAction(a);c.runAction(d)},title:function(){return"Sprite Aliased"},onEnter:function(){this._super();this.getChildByTag(TAG_SPRITE1)},onExit:function(){this.getChildByTag(TAG_SPRITE1);this._super()}}),SpriteBatchNodeAliased=SpriteTestDemo.extend({ctor:function(){var a=cc.SpriteBatchNode.create(s_grossini_dance_atlas,10);this.addChild(a,0,TAG_SPRITE_BATCH_NODE);
var b=cc.Director.sharedDirector().getWinSize(),c=cc.Sprite.createWithTexture(a.getTexture(),cc.RectMake(85,121,85,121));c.setPosition(cc.ccp(b.width/2-100,b.height/2));a.addChild(c,0,TAG_SPRITE1);var d=cc.Sprite.createWithTexture(a.getTexture(),cc.RectMake(85,121,85,121));d.setPosition(cc.ccp(b.width/2+100,b.height/2));a.addChild(d,0,TAG_SPRITE2);var a=cc.ScaleBy.create(2,5),b=a.reverse(),a=cc.Sequence.create(a,b,null),a=cc.RepeatForever.create(a),b=cc.ScaleBy.create(2,5),e=b.reverse(),b=cc.Sequence.create(b,
e,null),b=cc.RepeatForever.create(b);c.runAction(a);d.runAction(b)},title:function(){return"SpriteBatchNode Aliased"},onEnter:function(){this._super();this.getChildByTag(TAG_SPRITE_BATCH_NODE)},onExit:function(){this.getChildByTag(TAG_SPRITE_BATCH_NODE);this._super()}}),SpriteNewTexture=SpriteTestDemo.extend({_usingTexture1:!1,_texture1:null,_texture2:null,ctor:function(){this.setIsTouchEnabled(!0);this.addChild(cc.Node.create(),0,TAG_SPRITE_BATCH_NODE);this._texture1=cc.TextureCache.sharedTextureCache().addImage(s_grossini_dance_atlas);
this._texture2=cc.TextureCache.sharedTextureCache().addImage(s_grossini_dance_atlas_mono);this._usingTexture1=!0;for(var a=0;30>a;a++)this.addNewSprite()},title:function(){return"Sprite New texture (tap)"},addNewSprite:function(){var a=cc.Director.sharedDirector().getWinSize(),b=cc.ccp(cc.RANDOM_0_1()*a.width,cc.RANDOM_0_1()*a.height),c=0|14*cc.RANDOM_0_1(),a=85*(c%5),d=121*(0|c/5),c=this.getChildByTag(TAG_SPRITE_BATCH_NODE),a=cc.Sprite.createWithTexture(this._texture1,cc.RectMake(a,d,85,121));c.addChild(a);
a.setPosition(cc.ccp(b.x,b.y));b=cc.RANDOM_0_1();b=0.2>b?cc.ScaleBy.create(3,2):0.4>b?cc.RotateBy.create(3,360):0.6>b?cc.Blink.create(1,3):cc.FadeOut.create(2);c=b.reverse();b=cc.Sequence.create(b,c,null);a.runAction(cc.RepeatForever.create(b))},ccTouchesEnded:function(){var a=this.getChildByTag(TAG_SPRITE_BATCH_NODE).getChildren(),b;if(this._usingTexture1){for(var c=0;c<a.length;c++){b=a[c];if(!b)break;b.setTexture(this._texture2)}this._usingTexture1=!1}else{for(c=0;c<a.length;c++){b=a[c];if(!b)break;
b.setTexture(this._texture1)}this._usingTexture1=!0}}}),SpriteBatchNodeNewTexture=SpriteTestDemo.extend({_texture1:null,_texture2:null,ctor:function(){this.setIsTouchEnabled(!0);var a=cc.SpriteBatchNode.create(s_grossini_dance_atlas,50);this.addChild(a,0,TAG_SPRITE_BATCH_NODE);this._texture1=a.getTexture();this._texture2=cc.TextureCache.sharedTextureCache().addImage(s_grossini_dance_atlas_mono);for(a=0;30>a;a++)this.addNewSprite()},title:function(){return"SpriteBatchNode new texture (tap)"},addNewSprite:function(){var a=
cc.Director.sharedDirector().getWinSize(),b=cc.ccp(cc.RANDOM_0_1()*a.width,cc.RANDOM_0_1()*a.height),c=this.getChildByTag(TAG_SPRITE_BATCH_NODE),d=0|14*cc.RANDOM_0_1(),a=85*(d%5),d=121*(0|d/5),a=cc.Sprite.createWithTexture(c.getTexture(),cc.RectMake(a,d,85,121));c.addChild(a);a.setPosition(cc.ccp(b.x,b.y));b=cc.RANDOM_0_1();b=0.2>b?cc.ScaleBy.create(3,2):0.4>b?cc.RotateBy.create(3,360):0.6>b?cc.Blink.create(1,3):cc.FadeOut.create(2);c=b.reverse();b=cc.Sequence.create(b,c,null);a.runAction(cc.RepeatForever.create(b))},
ccTouchesEnded:function(){var a=this.getChildByTag(TAG_SPRITE_BATCH_NODE);a.getTexture()==this._texture1?a.setTexture(this._texture2):a.setTexture(this._texture1)}}),SpriteFrameTest=SpriteTestDemo.extend({_sprite1:null,_sprite2:null,_counter:0,onEnter:function(){this._super();var a=cc.Director.sharedDirector().getWinSize(),b=cc.SpriteFrameCache.sharedSpriteFrameCache();b.addSpriteFramesWithFile(s_grossiniPlist);b.addSpriteFramesWithFile(s_grossini_grayPlist,s_grossini_gray);b.addSpriteFramesWithFile(s_grossini_bluePlist,
s_grossini_blue);this._sprite1=cc.Sprite.createWithSpriteFrame(cc.SpriteFrameCache.sharedSpriteFrameCache().spriteFrameByName("grossini_dance_01.png"));this._sprite1.setPosition(cc.ccp(a.width/2-80,a.height/2));var c=cc.SpriteBatchNode.create(s_grossini);c.addChild(this._sprite1);this.addChild(c);for(var c=[],d="",e=1;15>e;e++)d="grossini_dance_"+(10>e?"0"+e:e)+".png",d=b.spriteFrameByName(d),c.push(d);e=cc.Animation.create(c);this._sprite1.runAction(cc.RepeatForever.create(cc.Animate.create(e,!1)));
this._sprite1.setFlipX(!1);this._sprite1.setFlipY(!1);this._sprite2=cc.Sprite.createWithSpriteFrame(cc.SpriteFrameCache.sharedSpriteFrameCache().spriteFrameByName("grossini_dance_01.png"));this._sprite2.setPosition(cc.ccp(a.width/2+80,a.height/2));this.addChild(this._sprite2);a=[];for(e=1;15>e;e++)d="grossini_dance_gray_"+(10>e?"0"+e:e)+".png",d=b.spriteFrameByName(d),a.push(d);for(e=1;5>e;e++)d="grossini_blue_0"+e+".png",d=b.spriteFrameByName(d),a.push(d);a=a.concat(c);b=cc.Animation.create(a);this._sprite2.runAction(cc.RepeatForever.create(cc.Animate.create(b,
!1)));this._sprite2.setFlipX(!1);this._sprite2.setFlipY(!1);this.schedule(this.startIn05Secs,0.5);this._counter=0},onExit:function(){this._super();var a=cc.SpriteFrameCache.sharedSpriteFrameCache();a.removeSpriteFramesFromFile(s_grossiniPlist);a.removeSpriteFramesFromFile(s_grossini_grayPlist);a.removeSpriteFramesFromFile(s_grossini_bluePlist)},title:function(){return"Sprite vs. SpriteBatchNode animation"},subtitle:function(){return"Testing issue #792"},startIn05Secs:function(){this.unschedule(this.startIn05Secs);
this.schedule(this.flipSprites,1)},flipSprites:function(){this._counter++;var a=!1,b=!1;switch(this._counter%4){case 0:b=a=!1;break;case 1:a=!0;b=!1;break;case 2:a=!1;b=!0;break;case 3:b=a=!0}this._sprite1.setFlipX(a);this._sprite1.setFlipY(b);this._sprite2.setFlipX(a);this._sprite2.setFlipY(b)}}),SpriteFrameAliasNameTest=SpriteTestDemo.extend({title:function(){return"SpriteFrame Alias Name"},subtitle:function(){return"SpriteFrames are obtained using the alias name"},onEnter:function(){this._super()},
onExit:function(){this._super();cc.SpriteFrameCache.sharedSpriteFrameCache().removeSpriteFramesFromFile(s_grossini_aliasesPlist)}}),SpriteOffsetAnchorRotation=SpriteTestDemo.extend({ctor:function(){var a=cc.Director.sharedDirector().getWinSize(),b=cc.SpriteFrameCache.sharedSpriteFrameCache();b.addSpriteFramesWithFile(s_grossiniPlist);b.addSpriteFramesWithFile(s_grossini_grayPlist,s_grossini_gray);for(var c=0;3>c;c++){var d=cc.Sprite.createWithSpriteFrame(cc.SpriteFrameCache.sharedSpriteFrameCache().spriteFrameByName("grossini_dance_01.png"));
d.setPosition(cc.ccp(a.width/4*(c+1),a.height/2));var e=cc.Sprite.create(s_pathR1);e.setScale(0.25);e.setPosition(d.getPosition());this.addChild(e,1);switch(c){case 0:d.setAnchorPoint(cc.PointZero());break;case 1:d.setAnchorPoint(cc.ccp(0.5,0.5));break;case 2:d.setAnchorPoint(cc.ccp(1,1))}e.setPosition(d.getPosition());for(var e=[],f="",g=1;15>g;g++)f="grossini_dance_"+(10>g?"0"+g:g)+".png",f=b.spriteFrameByName(f),e.push(f);e=cc.Animation.create(e);d.runAction(cc.RepeatForever.create(cc.Animate.create(e,
!1)));d.runAction(cc.RepeatForever.create(cc.RotateBy.create(10,360)));this.addChild(d,0)}},onExit:function(){this._super();var a=cc.SpriteFrameCache.sharedSpriteFrameCache();a.removeSpriteFramesFromFile(s_grossiniPlist);a.removeSpriteFramesFromFile(s_grossini_grayPlist)},title:function(){return"Sprite offset + anchor + rot"}}),SpriteBatchNodeOffsetAnchorRotation=SpriteTestDemo.extend({ctor:function(){for(var a=cc.Director.sharedDirector().getWinSize(),b=0;3>b;b++){var c=cc.SpriteFrameCache.sharedSpriteFrameCache();
c.addSpriteFramesWithFile(s_grossiniPlist);c.addSpriteFramesWithFile(s_grossini_grayPlist,s_grossini_gray);var d=cc.Sprite.createWithSpriteFrame(cc.SpriteFrameCache.sharedSpriteFrameCache().spriteFrameByName("grossini_dance_01.png"));d.setPosition(cc.ccp(a.width/4*(b+1),a.height/2));var e=cc.Sprite.create(s_pathR1);e.setScale(0.25);e.setPosition(d.getPosition());this.addChild(e,200);switch(b){case 0:d.setAnchorPoint(cc.PointZero());break;case 1:d.setAnchorPoint(cc.ccp(0.5,0.5));break;case 2:d.setAnchorPoint(cc.ccp(1,
1))}e.setPosition(d.getPosition());e=cc.SpriteBatchNode.create(s_grossini);this.addChild(e);for(var f=[],g="",h=1;15>h;h++)g="grossini_dance_"+(10>h?"0"+h:h)+".png",g=c.spriteFrameByName(g),f.push(g);c=cc.Animation.create(f);d.runAction(cc.RepeatForever.create(cc.Animate.create(c,!1)));d.runAction(cc.RepeatForever.create(cc.RotateBy.create(10,360)));e.addChild(d,b)}},onExit:function(){this._super();var a=cc.SpriteFrameCache.sharedSpriteFrameCache();a.removeSpriteFramesFromFile(s_grossiniPlist);a.removeSpriteFramesFromFile(s_grossini_grayPlist)},
title:function(){return"SpriteBatchNode offset + anchor + rot"}}),SpriteOffsetAnchorScale=SpriteTestDemo.extend({ctor:function(){for(var a=cc.Director.sharedDirector().getWinSize(),b=0;3>b;b++){var c=cc.SpriteFrameCache.sharedSpriteFrameCache();c.addSpriteFramesWithFile(s_grossiniPlist);c.addSpriteFramesWithFile(s_grossini_grayPlist,s_grossini_gray);var d=cc.Sprite.createWithSpriteFrame(cc.SpriteFrameCache.sharedSpriteFrameCache().spriteFrameByName("grossini_dance_01.png"));d.setPosition(cc.ccp(a.width/
4*(b+1),a.height/2));var e=cc.Sprite.create(s_pathR1);e.setScale(0.25);e.setPosition(d.getPosition());this.addChild(e,1);switch(b){case 0:d.setAnchorPoint(cc.PointZero());break;case 1:d.setAnchorPoint(cc.ccp(0.5,0.5));break;case 2:d.setAnchorPoint(cc.ccp(1,1))}e.setPosition(d.getPosition());for(var e=[],f="",g=1;14>=g;g++)f="grossini_dance_"+(10>g?"0"+g:g)+".png",f=c.spriteFrameByName(f),e.push(f);c=cc.Animation.create(e);d.runAction(cc.RepeatForever.create(cc.Animate.create(c,!1)));c=cc.ScaleBy.create(2,
2);e=c.reverse();c=cc.Sequence.create(c,e,null);d.runAction(cc.RepeatForever.create(c));this.addChild(d,0)}},onExit:function(){this._super();var a=cc.SpriteFrameCache.sharedSpriteFrameCache();a.removeSpriteFramesFromFile(s_grossiniPlist);a.removeSpriteFramesFromFile(s_grossini_grayPlist)},title:function(){return"Sprite offset + anchor + scale"}}),SpriteBatchNodeOffsetAnchorScale=SpriteTestDemo.extend({ctor:function(){for(var a=cc.Director.sharedDirector().getWinSize(),b=0;3>b;b++){var c=cc.SpriteFrameCache.sharedSpriteFrameCache();
c.addSpriteFramesWithFile(s_grossiniPlist);c.addSpriteFramesWithFile(s_grossini_grayPlist,s_grossini_gray);var d=cc.Sprite.createWithSpriteFrame(cc.SpriteFrameCache.sharedSpriteFrameCache().spriteFrameByName("grossini_dance_01.png"));d.setPosition(cc.ccp(a.width/4*(b+1),a.height/2));var e=cc.Sprite.create(s_pathR1);e.setScale(0.25);e.setPosition(d.getPosition());this.addChild(e,200);switch(b){case 0:d.setAnchorPoint(cc.PointZero());break;case 1:d.setAnchorPoint(cc.ccp(0.5,0.5));break;case 2:d.setAnchorPoint(cc.ccp(1,
1))}e.setPosition(d.getPosition());e=cc.SpriteBatchNode.create(s_grossini);this.addChild(e);for(var f=[],g="",h=1;14>=h;h++)g="grossini_dance_"+(10>h?"0"+h:h)+".png",g=c.spriteFrameByName(g),f.push(g);c=cc.Animation.create(f);d.runAction(cc.RepeatForever.create(cc.Animate.create(c,!1)));c=cc.ScaleBy.create(2,2);f=c.reverse();c=cc.Sequence.create(c,f,null);d.runAction(cc.RepeatForever.create(c));e.addChild(d,b)}},onExit:function(){this._super();var a=cc.SpriteFrameCache.sharedSpriteFrameCache();a.removeSpriteFramesFromFile(s_grossiniPlist);
a.removeSpriteFramesFromFile(s_grossini_grayPlist)},title:function(){return"SpriteBatchNode offset + anchor + scale"}}),SpriteOffsetAnchorSkew=SpriteTestDemo.extend({ctor:function(){for(var a=cc.Director.sharedDirector().getWinSize(),b=0;3>b;b++){var c=cc.SpriteFrameCache.sharedSpriteFrameCache();c.addSpriteFramesWithFile(s_grossiniPlist);c.addSpriteFramesWithFile(s_grossini_grayPlist,s_grossini_gray);var d=cc.Sprite.createWithSpriteFrame(cc.SpriteFrameCache.sharedSpriteFrameCache().spriteFrameByName("grossini_dance_01.png"));
d.setPosition(cc.ccp(a.width/4*(b+1),a.height/2));var e=cc.Sprite.create(s_pathR1);e.setScale(0.25);e.setPosition(d.getPosition());this.addChild(e,1);switch(b){case 0:d.setAnchorPoint(cc.PointZero());break;case 1:d.setAnchorPoint(cc.ccp(0.5,0.5));break;case 2:d.setAnchorPoint(cc.ccp(1,1))}e.setPosition(d.getPosition());for(var e=[],f="",g=1;14>=g;g++)f="grossini_dance_"+(10>g?"0"+g:g)+".png",f=c.spriteFrameByName(f),e.push(f);c=cc.Animation.create(e);d.runAction(cc.RepeatForever.create(cc.Animate.create(2.8,
c,!1)));c=cc.SkewBy.create(2,45,0);e=c.reverse();g=cc.SkewBy.create(2,0,45);f=g.reverse();c=cc.Sequence.create(c,e,g,f,null);d.runAction(cc.RepeatForever.create(c));this.addChild(d,0)}},title:function(){return"Sprite offset + anchor + scale"}}),SpriteBatchNodeOffsetAnchorSkew=SpriteTestDemo.extend({ctor:function(){for(var a=cc.Director.sharedDirector().getWinSize(),b=0;3>b;b++){var c=cc.SpriteFrameCache.sharedSpriteFrameCache();c.addSpriteFramesWithFile(s_grossiniPlist);c.addSpriteFramesWithFile(s_grossini_grayPlist,
s_grossini_gray);var d=cc.Sprite.createWithSpriteFrame(cc.SpriteFrameCache.sharedSpriteFrameCache().spriteFrameByName("grossini_dance_01.png"));d.setPosition(cc.ccp(a.width/4*(b+1),a.height/2));var e=cc.Sprite.create(s_pathR1);e.setScale(0.25);e.setPosition(d.getPosition());this.addChild(e,200);switch(b){case 0:d.setAnchorPoint(cc.PointZero());break;case 1:d.setAnchorPoint(cc.ccp(0.5,0.5));break;case 2:d.setAnchorPoint(cc.ccp(1,1))}e.setPosition(d.getPosition());e=cc.SpriteBatchNode.create(s_grossini);
this.addChild(e);for(var f=[],g="",h=1;14>=h;h++)g="grossini_dance_"+(10>h?"0"+h:h)+".png",g=c.spriteFrameByName(g),f.push(g);c=cc.Animation.create(f);d.runAction(cc.RepeatForever.create(cc.Animate.create(2.8,c,!1)));c=cc.SkewBy.create(2,45,0);f=c.reverse();h=cc.SkewBy.create(2,0,45);g=h.reverse();c=cc.Sequence.create(c,f,h,g);d.runAction(cc.RepeatForever.create(c));e.addChild(d,b)}},title:function(){return"SpriteBatchNode offset + anchor + skew"}}),SpriteOffsetAnchorSkewScale=SpriteTestDemo.extend({ctor:function(){for(var a=
cc.Director.sharedDirector().getWinSize(),b=0;3>b;b++){var c=cc.SpriteFrameCache.sharedSpriteFrameCache();c.addSpriteFramesWithFile(s_grossiniPlist);c.addSpriteFramesWithFile(s_grossini_grayPlist,s_grossini_gray);var d=cc.Sprite.createWithSpriteFrame(cc.SpriteFrameCache.sharedSpriteFrameCache().spriteFrameByName("grossini_dance_01.png"));d.setPosition(cc.ccp(a.width/4*(b+1),a.height/2));var e=cc.Sprite.create(s_pathR1);e.setScale(0.25);e.setPosition(d.getPosition());this.addChild(e,1);switch(b){case 0:d.setAnchorPoint(cc.PointZero());
break;case 1:d.setAnchorPoint(cc.ccp(0.5,0.5));break;case 2:d.setAnchorPoint(cc.ccp(1,1))}e.setPosition(d.getPosition());for(var e=[],f="",g=1;14>=g;g++)f="grossini_dance_"+(10>g?"0"+g:g)+".png",f=c.spriteFrameByName(f),e.push(f);c=cc.Animation.create(e);d.runAction(cc.RepeatForever.create(cc.Animate.create(2.8,c,!1)));c=cc.SkewBy.create(2,45,0);e=c.reverse();g=cc.SkewBy.create(2,0,45);f=g.reverse();c=cc.Sequence.create(c,e,g,f);d.runAction(cc.RepeatForever.create(c));c=cc.ScaleBy.create(2,2);e=c.reverse();
c=cc.Sequence.create(c,e);d.runAction(cc.RepeatForever.create(c));this.addChild(d,0)}},title:function(){return"Sprite anchor + skew + scale"}}),SpriteBatchNodeOffsetAnchorSkewScale=SpriteTestDemo.extend({ctor:function(){for(var a=cc.Director.sharedDirector().getWinSize(),b=0;3>b;b++){var c=cc.SpriteFrameCache.sharedSpriteFrameCache();c.addSpriteFramesWithFile(s_grossiniPlist);c.addSpriteFramesWithFile(s_grossini_grayPlist,s_grossini_gray);var d=cc.Sprite.createWithSpriteFrame(cc.SpriteFrameCache.sharedSpriteFrameCache().spriteFrameByName("grossini_dance_01.png"));
d.setPosition(cc.ccp(a.width/4*(b+1),a.height/2));var e=cc.Sprite.create(s_pathR1);e.setScale(0.25);e.setPosition(d.getPosition());this.addChild(e,200);switch(b){case 0:d.setAnchorPoint(cc.PointZero());break;case 1:d.setAnchorPoint(cc.ccp(0.5,0.5));break;case 2:d.setAnchorPoint(cc.ccp(1,1))}e.setPosition(d.getPosition());e=cc.SpriteBatchNode.create(s_grossini);this.addChild(e);for(var f=[],g="",h=1;14>=h;h++)g="grossini_dance_"+(10>h?"0"+h:h)+".png",g=c.spriteFrameByName(g),f.push(g);c=cc.Animation.create(f);
d.runAction(cc.RepeatForever.create(cc.Animate.create(2.8,c,!1)));c=cc.SkewBy.create(2,45,0);f=c.reverse();h=cc.SkewBy.create(2,0,45);g=h.reverse();c=cc.Sequence.create(c,f,h,g);d.runAction(cc.RepeatForever.create(c));c=cc.ScaleBy.create(2,2);f=c.reverse();c=cc.Sequence.create(c,f);d.runAction(cc.RepeatForever.create(c));e.addChild(d,b)}},title:function(){return"SpriteBatchNode anchor + skew + scale"}}),SpriteOffsetAnchorFlip=SpriteTestDemo.extend({ctor:function(){for(var a=cc.Director.sharedDirector().getWinSize(),
b=0;3>b;b++){var c=cc.SpriteFrameCache.sharedSpriteFrameCache();c.addSpriteFramesWithFile(s_grossiniPlist);c.addSpriteFramesWithFile(s_grossini_grayPlist,s_grossini_gray);var d=cc.Sprite.createWithSpriteFrame(cc.SpriteFrameCache.sharedSpriteFrameCache().spriteFrameByName("grossini_dance_01.png"));d.setPosition(cc.ccp(a.width/4*(b+1),a.height/2));var e=cc.Sprite.create(s_pathR1);e.setScale(0.25);e.setPosition(d.getPosition());this.addChild(e,1);switch(b){case 0:d.setAnchorPoint(cc.PointZero());break;
case 1:d.setAnchorPoint(cc.ccp(0.5,0.5));break;case 2:d.setAnchorPoint(cc.ccp(1,1))}e.setPosition(d.getPosition());for(var e=[],f="",g=1;14>=g;g++)f="grossini_dance_"+(10>g?"0"+g:g)+".png",f=c.spriteFrameByName(f),e.push(f);c=cc.Animation.create(e);d.runAction(cc.RepeatForever.create(cc.Animate.create(2.8,c,!1)));c=cc.FlipY.create(!0);e=cc.FlipY.create(!1);g=cc.DelayTime.create(1);f=cc.DelayTime.create(1);c=cc.Sequence.create(g,c,f,e);d.runAction(cc.RepeatForever.create(c));this.addChild(d,0)}},title:function(){return"Sprite offset + anchor + flip"},
subtitle:function(){return"issue #1078"}}),SpriteBatchNodeOffsetAnchorFlip=SpriteTestDemo.extend({ctor:function(){for(var a=cc.Director.sharedDirector().getWinSize(),b=0;3>b;b++){var c=cc.SpriteFrameCache.sharedSpriteFrameCache();c.addSpriteFramesWithFile(s_grossiniPlist);c.addSpriteFramesWithFile(s_grossini_grayPlist,s_grossini_gray);var d=cc.Sprite.createWithSpriteFrame(cc.SpriteFrameCache.sharedSpriteFrameCache().spriteFrameByName("grossini_dance_01.png"));d.setPosition(cc.ccp(a.width/4*(b+1),
a.height/2));var e=cc.Sprite.create(s_pathR1);e.setScale(0.25);e.setPosition(d.getPosition());this.addChild(e,200);switch(b){case 0:d.setAnchorPoint(cc.PointZero());break;case 1:d.setAnchorPoint(cc.ccp(0.5,0.5));break;case 2:d.setAnchorPoint(cc.ccp(1,1))}e.setPosition(d.getPosition());e=cc.SpriteBatchNode.create(s_grossini);this.addChild(e);for(var f=[],g="",h=1;14>=h;h++)g="grossini_dance_"+(10>h?"0"+h:h)+".png",g=c.spriteFrameByName(g),f.push(g);c=cc.Animation.create(f);d.runAction(cc.RepeatForever.create(cc.Animate.create(2.8,
c,!1)));c=cc.FlipY.create(!0);f=cc.FlipY.create(!1);h=cc.DelayTime.create(1);c=cc.Sequence.create(h,c,h.copyWithZone(null),f);d.runAction(cc.RepeatForever.create(c));e.addChild(d,b)}},title:function(){return"SpriteBatchNode offset + anchor + flip"},subtitle:function(){return"issue #1078"}}),SpriteAnimationSplit=SpriteTestDemo.extend({ctor:function(){var a=cc.Director.sharedDirector().getWinSize(),b=cc.TextureCache.sharedTextureCache().addImage(s_dragon_animation),c=cc.SpriteFrame.create(b,cc.RectMake(0,
0,132,132)),d=cc.SpriteFrame.create(b,cc.RectMake(132,0,132,132)),e=cc.SpriteFrame.create(b,cc.RectMake(264,0,132,132)),f=cc.SpriteFrame.create(b,cc.RectMake(396,0,132,132)),g=cc.SpriteFrame.create(b,cc.RectMake(0,132,132,132)),h=cc.SpriteFrame.create(b,cc.RectMake(132,132,132,132)),b=cc.Sprite.createWithSpriteFrame(c);b.setPosition(cc.ccp(a.width/2-80,a.height/2));this.addChild(b);a=[];a.push(c);a.push(d);a.push(e);a.push(f);a.push(g);a.push(h);c=cc.Animation.create(a,0.2);c=cc.Animate.create(c,
!1);c=cc.Sequence.create(c,cc.FlipX.create(!0),c.copy(),cc.FlipX.create(!1));b.runAction(cc.RepeatForever.create(c))},title:function(){return"Sprite: Animation + flip"},onExit:function(){this._super()}}),SpriteHybrid=SpriteTestDemo.extend({_usingSpriteBatchNode:!1,ctor:function(){var a=cc.Director.sharedDirector().getWinSize(),b=cc.Node.create(),c=cc.SpriteBatchNode.create(s_grossini,50);this.addChild(b,0,TAG_NODE);this.addChild(c,0,TAG_SPRITE_BATCH_NODE);cc.SpriteFrameCache.sharedSpriteFrameCache().addSpriteFramesWithFile(s_grossiniPlist);
for(c=1;250>=c;c++){var d=Math.round(14*cc.RANDOM_0_1());0==d&&(d=1);d="grossini_dance_"+(10>d?"0"+d:d)+".png";d=cc.SpriteFrameCache.sharedSpriteFrameCache().spriteFrameByName(d);d=cc.Sprite.createWithSpriteFrame(d);b.addChild(d,c,c);var e=-1E3,f=-1E3;0.2>cc.RANDOM_0_1()&&(e=cc.RANDOM_0_1()*a.width,f=cc.RANDOM_0_1()*a.height);d.setPosition(cc.ccp(e,f));e=cc.RotateBy.create(4,360);d.runAction(cc.RepeatForever.create(e))}this._usingSpriteBatchNode=!1;this.schedule(this.reparentSprite,2)},title:function(){return"Hybrcc.Sprite* sprite Test"},
onExit:function(){this._super();cc.SpriteFrameCache.sharedSpriteFrameCache().removeSpriteFramesFromFile(s_grossiniPlist)},reparentSprite:function(){var a=this.getChildByTag(TAG_NODE),b=this.getChildByTag(TAG_SPRITE_BATCH_NODE),c=[];if(this._usingSpriteBatchNode)var d=b,b=a,a=d;for(var d=a.getChildren(),e=0;e<d.length;e++){var f=d[e];if(!f)break;c.push(f)}a.removeAllChildrenWithCleanup(!1);for(e=0;e<c.length;e++){f=c[e];if(!f)break;b.addChild(f,e,e)}this._usingSpriteBatchNode=!this._usingSpriteBatchNode}}),
SpriteBatchNodeChildren=SpriteTestDemo.extend({ctor:function(){var a=cc.Director.sharedDirector().getWinSize(),b=cc.SpriteBatchNode.create(s_grossini,50);this.addChild(b,0,TAG_SPRITE_BATCH_NODE);cc.SpriteFrameCache.sharedSpriteFrameCache().addSpriteFramesWithFile(s_grossiniPlist);var c=cc.Sprite.createWithSpriteFrame(cc.SpriteFrameCache.sharedSpriteFrameCache().spriteFrameByName("grossini_dance_01.png"));c.setPosition(cc.ccp(a.width/3,a.height/2));a=cc.Sprite.createWithSpriteFrame(cc.SpriteFrameCache.sharedSpriteFrameCache().spriteFrameByName("grossini_dance_02.png"));
a.setPosition(cc.ccp(50,50));var d=cc.Sprite.createWithSpriteFrame(cc.SpriteFrameCache.sharedSpriteFrameCache().spriteFrameByName("grossini_dance_03.png"));d.setPosition(cc.ccp(-50,-50));b.addChild(c);c.addChild(a);c.addChild(d);for(var b=[],e="",d=1;15>d;d++)e="grossini_dance_"+(10>d?"0"+d:d)+".png",e=cc.SpriteFrameCache.sharedSpriteFrameCache().spriteFrameByName(e),b.push(e);b=cc.Animation.create(b,0.2);c.runAction(cc.RepeatForever.create(cc.Animate.create(b,!1)));var b=cc.MoveBy.create(2,cc.ccp(200,
0)),d=b.reverse(),e=cc.RotateBy.create(2,360),f=cc.ScaleBy.create(2,2),d=f.reverse(),g=e.reverse();a.runAction(cc.RepeatForever.create(g));c.runAction(cc.RepeatForever.create(e));c.runAction(cc.RepeatForever.create(cc.Sequence.create(b,d,null)));c.runAction(cc.RepeatForever.create(cc.Sequence.create(f,d,null)))},title:function(){return"SpriteBatchNode Grand Children"},onExit:function(){this._super()}}),SpriteBatchNodeChildren2=SpriteTestDemo.extend({ctor:function(){var a=cc.Director.sharedDirector().getWinSize(),
b=cc.SpriteBatchNode.create(s_grossini,50);this.addChild(b,0,TAG_SPRITE_BATCH_NODE);cc.SpriteFrameCache.sharedSpriteFrameCache().addSpriteFramesWithFile(s_grossiniPlist);var c=cc.Sprite.createWithSpriteFrame(cc.SpriteFrameCache.sharedSpriteFrameCache().spriteFrameByName("grossini_dance_01.png"));c.setPosition(cc.ccp(a.width/3,a.height/2));var d=cc.Sprite.createWithSpriteFrame(cc.SpriteFrameCache.sharedSpriteFrameCache().spriteFrameByName("grossini_dance_02.png"));d.setPosition(cc.ccp(20,30));d.setScale(0.2);
var e=cc.Sprite.createWithSpriteFrame(cc.SpriteFrameCache.sharedSpriteFrameCache().spriteFrameByName("grossini_dance_03.png"));e.setPosition(cc.ccp(-20,30));e.setScale(0.2);b.addChild(c);c.addChild(d,-2);c.addChild(e,2);d.setHonorParentTransform(d.getHonorParentTransform()&~cc.HONOR_PARENT_TRANSFORM_ROTATE);e.setHonorParentTransform(e.getHonorParentTransform()&~(cc.HONOR_PARENT_TRANSFORM_SCALE|cc.HONOR_PARENT_TRANSFORM_ROTATE));var d=cc.MoveBy.create(2,cc.ccp(200,0)),e=d.reverse(),f=cc.RotateBy.create(2,
360),g=cc.ScaleBy.create(2,2),e=g.reverse();c.runAction(cc.RepeatForever.create(f));c.runAction(cc.RepeatForever.create(cc.Sequence.create(d,e,null)));c.runAction(cc.RepeatForever.create(cc.Sequence.create(g,e,null)));c=cc.Sprite.createWithSpriteFrame(cc.SpriteFrameCache.sharedSpriteFrameCache().spriteFrameByName("grossini_dance_01.png"));c.setPosition(cc.ccp(2*a.width/3,a.height/2-50));a=cc.Sprite.createWithSpriteFrame(cc.SpriteFrameCache.sharedSpriteFrameCache().spriteFrameByName("grossini_dance_02.png"));
a.setPosition(cc.ccp(20,30));a.setScale(0.8);d=cc.Sprite.createWithSpriteFrame(cc.SpriteFrameCache.sharedSpriteFrameCache().spriteFrameByName("grossini_dance_03.png"));d.setPosition(cc.ccp(-20,30));d.setScale(0.8);b.addChild(c);c.addChild(a,-2);c.addChild(d,2);a.setHonorParentTransform(a.getHonorParentTransform()&~cc.HONOR_PARENT_TRANSFORM_TRANSLATE);d.setHonorParentTransform(d.getHonorParentTransform()&~cc.HONOR_PARENT_TRANSFORM_SCALE);c.runAction(cc.RepeatForever.create(cc.RotateBy.create(1,360)));
c.runAction(cc.RepeatForever.create(cc.Sequence.create(cc.ScaleTo.create(0.5,5),cc.ScaleTo.create(0.5,1),null)))},title:function(){return"SpriteBatchNode HonorTransform"},onExit:function(){this._super()}}),SpriteBatchNodeChildrenZ=SpriteTestDemo.extend({ctor:function(){var a=cc.Director.sharedDirector().getWinSize(),b,c,d,e;cc.SpriteFrameCache.sharedSpriteFrameCache().addSpriteFramesWithFile(s_grossiniPlist);b=cc.SpriteBatchNode.create(s_grossini,50);this.addChild(b,0,TAG_SPRITE_BATCH_NODE);c=cc.Sprite.createWithSpriteFrame(cc.SpriteFrameCache.sharedSpriteFrameCache().spriteFrameByName("grossini_dance_01.png"));
c.setPosition(cc.ccp(a.width/3,a.height/2));d=cc.Sprite.createWithSpriteFrame(cc.SpriteFrameCache.sharedSpriteFrameCache().spriteFrameByName("grossini_dance_02.png"));d.setPosition(cc.ccp(20,30));e=cc.Sprite.createWithSpriteFrame(cc.SpriteFrameCache.sharedSpriteFrameCache().spriteFrameByName("grossini_dance_03.png"));e.setPosition(cc.ccp(-20,30));b.addChild(c);c.addChild(d,2);c.addChild(e,-2);b=cc.SpriteBatchNode.create(s_grossini,50);this.addChild(b,0,TAG_SPRITE_BATCH_NODE);c=cc.Sprite.createWithSpriteFrame(cc.SpriteFrameCache.sharedSpriteFrameCache().spriteFrameByName("grossini_dance_01.png"));
c.setPosition(cc.ccp(2*a.width/3,a.height/2));d=cc.Sprite.createWithSpriteFrame(cc.SpriteFrameCache.sharedSpriteFrameCache().spriteFrameByName("grossini_dance_02.png"));d.setPosition(cc.ccp(20,30));e=cc.Sprite.createWithSpriteFrame(cc.SpriteFrameCache.sharedSpriteFrameCache().spriteFrameByName("grossini_dance_03.png"));e.setPosition(cc.ccp(-20,30));b.addChild(c);c.addChild(d,-2);c.addChild(e,2);b=cc.SpriteBatchNode.create(s_grossini,50);this.addChild(b,0,TAG_SPRITE_BATCH_NODE);c=cc.Sprite.createWithSpriteFrame(cc.SpriteFrameCache.sharedSpriteFrameCache().spriteFrameByName("grossini_dance_01.png"));
c.setPosition(cc.ccp(a.width/2-90,a.height/4));d=cc.Sprite.createWithSpriteFrame(cc.SpriteFrameCache.sharedSpriteFrameCache().spriteFrameByName("grossini_dance_02.png"));d.setPosition(cc.ccp(a.width/2-60,a.height/4));e=cc.Sprite.createWithSpriteFrame(cc.SpriteFrameCache.sharedSpriteFrameCache().spriteFrameByName("grossini_dance_03.png"));e.setPosition(cc.ccp(a.width/2-30,a.height/4));b.addChild(c,10);b.addChild(d,-10);b.addChild(e,-5);b=cc.SpriteBatchNode.create(s_grossini,50);this.addChild(b,0,TAG_SPRITE_BATCH_NODE);
c=cc.Sprite.createWithSpriteFrame(cc.SpriteFrameCache.sharedSpriteFrameCache().spriteFrameByName("grossini_dance_01.png"));c.setPosition(cc.ccp(a.width/2+30,a.height/4));d=cc.Sprite.createWithSpriteFrame(cc.SpriteFrameCache.sharedSpriteFrameCache().spriteFrameByName("grossini_dance_02.png"));d.setPosition(cc.ccp(a.width/2+60,a.height/4));e=cc.Sprite.createWithSpriteFrame(cc.SpriteFrameCache.sharedSpriteFrameCache().spriteFrameByName("grossini_dance_03.png"));e.setPosition(cc.ccp(a.width/2+90,a.height/
4));b.addChild(c,-10);b.addChild(d,-5);b.addChild(e,-2)},title:function(){return"SpriteBatchNode Children Z"},onExit:function(){this._super()}}),SpriteChildrenVisibility=SpriteTestDemo.extend({ctor:function(){var a=cc.Director.sharedDirector().getWinSize();cc.SpriteFrameCache.sharedSpriteFrameCache().addSpriteFramesWithFile(s_grossiniPlist);var b=cc.SpriteBatchNode.create(s_grossini,50);b.setPosition(cc.ccp(a.width/3,a.height/2));this.addChild(b,0);var c=cc.Sprite.createWithSpriteFrame(cc.SpriteFrameCache.sharedSpriteFrameCache().spriteFrameByName("grossini_dance_01.png"));
c.setPosition(cc.ccp(0,0));var d=cc.Sprite.createWithSpriteFrame(cc.SpriteFrameCache.sharedSpriteFrameCache().spriteFrameByName("grossini_dance_02.png"));d.setPosition(cc.ccp(20,30));var e=cc.Sprite.createWithSpriteFrame(cc.SpriteFrameCache.sharedSpriteFrameCache().spriteFrameByName("grossini_dance_03.png"));e.setPosition(cc.ccp(-20,30));b.addChild(c);c.addChild(d,-2);c.addChild(e,2);c.runAction(cc.Blink.create(5,10));b=cc.Node.create();b.setPosition(cc.ccp(2*a.width/3,a.height/2));this.addChild(b,
0);c=cc.Sprite.createWithSpriteFrame(cc.SpriteFrameCache.sharedSpriteFrameCache().spriteFrameByName("grossini_dance_01.png"));c.setPosition(cc.ccp(0,0));d=cc.Sprite.createWithSpriteFrame(cc.SpriteFrameCache.sharedSpriteFrameCache().spriteFrameByName("grossini_dance_02.png"));d.setPosition(cc.ccp(20,30));e=cc.Sprite.createWithSpriteFrame(cc.SpriteFrameCache.sharedSpriteFrameCache().spriteFrameByName("grossini_dance_03.png"));e.setPosition(cc.ccp(-20,30));b.addChild(c);c.addChild(d,-2);c.addChild(e,
2);c.runAction(cc.Blink.create(5,10))},title:function(){return"Sprite & SpriteBatchNode Visibility"},onExit:function(){this._super()}}),SpriteChildrenVisibilityIssue665=SpriteTestDemo.extend({ctor:function(){var a=cc.Director.sharedDirector().getWinSize();cc.SpriteFrameCache.sharedSpriteFrameCache().addSpriteFramesWithFile(s_grossiniPlist);var b=cc.SpriteBatchNode.create(s_grossini,50);b.setPosition(cc.ccp(a.width/3,a.height/2));this.addChild(b,0);var c=cc.Sprite.createWithSpriteFrame(cc.SpriteFrameCache.sharedSpriteFrameCache().spriteFrameByName("grossini_dance_01.png"));
c.setPosition(cc.ccp(0,0));var d=cc.Sprite.createWithSpriteFrame(cc.SpriteFrameCache.sharedSpriteFrameCache().spriteFrameByName("grossini_dance_02.png"));d.setPosition(cc.ccp(20,30));var e=cc.Sprite.createWithSpriteFrame(cc.SpriteFrameCache.sharedSpriteFrameCache().spriteFrameByName("grossini_dance_03.png"));e.setPosition(cc.ccp(-20,30));c.setIsVisible(!1);b.addChild(c);c.addChild(d,-2);c.addChild(e,2);b=cc.Node.create();b.setPosition(cc.ccp(2*a.width/3,a.height/2));this.addChild(b,0);c=cc.Sprite.createWithSpriteFrame(cc.SpriteFrameCache.sharedSpriteFrameCache().spriteFrameByName("grossini_dance_01.png"));
c.setPosition(cc.ccp(0,0));d=cc.Sprite.createWithSpriteFrame(cc.SpriteFrameCache.sharedSpriteFrameCache().spriteFrameByName("grossini_dance_02.png"));d.setPosition(cc.ccp(20,30));e=cc.Sprite.createWithSpriteFrame(cc.SpriteFrameCache.sharedSpriteFrameCache().spriteFrameByName("grossini_dance_03.png"));e.setPosition(cc.ccp(-20,30));c.setIsVisible(!1);b.addChild(c);c.addChild(d,-2);c.addChild(e,2)},title:function(){return"Sprite & SpriteBatchNode Visibility"},subtitle:function(){return"No sprites should be visible"}}),
SpriteChildrenAnchorPoint=SpriteTestDemo.extend({ctor:function(){var a=cc.Director.sharedDirector().getWinSize();cc.SpriteFrameCache.sharedSpriteFrameCache().addSpriteFramesWithFile(s_grossiniPlist);var b=cc.Node.create();this.addChild(b,0);var c=cc.Sprite.createWithSpriteFrame(cc.SpriteFrameCache.sharedSpriteFrameCache().spriteFrameByName("grossini_dance_08.png"));c.setPosition(cc.ccp(a.width/4,a.height/2));c.setAnchorPoint(cc.ccp(0,0));var d=cc.Sprite.createWithSpriteFrame(cc.SpriteFrameCache.sharedSpriteFrameCache().spriteFrameByName("grossini_dance_02.png"));
d.setPosition(cc.ccp(20,30));var e=cc.Sprite.createWithSpriteFrame(cc.SpriteFrameCache.sharedSpriteFrameCache().spriteFrameByName("grossini_dance_03.png"));e.setPosition(cc.ccp(-20,30));var f=cc.Sprite.createWithSpriteFrame(cc.SpriteFrameCache.sharedSpriteFrameCache().spriteFrameByName("grossini_dance_04.png"));f.setPosition(cc.ccp(0,0));f.setScale(0.5);b.addChild(c);c.addChild(d,-2);c.addChild(e,-2);c.addChild(f,3);d=cc.Sprite.create(s_pathR1);d.setScale(0.25);d.setPosition(c.getPosition());this.addChild(d,
10);c=cc.Sprite.createWithSpriteFrame(cc.SpriteFrameCache.sharedSpriteFrameCache().spriteFrameByName("grossini_dance_08.png"));c.setPosition(cc.ccp(a.width/2,a.height/2));c.setAnchorPoint(cc.ccp(0.5,0.5));d=cc.Sprite.createWithSpriteFrame(cc.SpriteFrameCache.sharedSpriteFrameCache().spriteFrameByName("grossini_dance_02.png"));d.setPosition(cc.ccp(20,30));e=cc.Sprite.createWithSpriteFrame(cc.SpriteFrameCache.sharedSpriteFrameCache().spriteFrameByName("grossini_dance_03.png"));e.setPosition(cc.ccp(-20,
30));f=cc.Sprite.createWithSpriteFrame(cc.SpriteFrameCache.sharedSpriteFrameCache().spriteFrameByName("grossini_dance_04.png"));f.setPosition(cc.ccp(0,0));f.setScale(0.5);b.addChild(c);c.addChild(d,-2);c.addChild(e,-2);c.addChild(f,3);d=cc.Sprite.create(s_pathR1);d.setScale(0.25);d.setPosition(c.getPosition());this.addChild(d,10);c=cc.Sprite.createWithSpriteFrame(cc.SpriteFrameCache.sharedSpriteFrameCache().spriteFrameByName("grossini_dance_08.png"));c.setPosition(cc.ccp(a.width/2+a.width/4,a.height/
2));c.setAnchorPoint(cc.ccp(1,1));d=cc.Sprite.createWithSpriteFrame(cc.SpriteFrameCache.sharedSpriteFrameCache().spriteFrameByName("grossini_dance_02.png"));d.setPosition(cc.ccp(20,30));e=cc.Sprite.createWithSpriteFrame(cc.SpriteFrameCache.sharedSpriteFrameCache().spriteFrameByName("grossini_dance_03.png"));e.setPosition(cc.ccp(-20,30));f=cc.Sprite.createWithSpriteFrame(cc.SpriteFrameCache.sharedSpriteFrameCache().spriteFrameByName("grossini_dance_04.png"));f.setPosition(cc.ccp(0,0));f.setScale(0.5);
b.addChild(c);c.addChild(d,-2);c.addChild(e,-2);c.addChild(f,3);d=cc.Sprite.create(s_pathR1);d.setScale(0.25);d.setPosition(c.getPosition());this.addChild(d,10)},title:function(){return"Sprite: children + anchor"},onExit:function(){this._super()}}),SpriteBatchNodeChildrenAnchorPoint=SpriteTestDemo.extend({ctor:function(){var a=cc.Director.sharedDirector().getWinSize();cc.SpriteFrameCache.sharedSpriteFrameCache().addSpriteFramesWithFile(s_grossiniPlist);var b=cc.SpriteBatchNode.create(s_grossini,50);
this.addChild(b,0);var c=cc.Sprite.createWithSpriteFrame(cc.SpriteFrameCache.sharedSpriteFrameCache().spriteFrameByName("grossini_dance_08.png"));c.setPosition(cc.ccp(a.width/4,a.height/2));c.setAnchorPoint(cc.ccp(0,0));var d=cc.Sprite.createWithSpriteFrame(cc.SpriteFrameCache.sharedSpriteFrameCache().spriteFrameByName("grossini_dance_02.png"));d.setPosition(cc.ccp(20,30));var e=cc.Sprite.createWithSpriteFrame(cc.SpriteFrameCache.sharedSpriteFrameCache().spriteFrameByName("grossini_dance_03.png"));
e.setPosition(cc.ccp(-20,30));var f=cc.Sprite.createWithSpriteFrame(cc.SpriteFrameCache.sharedSpriteFrameCache().spriteFrameByName("grossini_dance_04.png"));f.setPosition(cc.ccp(0,0));f.setScale(0.5);b.addChild(c);c.addChild(d,-2);c.addChild(e,-2);c.addChild(f,3);d=cc.Sprite.create(s_pathR1);d.setScale(0.25);d.setPosition(c.getPosition());this.addChild(d,10);c=cc.Sprite.createWithSpriteFrame(cc.SpriteFrameCache.sharedSpriteFrameCache().spriteFrameByName("grossini_dance_08.png"));c.setPosition(cc.ccp(a.width/
2,a.height/2));c.setAnchorPoint(cc.ccp(0.5,0.5));d=cc.Sprite.createWithSpriteFrame(cc.SpriteFrameCache.sharedSpriteFrameCache().spriteFrameByName("grossini_dance_02.png"));d.setPosition(cc.ccp(20,30));e=cc.Sprite.createWithSpriteFrame(cc.SpriteFrameCache.sharedSpriteFrameCache().spriteFrameByName("grossini_dance_03.png"));e.setPosition(cc.ccp(-20,30));f=cc.Sprite.createWithSpriteFrame(cc.SpriteFrameCache.sharedSpriteFrameCache().spriteFrameByName("grossini_dance_04.png"));f.setPosition(cc.ccp(0,0));
f.setScale(0.5);b.addChild(c);c.addChild(d,-2);c.addChild(e,-2);c.addChild(f,3);d=cc.Sprite.create(s_pathR1);d.setScale(0.25);d.setPosition(c.getPosition());this.addChild(d,10);c=cc.Sprite.createWithSpriteFrame(cc.SpriteFrameCache.sharedSpriteFrameCache().spriteFrameByName("grossini_dance_08.png"));c.setPosition(cc.ccp(a.width/2+a.width/4,a.height/2));c.setAnchorPoint(cc.ccp(1,1));d=cc.Sprite.createWithSpriteFrame(cc.SpriteFrameCache.sharedSpriteFrameCache().spriteFrameByName("grossini_dance_02.png"));
d.setPosition(cc.ccp(20,30));e=cc.Sprite.createWithSpriteFrame(cc.SpriteFrameCache.sharedSpriteFrameCache().spriteFrameByName("grossini_dance_03.png"));e.setPosition(cc.ccp(-20,30));f=cc.Sprite.createWithSpriteFrame(cc.SpriteFrameCache.sharedSpriteFrameCache().spriteFrameByName("grossini_dance_04.png"));f.setPosition(cc.ccp(0,0));f.setScale(0.5);b.addChild(c);c.addChild(d,-2);c.addChild(e,-2);c.addChild(f,3);d=cc.Sprite.create(s_pathR1);d.setScale(0.25);d.setPosition(c.getPosition());this.addChild(d,
10)},title:function(){return"SpriteBatchNode: children + anchor"},onExit:function(){this._super()}}),SpriteBatchNodeChildrenScale=SpriteTestDemo.extend({ctor:function(){var a=cc.Director.sharedDirector().getWinSize();cc.SpriteFrameCache.sharedSpriteFrameCache().addSpriteFramesWithFile(s_grossini_familyPlist);var b=cc.RotateBy.create(10,360),c=cc.RepeatForever.create(b),b=cc.Node.create(),d=cc.Sprite.createWithSpriteFrame(cc.SpriteFrameCache.sharedSpriteFrameCache().spriteFrameByName("grossinis_sister1.png"));
d.setPosition(cc.ccp(a.width/4,a.height/4));d.setScaleX(0.5);d.setScaleY(2);d.runAction(c);c=cc.Sprite.createWithSpriteFrame(cc.SpriteFrameCache.sharedSpriteFrameCache().spriteFrameByName("grossinis_sister2.png"));c.setPosition(cc.ccp(50,0));this.addChild(b);b.addChild(d);d.addChild(c);b=cc.RotateBy.create(10,360);c=cc.RepeatForever.create(b);b=cc.SpriteBatchNode.create(s_grossini_family);d=cc.Sprite.createWithSpriteFrame(cc.SpriteFrameCache.sharedSpriteFrameCache().spriteFrameByName("grossinis_sister1.png"));
d.setPosition(cc.ccp(3*a.width/4,a.height/4));d.setScaleX(0.5);d.setScaleY(2);d.runAction(c);c=cc.Sprite.createWithSpriteFrame(cc.SpriteFrameCache.sharedSpriteFrameCache().spriteFrameByName("grossinis_sister2.png"));c.setPosition(cc.ccp(50,0));this.addChild(b);b.addChild(d);d.addChild(c);b=cc.RotateBy.create(10,360);c=cc.RepeatForever.create(b);b=cc.Node.create();d=cc.Sprite.createWithSpriteFrame(cc.SpriteFrameCache.sharedSpriteFrameCache().spriteFrameByName("grossinis_sister1.png"));d.setPosition(cc.ccp(a.width/
4,2*a.height/3));d.setScaleX(1.5);d.setScaleY(0.5);d.runAction(c);c=cc.Sprite.createWithSpriteFrame(cc.SpriteFrameCache.sharedSpriteFrameCache().spriteFrameByName("grossinis_sister2.png"));c.setPosition(cc.ccp(50,0));this.addChild(b);b.addChild(d);d.addChild(c);b=cc.RotateBy.create(10,360);c=cc.RepeatForever.create(b);b=cc.SpriteBatchNode.create(s_grossini_family);d=cc.Sprite.createWithSpriteFrame(cc.SpriteFrameCache.sharedSpriteFrameCache().spriteFrameByName("grossinis_sister1.png"));d.setPosition(cc.ccp(3*
a.width/4,2*a.height/3));d.setScaleX(1.5);d.setScaleY(0.5);d.runAction(c);c=cc.Sprite.createWithSpriteFrame(cc.SpriteFrameCache.sharedSpriteFrameCache().spriteFrameByName("grossinis_sister2.png"));c.setPosition(cc.ccp(50,0));this.addChild(b);b.addChild(d);d.addChild(c)},title:function(){return"Sprite/BatchNode + child + scale + rot"}}),SpriteChildrenChildren=SpriteTestDemo.extend({ctor:function(){var a=cc.Director.sharedDirector().getWinSize();cc.SpriteFrameCache.sharedSpriteFrameCache().addSpriteFramesWithFile(s_ghostsPlist);
var b=cc.RotateBy.create(10,360),c=cc.RepeatForever.create(b),b=b.reverse(),b=cc.RepeatForever.create(b),d=cc.Node.create();this.addChild(d);var e=cc.Sprite.createWithSpriteFrame(cc.SpriteFrameCache.sharedSpriteFrameCache().spriteFrameByName("father.gif"));e.setPosition(cc.ccp(a.width/2,a.height/2));e.runAction(c.copy());d.addChild(e);var f=e.getContentSize(),c=cc.Sprite.createWithSpriteFrame(cc.SpriteFrameCache.sharedSpriteFrameCache().spriteFrameByName("sister1.gif"));c.setPosition(cc.ccp(-50+f.width/
2,0+f.height/2));c.runAction(b.copy());e.addChild(c);d=c.getContentSize();a=cc.Sprite.createWithSpriteFrame(cc.SpriteFrameCache.sharedSpriteFrameCache().spriteFrameByName("sister2.gif"));a.setPosition(cc.ccp(50+f.width/2,0+f.height/2));a.runAction(b.copy());e.addChild(a);b=c.getContentSize();e=cc.Sprite.createWithSpriteFrame(cc.SpriteFrameCache.sharedSpriteFrameCache().spriteFrameByName("child1.gif"));e.setScale(0.45);e.setPosition(cc.ccp(0+d.width/2,-100+d.height/2));c.addChild(e);f=cc.Sprite.createWithSpriteFrame(cc.SpriteFrameCache.sharedSpriteFrameCache().spriteFrameByName("child1.gif"));
f.setScale(0.45);e.setPosition(cc.ccp(0+d.width/2,100+d.height/2));c.addChild(f);e=cc.Sprite.createWithSpriteFrame(cc.SpriteFrameCache.sharedSpriteFrameCache().spriteFrameByName("child1.gif"));e.setScale(0.45);e.setFlipY(!0);e.setPosition(cc.ccp(0+b.width/2,-100+b.height/2));a.addChild(e);c=cc.Sprite.createWithSpriteFrame(cc.SpriteFrameCache.sharedSpriteFrameCache().spriteFrameByName("child1.gif"));c.setScale(0.45);c.setFlipY(!0);e.setPosition(cc.ccp(0+b.width/2,100+b.height/2));a.addChild(c)},title:function(){return"Sprite multiple levels of children"}}),
SpriteBatchNodeChildrenChildren=SpriteTestDemo.extend({ctor:function(){var a=cc.Director.sharedDirector().getWinSize();cc.SpriteFrameCache.sharedSpriteFrameCache().addSpriteFramesWithFile(s_ghostsPlist);var b=cc.RotateBy.create(10,360),c=cc.RepeatForever.create(b),b=b.reverse(),b=cc.RepeatForever.create(b),d=cc.SpriteBatchNode.create(s_ghosts);this.addChild(d);var e=cc.Sprite.createWithSpriteFrame(cc.SpriteFrameCache.sharedSpriteFrameCache().spriteFrameByName("father.gif"));e.setPosition(cc.ccp(a.width/
2,a.height/2));e.runAction(c.copy());d.addChild(e);var f=e.getContentSize(),c=cc.Sprite.createWithSpriteFrame(cc.SpriteFrameCache.sharedSpriteFrameCache().spriteFrameByName("sister1.gif"));c.setPosition(cc.ccp(-50+f.width/2,0+f.height/2));c.runAction(b.copy());e.addChild(c);d=c.getContentSize();a=cc.Sprite.createWithSpriteFrame(cc.SpriteFrameCache.sharedSpriteFrameCache().spriteFrameByName("sister2.gif"));a.setPosition(cc.ccp(50+f.width/2,0+f.height/2));a.runAction(b.copy());e.addChild(a);b=c.getContentSize();
e=cc.Sprite.createWithSpriteFrame(cc.SpriteFrameCache.sharedSpriteFrameCache().spriteFrameByName("child1.gif"));e.setScale(0.45);e.setPosition(cc.ccp(0+d.width/2,-100+d.height/2));c.addChild(e);f=cc.Sprite.createWithSpriteFrame(cc.SpriteFrameCache.sharedSpriteFrameCache().spriteFrameByName("child1.gif"));f.setScale(0.45);e.setPosition(cc.ccp(0+d.width/2,100+d.height/2));c.addChild(f);e=cc.Sprite.createWithSpriteFrame(cc.SpriteFrameCache.sharedSpriteFrameCache().spriteFrameByName("child1.gif"));e.setScale(0.45);
e.setFlipY(!0);e.setPosition(cc.ccp(0+b.width/2,-100+b.height/2));a.addChild(e);c=cc.Sprite.createWithSpriteFrame(cc.SpriteFrameCache.sharedSpriteFrameCache().spriteFrameByName("child1.gif"));c.setScale(0.45);c.setFlipY(!0);e.setPosition(cc.ccp(0+b.width/2,100+b.height/2));a.addChild(c)},title:function(){return"SpriteBatchNode multiple levels of children"}}),SpriteNilTexture=SpriteTestDemo.extend({ctor:function(){var a=cc.Director.sharedDirector().getWinSize(),b=new cc.Sprite;b.init();b.setTextureRect(cc.RectMake(0,
0,300,300));b.setColor(cc.RED());b.setOpacity(128);b.setPosition(cc.ccp(3*a.width/4,a.height/2));this.addChild(b,100);b=new cc.Sprite;b.init();b.setTextureRect(cc.RectMake(0,0,300,300));b.setColor(cc.BLUE());b.setOpacity(128);b.setPosition(cc.ccp(1*a.width/4,a.height/2));this.addChild(b,100)},title:function(){return"Sprite without texture"},subtitle:function(){return"opacity and color should work"}}),MySprite1=cc.Sprite.extend({_ivar:0,ctor:function(){}});
MySprite1.spriteWithSpriteFrameName=function(a){var a=cc.SpriteFrameCache.sharedSpriteFrameCache().spriteFrameByName(a),b=new MySprite1;b.initWithSpriteFrame(a);return b};var MySprite2=cc.Sprite.extend({_ivar:0,ctor:function(){}});MySprite2.spriteWithFile=function(a){var b=new MySprite2;b.initWithFile(a);return b};
var SpriteSubclass=SpriteTestDemo.extend({ctor:function(){var a=cc.Director.sharedDirector().getWinSize();cc.SpriteFrameCache.sharedSpriteFrameCache().addSpriteFramesWithFile(s_ghostsPlist);var b=cc.SpriteBatchNode.create(s_ghosts),c=MySprite1.spriteWithSpriteFrameName("father.gif");c.setPosition(cc.ccp(1*(a.width/4),a.height/2));b.addChild(c);this.addChild(b);b=MySprite2.spriteWithFile(s_pathGrossini);this.addChild(b);b.setPosition(cc.ccp(3*(a.width/4),a.height/2))},title:function(){return"Sprite subclass"},
subtitle:function(){return"Testing initWithTexture:rect method"}}),AnimationCache=SpriteTestDemo.extend({ctor:function(){cc.SpriteFrameCache.sharedSpriteFrameCache().addSpriteFramesWithFile(s_grossiniPlist);cc.SpriteFrameCache.sharedSpriteFrameCache().addSpriteFramesWithFile(s_grossini_grayPlist);cc.SpriteFrameCache.sharedSpriteFrameCache().addSpriteFramesWithFile(s_grossini_bluePlist);for(var a=[],b="",c=1;15>c;c++)b="grossini_dance_"+(10>c?"0"+c:c)+".png",b=cc.SpriteFrameCache.sharedSpriteFrameCache().spriteFrameByName(b),
a.push(b);a=cc.Animation.create(a,0.2);cc.AnimationCache.sharedAnimationCache().addAnimation(a,"dance");a=[];for(c=1;15>c;c++)b="grossini_dance_gray_"+(10>c?"0"+c:c)+".png",b=cc.SpriteFrameCache.sharedSpriteFrameCache().spriteFrameByName(b),a.push(b);a=cc.Animation.create(a,0.2);cc.AnimationCache.sharedAnimationCache().addAnimation(a,"dance_gray");a=[];for(c=1;4>c;c++)b="grossini_blue_0"+c+".png",b=cc.SpriteFrameCache.sharedSpriteFrameCache().spriteFrameByName(b),a.push(b);a=cc.Animation.create(a,
0.2);cc.AnimationCache.sharedAnimationCache().addAnimation(a,"dance_blue");c=cc.AnimationCache.sharedAnimationCache();b=c.animationByName("dance");a=c.animationByName("dance_gray");c=c.animationByName("dance_blue");b=cc.Animate.create(b);a=cc.Animate.create(a);c=cc.Animate.create(c);a=cc.Sequence.create(b,a,c);c=new cc.Sprite;c.init();b=cc.Director.sharedDirector().getWinSize();c.setPosition(cc.ccp(b.width/2,b.height/2));this.addChild(c);c.runAction(a)},title:function(){return"AnimationCache"},subtitle:function(){return"Sprite should be animated"}}),
SpriteTestScene=TestScene.extend({runThisTest:function(){sceneIdx=-1;MAX_LAYER=48;this.addChild(nextSpriteTestAction());cc.Director.sharedDirector().replaceScene(this)}});var MUSIC_FILE="Resources/background",EFFECT_FILE="Resources/effect2",DenshionTests=[{title:"playBackgroundMusic",playFunc:function(){return new playBackgroundMusic}},{title:"stopBackgroundMusic",playFunc:function(){return new stopBackgroundMusic}},{title:"pauseBackgroundMusic",playFunc:function(){return new pauseBackgroundMusic}},{title:"resumeBackgroundMusic",playFunc:function(){return new resumeBackgroundMusic}},{title:"rewindBackgroundMusic",playFunc:function(){return new rewindBackgroundMusic}},
{title:"isBackgroundMusicPlaying",playFunc:function(){return new isBackgroundMusicPlaying}},{title:"playEffect",playFunc:function(){return new playEffect}},{title:"playEffectRepeatly",playFunc:function(){return new playEffectRepeatly}},{title:"stopEffect",playFunc:function(){return new stopEffect}},{title:"unloadEffect",playFunc:function(){return new unloadEffect}},{title:"addBackgroundMusicVolume",playFunc:function(){return new addBackgroundMusicVolume}},{title:"subBackgroundMusicVolume",playFunc:function(){return new subBackgroundMusicVolume}},
{title:"addEffectsVolume",playFunc:function(){return new addEffectsVolume}},{title:"subEffectsVolume",playFunc:function(){return new subEffectsVolume}},{title:"pauseEffect",playFunc:function(){return new pauseEffect}},{title:"resumeEffect",playFunc:function(){return new resumeEffect}},{title:"pauseAllEffects",playFunc:function(){return new pauseAllEffects}},{title:"resumeAllEffects",playFunc:function(){return new resumeAllEffects}},{title:"stopAllEffects",playFunc:function(){return new stopAllEffects}}];
CocosDenshionTest=cc.Layer.extend({_itmeMenu:null,_beginPos:cc.PointZero(),isMouseDown:!1,_testCount:0,ctor:function(){this._itmeMenu=cc.Menu.create(null);for(var a=cc.Director.sharedDirector().getWinSize(),b=0;b<DenshionTests.length;b++){var c=cc.LabelTTF.create(DenshionTests[b].title,"Arial",24),c=cc.MenuItemLabel.create(c,this,this.menuCallback);this._itmeMenu.addChild(c,b+1E4);c.setPosition(cc.PointMake(a.width/2,a.height-(b+1)*LINE_SPACE))}this._testCount=b;this._itmeMenu.setContentSize(cc.SizeMake(a.width,
(this._testCount+1)*LINE_SPACE));this._itmeMenu.setPosition(cc.PointZero());this.addChild(this._itmeMenu);this.setIsTouchEnabled(!0);cc.AudioManager.sharedEngine().setEffectsVolume(0.5);cc.AudioManager.sharedEngine().setBackgroundMusicVolume(0.5)},menuCallback:function(a){a=a.getZOrder()-1E4;DenshionTests[a].playFunc()},ccTouchesMoved:function(a){if(this.isMouseDown){var a=a[0].locationInView(0),b=a.y-this._beginPos.y,c=this._itmeMenu.getPosition(),b=cc.ccp(c.x,c.y+b),c=cc.Director.sharedDirector().getWinSize();
0>b.y?this._itmeMenu.setPosition(cc.PointZero()):b.y>(this._testCount+1)*LINE_SPACE-c.height?this._itmeMenu.setPosition(cc.ccp(0,(this._testCount+1)*LINE_SPACE-c.height)):(this._itmeMenu.setPosition(b),this._beginPos=cc.ccp(0,a.y))}},ccTouchesBegan:function(a){this.isMouseDown||(this._beginPos=a[0].locationInView(0));this.isMouseDown=!0},ccTouchesEnded:function(){this.isMouseDown=!1},onExit:function(){this._super();cc.AudioManager.sharedEngine().end()}});
CocosDenshionTestScene=TestScene.extend({runThisTest:function(){this.addChild(new CocosDenshionTest);cc.Director.sharedDirector().replaceScene(this)}});
var soundId=null,playBackgroundMusic=function(){cc.Log("play background music");cc.AudioManager.sharedEngine().playBackgroundMusic(MUSIC_FILE,!1)},stopBackgroundMusic=function(){cc.Log("stop background music");cc.AudioManager.sharedEngine().stopBackgroundMusic()},pauseBackgroundMusic=function(){cc.Log("pause background music");cc.AudioManager.sharedEngine().pauseBackgroundMusic()},resumeBackgroundMusic=function(){cc.Log("resume background music");cc.AudioManager.sharedEngine().resumeBackgroundMusic()},
rewindBackgroundMusic=function(){cc.Log("rewind background music");cc.AudioManager.sharedEngine().rewindBackgroundMusic()},isBackgroundMusicPlaying=function(){cc.AudioManager.sharedEngine().isBackgroundMusicPlaying()?cc.Log("background music is playing"):cc.Log("background music is not playing")},playEffect=function(){cc.Log("play effect");soundId=cc.AudioManager.sharedEngine().playEffect(EFFECT_FILE)},playEffectRepeatly=function(){cc.Log("play effect repeatly");soundId=cc.AudioManager.sharedEngine().playEffect(EFFECT_FILE,
!0)},stopEffect=function(){cc.Log("stop effect");cc.AudioManager.sharedEngine().stopEffect(soundId)},unloadEffect=function(){cc.Log("unload effect");cc.AudioManager.sharedEngine().unloadEffect(EFFECT_FILE)},addBackgroundMusicVolume=function(){cc.Log("add bakcground music volume");cc.AudioManager.sharedEngine().setBackgroundMusicVolume(cc.AudioManager.sharedEngine().getBackgroundMusicVolume()+0.1)},subBackgroundMusicVolume=function(){cc.Log("sub backgroud music volume");cc.AudioManager.sharedEngine().setBackgroundMusicVolume(cc.AudioManager.sharedEngine().getBackgroundMusicVolume()-
0.1)},addEffectsVolume=function(){cc.Log("add effects volume");cc.AudioManager.sharedEngine().setEffectsVolume(cc.AudioManager.sharedEngine().getEffectsVolume()+0.1)},subEffectsVolume=function(){cc.Log("sub effects volume");cc.AudioManager.sharedEngine().setEffectsVolume(cc.AudioManager.sharedEngine().getEffectsVolume()-0.1)},pauseEffect=function(){cc.Log("pause effect");cc.AudioManager.sharedEngine().pauseEffect(soundId)},resumeEffect=function(){cc.Log("resume effect");cc.AudioManager.sharedEngine().resumeEffect(soundId)},
pauseAllEffects=function(){cc.Log("pause all effects");cc.AudioManager.sharedEngine().pauseAllEffects()},resumeAllEffects=function(){cc.Log("resume all effects");cc.AudioManager.sharedEngine().resumeAllEffects()},stopAllEffects=function(){cc.Log("stop all effects");cc.AudioManager.sharedEngine().stopAllEffects()};var TAG_SPRITE1=1,TAG_SPRITE2=2,TAG_SPRITE3=3,TAG_SLIDER=4,sceneIdx=-1,MAX_LAYER=9,nextCocosNodeAction=function(){sceneIdx++;sceneIdx%=MAX_LAYER;return createCocosNodeLayer(sceneIdx)},backCocosNodeAction=function(){sceneIdx--;0>sceneIdx&&(sceneIdx+=MAX_LAYER);return createCocosNodeLayer(sceneIdx)},restartCocosNodeAction=function(){return createCocosNodeLayer(sceneIdx)},createCocosNodeLayer=function(a){switch(a){case 0:return new CCNodeTest2;case 1:return new CCNodeTest4;case 2:return new CCNodeTest5;
case 3:return new CCNodeTest6;case 4:return new StressTest1;case 5:return new StressTest2;case 6:return new NodeToWorld;case 7:return new SchedulerTest1;case 8:return new ConvertToNode}return null},TestCocosNodeDemo=cc.Layer.extend({ctor:function(){},title:function(){return"No title"},subtitle:function(){return""},onEnter:function(){this._super();var a=cc.Director.sharedDirector().getWinSize(),b=cc.LabelTTF.create(this.title(),"Arial",32);this.addChild(b,1);b.setPosition(cc.PointMake(a.width/2,a.height-
50));b=this.subtitle();""==!b&&(b=cc.LabelTTF.create(b,"Thonburi",16),this.addChild(b,1),b.setPosition(cc.PointMake(a.width/2,a.height-80)));var b=cc.MenuItemImage.create(s_pathB1,s_pathB2,this,this.backCallback),c=cc.MenuItemImage.create(s_pathR1,s_pathR2,this,this.restartCallback),d=cc.MenuItemImage.create(s_pathF1,s_pathF2,this,this.nextCallback),e=cc.Menu.create(b,c,d);e.setPosition(cc.PointZero());b.setPosition(cc.PointMake(a.width/2-100,30));c.setPosition(cc.PointMake(a.width/2,30));d.setPosition(cc.PointMake(a.width/
2+100,30));this.addChild(e,1)},restartCallback:function(){var a=new CocosNodeTestScene;a.addChild(restartCocosNodeAction());cc.Director.sharedDirector().replaceScene(a)},nextCallback:function(){var a=new CocosNodeTestScene;a.addChild(nextCocosNodeAction());cc.Director.sharedDirector().replaceScene(a)},backCallback:function(){var a=new CocosNodeTestScene;a.addChild(backCocosNodeAction());cc.Director.sharedDirector().replaceScene(a)}}),CCNodeTest2=TestCocosNodeDemo.extend({onEnter:function(){this._super();
var a=cc.Director.sharedDirector().getWinSize(),b=cc.Sprite.create(s_pathSister1),c=cc.Sprite.create(s_pathSister2),d=cc.Sprite.create(s_pathSister1),e=cc.Sprite.create(s_pathSister2);b.setPosition(cc.PointMake(150,a.height/2));c.setPosition(cc.PointMake(a.width-150,a.height/2));this.addChild(b);this.addChild(c);d.setScale(0.25);e.setScale(0.25);b.addChild(d);c.addChild(e);d=cc.RotateBy.create(2,360);e=cc.ScaleBy.create(2,2);a=cc.RepeatForever.create(cc.Sequence.create(d,e,e.reverse()));d=cc.RepeatForever.create(cc.Sequence.create(d.copy(),
e.copy(),e.reverse()));c.setAnchorPoint(cc.PointMake(0,0));b.runAction(a);c.runAction(d)},title:function(){return"anchorPoint and children"}}),SID_DELAY2=1,SID_DELAY4=2,CCNodeTest4=TestCocosNodeDemo.extend({ctor:function(){var a=cc.Sprite.create(s_pathSister1),b=cc.Sprite.create(s_pathSister2),c=cc.Director.sharedDirector().getWinSize();a.setPosition(cc.PointMake(150,c.height/2));b.setPosition(cc.PointMake(c.width-150,c.height/2));this.addChild(a,0,2);this.addChild(b,0,3);this.schedule(this.delay2,
2);this.schedule(this.delay4,4)},delay2:function(){var a=this.getChildByTag(2),b=cc.RotateBy.create(1,360);a.runAction(b)},delay4:function(){this.unschedule(this.delay4);this.removeChildByTag(3,!1)},title:function(){return"tags"}}),CCNodeTest5=TestCocosNodeDemo.extend({ctor:function(){var a=cc.Sprite.create(s_pathSister1),b=cc.Sprite.create(s_pathSister2),c=cc.Director.sharedDirector().getWinSize();a.setPosition(cc.PointMake(150,c.height/2));b.setPosition(cc.PointMake(c.width-150,c.height/2));var c=
cc.RotateBy.create(2,360),d=c.reverse(),c=cc.RepeatForever.create(cc.Sequence.create(c,d)),d=c.copy();c.setTag(101);d.setTag(102);this.addChild(a,0,TAG_SPRITE1);this.addChild(b,0,TAG_SPRITE2);a.runAction(c);b.runAction(d);this.schedule(this.addAndRemove,2)},addAndRemove:function(){var a=this.getChildByTag(TAG_SPRITE1),b=this.getChildByTag(TAG_SPRITE2);this.removeChild(a,!1);this.removeChild(b,!0);this.addChild(a,0,TAG_SPRITE1);this.addChild(b,0,TAG_SPRITE2)},title:function(){return"remove and cleanup"}}),
CCNodeTest6=TestCocosNodeDemo.extend({ctor:function(){var a=cc.Sprite.create(s_pathSister1),b=cc.Sprite.create(s_pathSister1),c=cc.Sprite.create(s_pathSister2),d=cc.Sprite.create(s_pathSister2),e=cc.Director.sharedDirector().getWinSize();a.setPosition(cc.PointMake(150,e.height/2));c.setPosition(cc.PointMake(e.width-150,e.height/2));var e=cc.RotateBy.create(2,360),f=e.reverse(),e=cc.RepeatForever.create(cc.Sequence.create(e,f)),f=e.copy(),g=e.copy(),h=e.copy();this.addChild(a,0,TAG_SPRITE1);a.addChild(b);
this.addChild(c,0,TAG_SPRITE2);c.addChild(d);a.runAction(e);b.runAction(f);c.runAction(g);d.runAction(h);this.schedule(this.addAndRemove,2)},addAndRemove:function(){var a=this.getChildByTag(TAG_SPRITE1),b=this.getChildByTag(TAG_SPRITE2);this.removeChild(a,!1);this.removeChild(b,!0);this.addChild(a,0,TAG_SPRITE1);this.addChild(b,0,TAG_SPRITE2)},title:function(){return"remove/cleanup with children"}}),StressTest1=TestCocosNodeDemo.extend({ctor:function(){var a=cc.Director.sharedDirector().getWinSize(),
b=cc.Sprite.create(s_pathSister1);this.addChild(b,0,TAG_SPRITE1);b.setPosition(cc.PointMake(a.width/2,a.height/2));this.schedule(this.shouldNotCrash,1)},shouldNotCrash:function(){this.unschedule(this.shouldNotCrash);var a=cc.Director.sharedDirector().getWinSize(),b=cc.ParticleSun.create();b.setTexture(cc.TextureCache.sharedTextureCache().addImage(s_fire));b.setPosition(cc.PointMake(a.width/2,a.height/2));this.runAction(cc.Sequence.create(cc.RotateBy.create(2,360),cc.CallFunc.create(this,this.removeMe)));
this.addChild(b)},removeMe:function(a){this._parent.removeChild(a,!0);this.nextCallback(this)},title:function(){return"stress test #1: no crashes"}}),StressTest2=TestCocosNodeDemo.extend({ctor:function(){var a=cc.Director.sharedDirector().getWinSize(),b=cc.Layer.create(),c=cc.Sprite.create(s_pathSister1);c.setPosition(cc.PointMake(80,a.height/2));var d=cc.MoveBy.create(3,cc.PointMake(350,0)),d=cc.EaseInOut.create(d.copy(),2),e=d.reverse(),d=cc.Sequence.create(d,e);c.runAction(cc.RepeatForever.create(d));
b.addChild(c,1);c=cc.ParticleFire.create();c.setTexture(cc.TextureCache.sharedTextureCache().addImage(s_fire));c.setPosition(cc.PointMake(80,a.height/2-50));a=d.copy();c.runAction(cc.RepeatForever.create(a));b.addChild(c,2);this.schedule(this.shouldNotLeak,6);this.addChild(b,0,TAG_SPRITE1)},shouldNotLeak:function(){this.unschedule(this.shouldNotLeak);this.getChildByTag(TAG_SPRITE1).removeAllChildrenWithCleanup(!0)},title:function(){return"stress test #2: no leaks"}}),SchedulerTest1=TestCocosNodeDemo.extend({ctor:function(){var a=
cc.Layer.create();this.addChild(a,0);a.schedule(this.doSomething);a.unschedule(this.doSomething)},doSomething:function(){},title:function(){return"cocosnode scheduler test #1"}}),NodeToWorld=TestCocosNodeDemo.extend({ctor:function(){var a=cc.Sprite.create(s_back3);this.addChild(a,-10);a.setAnchorPoint(cc.PointMake(0,0));var b=a.getContentSize(),c=cc.MenuItemImage.create(s_playNormal,s_playSelect),d=cc.Menu.create(c,null);d.alignItemsVertically();d.setPosition(cc.PointMake(b.width/2,b.height/2));a.addChild(d);
b=cc.RotateBy.create(5,360);b=cc.RepeatForever.create(b);c.runAction(b);c=cc.MoveBy.create(3,cc.PointMake(200,0));b=c.reverse();c=cc.Sequence.create(c,b);c=cc.RepeatForever.create(c);a.runAction(c)},title:function(){return"nodeToParent transform"}}),CameraOrbitTest=TestCocosNodeDemo.extend({ctor:function(){var a=cc.Director.sharedDirector().getWinSize(),b=cc.Sprite.create(s_back3);this.addChild(b,0);b.setPosition(cc.PointMake(a.width/2,a.height/2));b.setOpacity(128);var a=b.getContentSize(),c=cc.Sprite.create(s_pathGrossini);
c.setScale(0.5);b.addChild(c,0);c.setPosition(cc.PointMake(1*(a.width/4),a.height/2));c.getCamera();var d=cc.OrbitCamera.create(2,1,0,0,360,0,0);c.runAction(cc.RepeatForever.create(d));c=cc.Sprite.create(s_pathGrossini);c.setScale(1);b.addChild(c,0);c.setPosition(cc.PointMake(2*(a.width/4),a.height/2));d=cc.OrbitCamera.create(2,1,0,0,360,45,0);c.runAction(cc.RepeatForever.create(d));c=cc.Sprite.create(s_pathGrossini);c.setScale(2);b.addChild(c,0);c.setPosition(cc.PointMake(3*(a.width/4),a.height/
2));c.getContentSize();d=cc.OrbitCamera.create(2,1,0,0,360,90,-45);c.runAction(cc.RepeatForever.create(d));d=cc.OrbitCamera.create(10,1,0,0,360,0,90);b.runAction(cc.RepeatForever.create(d));this.setScale(1)},onEnter:function(){this._super();cc.Director.sharedDirector().setProjection(cc.CCDIRECTOR_PROJECTION_3D)},onExit:function(){cc.Director.sharedDirector().setProjection(cc.CCDIRECTOR_PROJECTION_2D);this._super()},title:function(){return"Camera Orbit test"}}),CameraZoomTest=TestCocosNodeDemo.extend({_z:0,
ctor:function(){var a=cc.Director.sharedDirector().getWinSize(),b=cc.Sprite.create(s_pathGrossini);this.addChild(b,0);b.setPosition(cc.PointMake(1*(a.width/4),a.height/2));b.getCamera().setEyeXYZ(0,0,415);b=cc.Sprite.create(s_pathGrossini);this.addChild(b,0,40);b.setPosition(cc.PointMake(2*(a.width/4),a.height/2));b=cc.Sprite.create(s_pathGrossini);this.addChild(b,0,20);b.setPosition(cc.PointMake(3*(a.width/4),a.height/2));this._z=0;this.scheduleUpdate()},update:function(a){this._z+=100*a;a=this.getChildByTag(20);
a=a.getCamera();a.setEyeXYZ(0,0,this._z);a=this.getChildByTag(40);a=a.getCamera();a.setEyeXYZ(0,0,this._z)},onEnter:function(){this._super();cc.Director.sharedDirector().setProjection(cc.CCDIRECTOR_PROJECTION_3D)},onExit:function(){cc.Director.sharedDirector().setProjection(cc.CCDIRECTOR_PROJECTION_2D);this._super()},title:function(){return"Camera Zoom test"}}),CameraCenterTest=TestCocosNodeDemo.extend({ctor:function(){var a=cc.Director.sharedDirector().getWinSize(),b=new cc.Sprite;b.init();this.addChild(b,
0);b.setPosition(cc.PointMake(1*(a.width/5),1*(a.height/5)));b.setColor(cc.RED());b.setTextureRect(cc.RectMake(0,0,120,50));var c=cc.OrbitCamera.create(10,1,0,0,360,0,0);b.runAction(cc.RepeatForever.create(c));b=new cc.Sprite;b.init();this.addChild(b,0,40);b.setPosition(cc.PointMake(1*(a.width/5),4*(a.height/5)));b.setColor(cc.BLUE());b.setTextureRect(cc.RectMake(0,0,120,50));c=cc.OrbitCamera.create(10,1,0,0,360,0,0);b.runAction(cc.RepeatForever.create(c));b=new cc.Sprite;b.init();this.addChild(b,
0);b.setPosition(cc.PointMake(4*(a.width/5),1*(a.height/5)));b.setColor(cc.YELLOW());b.setTextureRect(cc.RectMake(0,0,120,50));c=cc.OrbitCamera.create(10,1,0,0,360,0,0);b.runAction(cc.RepeatForever.create(c));b=new cc.Sprite;b.init();this.addChild(b,0,40);b.setPosition(cc.PointMake(4*(a.width/5),4*(a.height/5)));b.setColor(cc.GREEN());b.setTextureRect(cc.RectMake(0,0,120,50));c=cc.OrbitCamera.create(10,1,0,0,360,0,0);b.runAction(cc.RepeatForever.create(c));b=new cc.Sprite;b.init();this.addChild(b,
0,40);b.setPosition(cc.PointMake(a.width/2,a.height/2));b.setColor(cc.WHITE());b.setTextureRect(cc.RectMake(0,0,120,50));c=cc.OrbitCamera.create(10,1,0,0,360,0,0);b.runAction(cc.RepeatForever.create(c))},title:function(){return"Camera Center test"},subtitle:function(){return"Sprites should rotate at the same speed"}}),ConvertToNode=TestCocosNodeDemo.extend({ctor:function(){this.setIsTouchEnabled(!0);for(var a=cc.Director.sharedDirector().getWinSize(),b=cc.RotateBy.create(10,360),b=cc.RepeatForever.create(b),
c=0;3>c;c++){var d=cc.Sprite.create(s_pathGrossini);d.setPosition(cc.ccp(a.width/4*(c+1),a.height/2));var e=cc.Sprite.create(s_pathR1);e.setScale(0.25);e.setPosition(d.getPosition());this.addChild(e,10,100+c);switch(c){case 0:d.setAnchorPoint(cc.PointZero());break;case 1:d.setAnchorPoint(cc.ccp(0.5,0.5));break;case 2:d.setAnchorPoint(cc.ccp(1,1))}e.setPosition(d.getPosition());e=b.copy();d.runAction(e);this.addChild(d,c)}},ccTouchesEnded:function(a){for(var b=0;b<a.length;b++)for(var c=a[b],c=c.locationInView(c.view()),
c=cc.Director.sharedDirector().convertToGL(c),d=0;3>d;d++){var e=this.getChildByTag(100+d),f=e.convertToNodeSpaceAR(c),e=e.convertToNodeSpace(c);cc.Log("AR: x="+f.x.toFixed(2)+", y="+f.y.toFixed(2)+" -- Not AR: x="+e.x.toFixed(2)+", y="+e.y.toFixed(2))}},title:function(){return"Convert To Node Space"},subtitle:function(){return"testing convertToNodeSpace / AR. Touch and see console"}}),CocosNodeTestScene=TestScene.extend({runThisTest:function(){sceneIdx=-1;MAX_LAYER=9;this.addChild(nextCocosNodeAction());
cc.Director.sharedDirector().replaceScene(this)}});var RotateWorldTestScene=TestScene.extend({runThisTest:function(){this.addChild(RotateWorldMainLayer.node());this.runAction(cc.RotateBy.create(4,-360));cc.Director.sharedDirector().replaceScene(this)}}),SpriteLayer=cc.Layer.extend({onEnter:function(){this._super();var a,b,c=cc.Director.sharedDirector().getWinSize();a=c.width;b=c.height;var d=cc.Sprite.create(s_pathGrossini),c=cc.Sprite.create(s_pathSister1),e=cc.Sprite.create(s_pathSister2);d.setScale(1.5);c.setScale(1.5);e.setScale(1.5);d.setPosition(cc.PointMake(a/
2,b/2));c.setPosition(cc.PointMake(40,b/2));e.setPosition(cc.PointMake(a-40,b/2));a=cc.RotateBy.create(16,-3600);this.addChild(d);this.addChild(c);this.addChild(e);d.runAction(a);a=cc.JumpBy.create(4,cc.PointMake(-400,0),100,4);d=a.reverse();b=cc.RotateBy.create(4,720);var f=b.reverse();c.runAction(cc.Repeat.create(cc.Sequence.create(d,a,null),5));e.runAction(cc.Repeat.create(cc.Sequence.create(a.copy(),d.copy(),null),5));c.runAction(cc.Repeat.create(cc.Sequence.create(b,f,null),5));e.runAction(cc.Repeat.create(cc.Sequence.create(f.copy(),
b.copy(),null),5))}});SpriteLayer.node=function(){return new SpriteLayer};var TestLayer=cc.Layer.extend({onEnter:function(){this._super();var a,b;b=cc.Director.sharedDirector().getWinSize();a=b.width;b=b.height;var c=cc.LabelTTF.create("cocos2d","Tahoma",64);c.setPosition(cc.PointMake(a/2,b/2));this.addChild(c)}});TestLayer.node=function(){return new TestLayer};
var RotateWorldMainLayer=cc.Layer.extend({onEnter:function(){this._super();var a,b,c=cc.Director.sharedDirector().getWinSize();a=c.width;b=c.height;var c=cc.LayerColor.create(cc.ccc4(0,0,255,255)),d=cc.LayerColor.create(cc.ccc4(255,0,0,255)),e=cc.LayerColor.create(cc.ccc4(0,255,0,255)),f=cc.LayerColor.create(cc.ccc4(255,255,255,255));c.setScale(0.5);c.setPosition(cc.PointMake(-a/4,-b/4));c.addChild(SpriteLayer.node());d.setScale(0.5);d.setPosition(cc.PointMake(a/4,-b/4));e.setScale(0.5);e.setPosition(cc.PointMake(-a/
4,b/4));e.addChild(TestLayer.node());f.setScale(0.5);f.setPosition(cc.PointMake(a/4,b/4));this.addChild(c,-1);this.addChild(f);this.addChild(e);this.addChild(d);a=cc.RotateBy.create(8,720);c.runAction(a);d.runAction(a.copy());e.runAction(a.copy());f.runAction(a.copy())}});RotateWorldMainLayer.node=function(){return new RotateWorldMainLayer};IntervalLayer=cc.Layer.extend({label0:null,label1:null,label2:null,label3:null,label4:null,time0:null,time1:null,time2:null,time3:null,time4:null,ctor:function(){this.time0=this.time1=this.time2=this.time3=this.time4=0;var a=cc.Director.sharedDirector().getWinSize(),b=cc.ParticleSun.create();b.setTexture(cc.TextureCache.sharedTextureCache().addImage(s_fire));b.setPosition(cc.PointMake(a.width-32,a.height-32));b.setTotalParticles(130);b.setLife(0.6);this.addChild(b);this.label0=cc.LabelTTF.create("0",
"Arial",24);this.label1=cc.LabelTTF.create("0","Arial",24);this.label2=cc.LabelTTF.create("0","Arial",24);this.label3=cc.LabelTTF.create("0","Arial",24);this.label4=cc.LabelTTF.create("0","Arial",24);this.scheduleUpdate();this.schedule(this.step1);this.schedule(this.step2,0);this.schedule(this.step3,1);this.schedule(this.step4,2);this.label0.setPosition(cc.PointMake(1*a.width/6,a.height/2));this.label1.setPosition(cc.PointMake(2*a.width/6,a.height/2));this.label2.setPosition(cc.PointMake(3*a.width/
6,a.height/2));this.label3.setPosition(cc.PointMake(4*a.width/6,a.height/2));this.label4.setPosition(cc.PointMake(5*a.width/6,a.height/2));this.addChild(this.label0);this.addChild(this.label1);this.addChild(this.label2);this.addChild(this.label3);this.addChild(this.label4);b=cc.Sprite.create(s_pathGrossini);b.setPosition(cc.PointMake(40,50));var c=cc.JumpBy.create(3,cc.PointMake(a.width-80,0),50,4);this.addChild(b);b.runAction(cc.RepeatForever.create(cc.Sequence.create(c,c.reverse(),null)));b=cc.MenuItemFont.create("Pause",
this,this.onPause);b=cc.Menu.create(b,null);b.setPosition(cc.PointMake(a.width/2,a.height-50));this.addChild(b)},onPause:function(){cc.Director.sharedDirector().isPaused()?cc.Director.sharedDirector().resume():cc.Director.sharedDirector().pause()},onExit:function(){cc.Director.sharedDirector().isPaused()&&cc.Director.sharedDirector().resume();this._super()},step1:function(a){this.time1+=a;this.label1.setString(this.time1.toFixed(1))},step2:function(a){this.time2+=a;this.label2.setString(this.time2.toFixed(1))},
step3:function(a){this.time3+=a;this.label3.setString(this.time3.toFixed(1))},step4:function(a){this.time4+=a;this.label4.setString(this.time4.toFixed(1))},update:function(a){this.time0+=a;this.label0.setString(this.time0.toFixed(1))}});IntervalTestScene=TestScene.extend({runThisTest:function(){this.addChild(new IntervalLayer);cc.Director.sharedDirector().replaceScene(this)}});var TAG_NODE=5560,TAG_GROSSINI=5561,TAG_SEQUENCE=5562,sceneIdx=-1,MAX_LAYER=5,nextActionManagerAction=function(){sceneIdx++;sceneIdx%=MAX_LAYER;return createActionManagerLayer(sceneIdx)},backActionManagerAction=function(){sceneIdx--;0>sceneIdx&&(sceneIdx+=MAX_LAYER);return createActionManagerLayer(sceneIdx)},restartActionManagerAction=function(){return createActionManagerLayer(sceneIdx)},createActionManagerLayer=function(a){switch(a){case 0:return new CrashTest;case 1:return new LogicTest;case 2:return new PauseTest;
case 3:return new RemoveTest;case 4:return new ResumeTest}return null},ActionManagerTest=cc.Layer.extend({_atlas:null,_title:"",ctor:function(){this._super()},title:function(){return"No title"},onEnter:function(){this._super();var a=cc.Director.sharedDirector().getWinSize(),b=cc.LabelTTF.create(this.title(),"Arial",32);this.addChild(b,1);b.setPosition(cc.PointMake(a.width/2,a.height-50));var b=cc.MenuItemImage.create(s_pathB1,s_pathB2,this,this.backCallback),c=cc.MenuItemImage.create(s_pathR1,s_pathR2,
this,this.restartCallback),d=cc.MenuItemImage.create(s_pathF1,s_pathF2,this,this.nextCallback),e=cc.Menu.create(b,c,d);e.setPosition(cc.PointZero());b.setPosition(cc.PointMake(a.width/2-100,30));c.setPosition(cc.PointMake(a.width/2,30));d.setPosition(cc.PointMake(a.width/2+100,30));this.addChild(e,1)},restartCallback:function(){var a=new ActionManagerTestScene;a.addChild(restartActionManagerAction());cc.Director.sharedDirector().replaceScene(a)},nextCallback:function(){var a=new ActionManagerTestScene;
a.addChild(nextActionManagerAction());cc.Director.sharedDirector().replaceScene(a)},backCallback:function(){var a=new ActionManagerTestScene;a.addChild(backActionManagerAction());cc.Director.sharedDirector().replaceScene(a)}}),CrashTest=ActionManagerTest.extend({title:function(){return"Test 1. Should not crash"},onEnter:function(){this._super();var a=cc.Sprite.create(s_pathGrossini);a.setPosition(cc.PointMake(200,200));this.addChild(a,1);a.runAction(cc.RotateBy.create(1.5,90));a.runAction(cc.Sequence.create(cc.DelayTime.create(1.4),
cc.FadeOut.create(1.1)));this.runAction(cc.Sequence.create(cc.DelayTime.create(1.4),cc.CallFunc.create(this,this.removeThis)))},removeThis:function(){this._parent.removeChild(this,!0);this.nextCallback(this)}}),LogicTest=ActionManagerTest.extend({title:function(){return"Logic test"},onEnter:function(){this._super();var a=cc.Sprite.create(s_pathGrossini);this.addChild(a,0,2);a.setPosition(cc.PointMake(200,200));a.runAction(cc.Sequence.create(cc.MoveBy.create(1,cc.PointMake(150,0)),cc.CallFunc.create(this,
this.bugMe)))},bugMe:function(a){a.stopAllActions();a.runAction(cc.ScaleTo.create(2,2))}}),PauseTest=ActionManagerTest.extend({title:function(){return"Pause Test"},onEnter:function(){this._super();var a=cc.Director.sharedDirector().getWinSize(),b=cc.LabelTTF.create("After 5 seconds grossini should move","Thonburi",16);this.addChild(b);b.setPosition(cc.PointMake(a.width/2,245));a=cc.Sprite.create(s_pathGrossini);this.addChild(a,0,TAG_GROSSINI);a.setPosition(cc.PointMake(200,200));b=cc.MoveBy.create(1,
cc.PointMake(150,0));cc.ActionManager.sharedManager().addAction(b,a,!0);this.schedule(this.unpause,3)},unpause:function(){this.unschedule(this.unpause);var a=this.getChildByTag(TAG_GROSSINI);cc.ActionManager.sharedManager().resumeTarget(a)}}),RemoveTest=ActionManagerTest.extend({title:function(){return"Remove Test"},onEnter:function(){this._super();var a=cc.Director.sharedDirector().getWinSize(),b=cc.LabelTTF.create("Should not crash","Thonburi",16);this.addChild(b);b.setPosition(cc.PointMake(a.width/
2,245));a=cc.MoveBy.create(2,cc.PointMake(200,0));b=cc.CallFunc.create(this,this.stopAction);a=cc.Sequence.create(a,b);a.setTag(TAG_SEQUENCE);b=cc.Sprite.create(s_pathGrossini);b.setPosition(cc.PointMake(200,200));this.addChild(b,1,TAG_GROSSINI);b.runAction(a)},stopAction:function(){this.getChildByTag(TAG_GROSSINI).stopActionByTag(TAG_SEQUENCE)}}),ResumeTest=ActionManagerTest.extend({title:function(){return"Resume Test"},onEnter:function(){this._super();var a=cc.Director.sharedDirector().getWinSize(),
b=cc.LabelTTF.create("Grossini only rotate/scale in 3 seconds","Thonburi",16);this.addChild(b);b.setPosition(cc.PointMake(a.width/2,245));b=cc.Sprite.create(s_pathGrossini);this.addChild(b,0,TAG_GROSSINI);b.setPosition(cc.PointMake(a.width/2,a.height/2));b.runAction(cc.ScaleBy.create(2,2));cc.ActionManager.sharedManager().pauseTarget(b);b.runAction(cc.RotateBy.create(2,360));this.schedule(this.resumeGrossini,3)},resumeGrossini:function(){this.unschedule(this.resumeGrossini);var a=this.getChildByTag(TAG_GROSSINI);
cc.ActionManager.sharedManager().resumeTarget(a)}}),ActionManagerTestScene=TestScene.extend({runThisTest:function(){sceneIdx=-1;MAX_LAYER=5;this.addChild(nextActionManagerAction());cc.Director.sharedDirector().replaceScene(this)}});TAG_ACTION1_EASE_ACTIONS=1;TAG_ACTION2_EASE_ACTIONS=2;TAG_SLIDER_EASE_ACTIONS=1;
var EaseActionsTests=[function(){return new SpriteEase},function(){return new SpriteEaseInOut},function(){return new SpriteEaseExponential},function(){return new SpriteEaseExponentialInOut},function(){return new SpriteEaseSine},function(){return new SpriteEaseSineInOut},function(){return new SpriteEaseElastic},function(){return new SpriteEaseElasticInOut},function(){return new SpriteEaseBounce},function(){return new SpriteEaseBounceInOut},function(){return new SpriteEaseBack},function(){return new SpriteEaseBackInOut},
function(){return new SpeedTest},function(){return new SchedulerTest}],s_nEaseActionIdx=-1;function nextEaseAction(){++s_nEaseActionIdx;s_nEaseActionIdx%=EaseActionsTests.length;return EaseActionsTests[s_nEaseActionIdx]()}function backEaseAction(){--s_nEaseActionIdx;0>s_nEaseActionIdx&&(s_nEaseActionIdx+=EaseActionsTests.length);return EaseActionsTests[s_nEaseActionIdx]()}function restartEaseAction(){return EaseActionsTests[s_nEaseActionIdx]()}
var EaseActionsTestScene=TestScene.extend({runThisTest:function(){s_nEaseActionIdx=-1;this.addChild(nextEaseAction());cc.Director.sharedDirector().replaceScene(this)}}),EaseSpriteDemo=cc.Layer.extend({_grossini:null,_tamara:null,_kathia:null,_title:null,title:function(){return"No title"},onEnter:function(){this._super();this._grossini=cc.Sprite.create(s_pathGrossini);this._tamara=cc.Sprite.create(s_pathSister1);this._kathia=cc.Sprite.create(s_pathSister2);this.addChild(this._grossini,3);this.addChild(this._kathia,
2);this.addChild(this._tamara,1);var a=cc.Director.sharedDirector().getWinSize();this._grossini.setPosition(cc.PointMake(60,50));this._kathia.setPosition(cc.PointMake(60,150));this._tamara.setPosition(cc.PointMake(60,250));var b=cc.LabelTTF.create(this.title(),"Arial",32);this.addChild(b);b.setPosition(cc.PointMake(a.width/2,a.height-50));var b=cc.MenuItemImage.create(s_pathB1,s_pathB2,this,this.backCallback),c=cc.MenuItemImage.create(s_pathR1,s_pathR2,this,this.restartCallback),d=cc.MenuItemImage.create(s_pathF1,
s_pathF2,this,this.nextCallback),e=cc.Menu.create(b,c,d,null);e.setPosition(cc.PointZero());b.setPosition(cc.PointMake(a.width/2-100,30));c.setPosition(cc.PointMake(a.width/2,30));d.setPosition(cc.PointMake(a.width/2+100,30));this.addChild(e,1)},restartCallback:function(){var a=new EaseActionsTestScene;a.addChild(restartEaseAction());cc.Director.sharedDirector().replaceScene(a)},nextCallback:function(){var a=new EaseActionsTestScene;a.addChild(nextEaseAction());cc.Director.sharedDirector().replaceScene(a)},
backCallback:function(){var a=new EaseActionsTestScene;a.addChild(backEaseAction());cc.Director.sharedDirector().replaceScene(a)},positionForTwo:function(){this._grossini.setPosition(cc.PointMake(60,120));this._tamara.setPosition(cc.PointMake(60,220));this._kathia.setIsVisible(!1)}}),SpriteEase=EaseSpriteDemo.extend({onEnter:function(){this._super();var a=cc.MoveBy.create(3,cc.PointMake(350,0)),b=a.reverse(),c=cc.EaseIn.create(a.copy(),3),d=c.reverse(),e=cc.EaseOut.create(a.copy(),3),f=e.reverse(),
a=cc.Sequence.create(a,b,null),c=cc.Sequence.create(c,d,null),e=cc.Sequence.create(e,f,null);this._grossini.runAction(cc.RepeatForever.create(a)).setTag(1);this._tamara.runAction(cc.RepeatForever.create(c)).setTag(1);this._kathia.runAction(cc.RepeatForever.create(e)).setTag(1);this.schedule(this.testStopAction,6)},title:function(){return"EaseIn - EaseOut - Stop"},testStopAction:function(){this.unschedule(this.testStopAction);this._tamara.stopActionByTag(1);this._kathia.stopActionByTag(1);this._grossini.stopActionByTag(1)}}),
SpriteEaseInOut=EaseSpriteDemo.extend({onEnter:function(){this._super();var a=cc.MoveBy.create(3,cc.PointMake(350,0)),b=cc.EaseInOut.create(a.copy(),2),c=b.reverse(),d=cc.EaseInOut.create(a.copy(),3),e=d.reverse(),a=cc.EaseInOut.create(a.copy(),4),f=a.reverse(),b=cc.Sequence.create(b,c,null),d=cc.Sequence.create(d,e,null),e=cc.Sequence.create(a,f,null);this._tamara.runAction(cc.RepeatForever.create(b));this._kathia.runAction(cc.RepeatForever.create(d));this._grossini.runAction(cc.RepeatForever.create(e))},
title:function(){return"EaseInOut and rates"}}),SpriteEaseExponential=EaseSpriteDemo.extend({onEnter:function(){this._super();var a=cc.MoveBy.create(3,cc.PointMake(350,0)),b=a.reverse(),c=cc.EaseExponentialIn.create(a.copy()),d=c.reverse(),e=cc.EaseExponentialOut.create(a.copy()),f=e.reverse(),a=cc.Sequence.create(a,b,null),c=cc.Sequence.create(c,d,null),e=cc.Sequence.create(e,f,null);this._grossini.runAction(cc.RepeatForever.create(a));this._tamara.runAction(cc.RepeatForever.create(c));this._kathia.runAction(cc.RepeatForever.create(e))},
title:function(){return"ExpIn - ExpOut actions"}}),SpriteEaseExponentialInOut=EaseSpriteDemo.extend({onEnter:function(){this._super();var a=cc.MoveBy.create(3,cc.PointMake(350,0)),b=a.reverse(),c=cc.EaseExponentialInOut.create(a.copy()),d=c.reverse(),a=cc.Sequence.create(a,b,null),c=cc.Sequence.create(c,d,null);this.positionForTwo();this._grossini.runAction(cc.RepeatForever.create(a));this._tamara.runAction(cc.RepeatForever.create(c))},title:function(){return"EaseExponentialInOut action"}}),SpriteEaseSine=
EaseSpriteDemo.extend({onEnter:function(){this._super();var a=cc.MoveBy.create(3,cc.PointMake(350,0)),b=a.reverse(),c=cc.EaseSineIn.create(a.copy()),d=c.reverse(),e=cc.EaseSineOut.create(a.copy()),f=e.reverse(),a=cc.Sequence.create(a,b,null),c=cc.Sequence.create(c,d,null),e=cc.Sequence.create(e,f,null);this._grossini.runAction(cc.RepeatForever.create(a));this._tamara.runAction(cc.RepeatForever.create(c));this._kathia.runAction(cc.RepeatForever.create(e))},title:function(){return"EaseSineIn - EaseSineOut"}}),
SpriteEaseSineInOut=EaseSpriteDemo.extend({onEnter:function(){this._super();var a=cc.MoveBy.create(3,cc.PointMake(350,0)),b=a.reverse(),c=cc.EaseSineInOut.create(a.copy()),d=c.reverse(),a=cc.Sequence.create(a,b,null),c=cc.Sequence.create(c,d,null);this.positionForTwo();this._grossini.runAction(cc.RepeatForever.create(a));this._tamara.runAction(cc.RepeatForever.create(c))},title:function(){return"EaseSineInOut action"}}),SpriteEaseElastic=EaseSpriteDemo.extend({onEnter:function(){this._super();var a=
cc.MoveBy.create(3,cc.PointMake(350,0)),b=a.reverse(),c=cc.EaseElasticIn.create(a.copy()),d=c.reverse(),e=cc.EaseElasticOut.create(a.copy()),f=e.reverse(),a=cc.Sequence.create(a,b,null),c=cc.Sequence.create(c,d,null),e=cc.Sequence.create(e,f,null);this._grossini.runAction(cc.RepeatForever.create(a));this._tamara.runAction(cc.RepeatForever.create(c));this._kathia.runAction(cc.RepeatForever.create(e))},title:function(){return"Elastic In - Out actions"}}),SpriteEaseElasticInOut=EaseSpriteDemo.extend({onEnter:function(){this._super();
var a=cc.MoveBy.create(3,cc.PointMake(350,0)),b=cc.EaseElasticInOut.create(a.copy(),0.3),c=b.reverse(),d=cc.EaseElasticInOut.create(a.copy(),0.45),e=d.reverse(),a=cc.EaseElasticInOut.create(a.copy(),0.6),f=a.reverse(),b=cc.Sequence.create(b,c,null),d=cc.Sequence.create(d,e,null),e=cc.Sequence.create(a,f,null);this._tamara.runAction(cc.RepeatForever.create(b));this._kathia.runAction(cc.RepeatForever.create(d));this._grossini.runAction(cc.RepeatForever.create(e))},title:function(){return"EaseElasticInOut action"}}),
SpriteEaseBounce=EaseSpriteDemo.extend({onEnter:function(){this._super();var a=cc.MoveBy.create(3,cc.PointMake(350,0)),b=a.reverse(),c=cc.EaseBounceIn.create(a.copy()),d=c.reverse(),e=cc.EaseBounceOut.create(a.copy()),f=e.reverse(),a=cc.Sequence.create(a,b,null),c=cc.Sequence.create(c,d,null),e=cc.Sequence.create(e,f,null);this._grossini.runAction(cc.RepeatForever.create(a));this._tamara.runAction(cc.RepeatForever.create(c));this._kathia.runAction(cc.RepeatForever.create(e))},title:function(){return"Bounce In - Out actions"}}),
SpriteEaseBounceInOut=EaseSpriteDemo.extend({onEnter:function(){this._super();var a=cc.MoveBy.create(3,cc.PointMake(350,0)),b=a.reverse(),c=cc.EaseBounceInOut.create(a.copy()),d=c.reverse(),a=cc.Sequence.create(a,b,null),c=cc.Sequence.create(c,d,null);this.positionForTwo();this._grossini.runAction(cc.RepeatForever.create(a));this._tamara.runAction(cc.RepeatForever.create(c))},title:function(){return"EaseBounceInOut action"}}),SpriteEaseBack=EaseSpriteDemo.extend({onEnter:function(){this._super();
var a=cc.MoveBy.create(3,cc.PointMake(350,0)),b=a.reverse(),c=cc.EaseBackIn.create(a.copy()),d=c.reverse(),e=cc.EaseBackOut.create(a.copy()),f=e.reverse(),a=cc.Sequence.create(a,b,null),c=cc.Sequence.create(c,d,null),e=cc.Sequence.create(e,f,null);this._grossini.runAction(cc.RepeatForever.create(a));this._tamara.runAction(cc.RepeatForever.create(c));this._kathia.runAction(cc.RepeatForever.create(e))},title:function(){return"Back In - Out actions"}}),SpriteEaseBackInOut=EaseSpriteDemo.extend({onEnter:function(){this._super();
var a=cc.MoveBy.create(3,cc.PointMake(350,0)),b=a.reverse(),c=cc.EaseBackInOut.create(a.copy()),d=c.reverse(),a=cc.Sequence.create(a,b,null),c=cc.Sequence.create(c,d,null);this.positionForTwo();this._grossini.runAction(cc.RepeatForever.create(a));this._tamara.runAction(cc.RepeatForever.create(c))},title:function(){return"EaseBackInOut action"}}),SpeedTest=EaseSpriteDemo.extend({onEnter:function(){this._super();var a=cc.JumpBy.create(4,cc.PointMake(-400,0),100,4),b=a.reverse(),c=cc.RotateBy.create(4,
720),d=c.reverse(),a=cc.Sequence.create(b,a,null),c=cc.Sequence.create(c,d,null),c=cc.Spawn.create(a,c,null),c=cc.Speed.create(cc.RepeatForever.create(c),1);c.setTag(TAG_ACTION1_EASE_ACTIONS);d=c.copy();a=c.copy();d.setTag(TAG_ACTION1_EASE_ACTIONS);a.setTag(TAG_ACTION1_EASE_ACTIONS);this._grossini.runAction(d);this._tamara.runAction(a);this._kathia.runAction(c);this.schedule(this.altertime,1)},title:function(){return"Speed action"},altertime:function(){var a=this._grossini.getActionByTag(TAG_ACTION1_EASE_ACTIONS),
b=this._tamara.getActionByTag(TAG_ACTION1_EASE_ACTIONS),c=this._kathia.getActionByTag(TAG_ACTION1_EASE_ACTIONS);a.setSpeed(2*cc.RANDOM_0_1());b.setSpeed(2*cc.RANDOM_0_1());c.setSpeed(2*cc.RANDOM_0_1())}}),SchedulerTest=EaseSpriteDemo.extend({onEnter:function(){this._super();var a=cc.JumpBy.create(4,cc.PointMake(-400,0),100,4),b=a.reverse(),c=cc.RotateBy.create(4,720),d=c.reverse(),a=cc.Sequence.create(b,a,null),c=cc.Sequence.create(c,d,null),c=cc.Spawn.create(a,c,null),c=cc.RepeatForever.create(c),
d=c.copy(),a=c.copy();this._grossini.runAction(cc.Speed.create(c,0.5));this._tamara.runAction(cc.Speed.create(d,1.5));this._kathia.runAction(cc.Speed.create(a,1));c=new cc.ParticleFireworks;c.initWithTotalParticles(250);c.setTexture(cc.TextureCache.sharedTextureCache().addImage("Resources/Images/fire.png"));this.addChild(c)},title:function(){return"Scheduler scaleTime Test"}});TAG_NODE=9960;TAG_GROSSINI=9961;sceneIdx=-1;MAX_LAYER=2;function createParallaxTestLayer(a){switch(a){case 0:return new Parallax1;case 1:return new Parallax2}return null}function nextParallaxAction(){sceneIdx++;sceneIdx%=MAX_LAYER;return createParallaxTestLayer(sceneIdx)}function backParallaxAction(){sceneIdx--;var a=MAX_LAYER;0>sceneIdx&&(sceneIdx+=a);return createParallaxTestLayer(sceneIdx)}function restartParallaxAction(){return createParallaxTestLayer(sceneIdx)}
ParallaxDemo=cc.Layer.extend({_atlas:null,ctor:function(){},title:function(){return"No title"},onEnter:function(){this._super();var a=cc.Director.sharedDirector().getWinSize(),b=cc.LabelTTF.create(this.title(),"Arial",28);this.addChild(b,1);b.setPosition(cc.ccp(a.width/2,a.height-50));var b=cc.MenuItemImage.create(s_pathB1,s_pathB2,this,this.backCallback),c=cc.MenuItemImage.create(s_pathR1,s_pathR2,this,this.restartCallback),d=cc.MenuItemImage.create(s_pathF1,s_pathF2,this,this.nextCallback),e=cc.Menu.create(b,
c,d,null);e.setPosition(cc.PointZero());b.setPosition(cc.ccp(a.width/2-100,30));c.setPosition(cc.ccp(a.width/2,30));d.setPosition(cc.ccp(a.width/2+100,30));this.addChild(e,1)},restartCallback:function(){var a=new ParallaxTestScene;a.addChild(restartParallaxAction());cc.Director.sharedDirector().replaceScene(a)},nextCallback:function(){var a=new ParallaxTestScene;a.addChild(nextParallaxAction());cc.Director.sharedDirector().replaceScene(a)},backCallback:function(){var a=new ParallaxTestScene;a.addChild(backParallaxAction());
cc.Director.sharedDirector().replaceScene(a)}});
Parallax1=ParallaxDemo.extend({_root:null,_target:null,_streak:null,ctor:function(){var a=cc.Sprite.create(s_power);a.setScale(0.5);a.setAnchorPoint(cc.ccp(0,0));var b=cc.TMXTiledMap.create("Resources/TileMaps/orthogonal-test2.tmx");b.setAnchorPoint(cc.ccp(0,0));var c=cc.Sprite.create(s_back);c.setAnchorPoint(cc.ccp(0,0));var d=cc.ParallaxNode.create();d.addChild(c,-1,cc.ccp(0.4,0.5),cc.PointZero());d.addChild(b,1,cc.ccp(2.2,1),cc.ccp(0,0));d.addChild(a,2,cc.ccp(3,2.5),cc.ccp(0,0));var a=cc.MoveBy.create(4,
cc.ccp(0,100)),b=a.reverse(),c=cc.MoveBy.create(8,cc.ccp(200,0)),e=c.reverse(),a=cc.Sequence.create(a,c,b,e,null);d.runAction(cc.RepeatForever.create(a));this.addChild(d)},title:function(){return"Parallax: parent and 3 children"}});
Parallax2=ParallaxDemo.extend({_root:null,_target:null,_streak:null,ctor:function(){this.setIsTouchEnabled(!0);var a=cc.Sprite.create(s_power);a.setScale(0.5);a.setAnchorPoint(cc.ccp(0,0));var b=cc.TMXTiledMap.create("Resources/TileMaps/orthogonal-test2.tmx");b.setAnchorPoint(cc.ccp(0,0));var c=cc.Sprite.create(s_back);c.setAnchorPoint(cc.ccp(0,0));var d=cc.ParallaxNode.create();d.addChild(c,-1,cc.ccp(0.4,0.5),cc.PointZero());d.addChild(b,1,cc.ccp(1,1),cc.ccp(0,0));d.addChild(a,2,cc.ccp(3,2.5),cc.ccp(0,
0));this.addChild(d,0,TAG_NODE)},registerWithTouchDispatcher:function(){cc.TouchDispatcher.sharedDispatcher().addTargetedDelegate(this,0,!0)},ccTouchBegan:function(){return!0},ccTouchEnded:function(){this._prevLocation=null},ccTouchCancelled:function(){},_prevLocation:null,ccTouchMoved:function(a){if(null==this._prevLocation)this._prevLocation=a.locationInView(a.view());else{var b=a.locationInView(a.view()),a=cc.ccpSub(b,this._prevLocation);this._prevLocation=cc.ccp(b.x,b.y);var b=this.getChildByTag(TAG_NODE),
c=b.getPosition();b.setPosition(cc.ccpAdd(c,a))}},title:function(){return"Parallax: drag screen"}});ParallaxTestScene=TestScene.extend({runThisTest:function(){sceneIdx=-1;MAX_LAYER=2;this.addChild(nextParallaxAction());cc.Director.sharedDirector().replaceScene(this)}});var MAX_LAYER=1,sceneIdx=-1,currentOrientation=cc.DEVICE_ORIENTATION_PORTRAIT;function createTestCaseLayer(a){switch(a){case 0:return a=new Director1,a.init(),a;default:return null}}function nextDirectorTestCase(){sceneIdx++;sceneIdx%=MAX_LAYER;return createTestCaseLayer(sceneIdx)}function backDirectorTestCase(){sceneIdx--;0>sceneIdx&&(sceneIdx+=MAX_LAYER);return createTestCaseLayer(sceneIdx)}function restartDirectorTestCase(){return createTestCaseLayer(sceneIdx)}
DirectorTest=cc.Layer.extend({init:function(){var a=!1;if(this._super()){var a=cc.Director.sharedDirector().getWinSize(),b=cc.LabelTTF.create(this.title(),"Arial",26);this.addChild(b,1);b.setPosition(cc.ccp(a.width/2,a.height-50));b=this.subtitle();b.length&&(b=cc.LabelTTF.create(b,"Thonburi",16),this.addChild(b,1),b.setPosition(cc.ccp(a.width/2,a.height-80)));a=!0}return a},restartCallback:function(){var a=new DirectorTestScene;a.addChild(restartDirectorTestCase());cc.Director.sharedDirector().replaceScene(a)},
nextCallback:function(){var a=new DirectorTestScene;a.addChild(nextDirectorTestCase());cc.Director.sharedDirector().replaceScene(a)},backCallback:function(){var a=new DirectorTestScene;a.addChild(backDirectorTestCase());cc.Director.sharedDirector().replaceScene(a)},title:function(){return"No title"},subtitle:function(){return""}});
Director1=DirectorTest.extend({init:function(){var a=!1;if(this._super()){this.setIsTouchEnabled(!0);var a=cc.Director.sharedDirector().getWinSize(),b=cc.MenuItemFont.create("Rotate Device",this,this.rotateDevice),b=cc.Menu.create(b,null);b.setPosition(cc.ccp(a.width/2,a.height/2));this.addChild(b);a=!0}return a},newOrientation:function(){switch(currentOrientation){case cc.DEVICE_ORIENTATION_LANDSCAPE_LEFT:currentOrientation=cc.DEVICE_ORIENTATION_PORTRAIT;break;case cc.DEVICE_ORIENTATION_PORTRAIT:currentOrientation=
cc.DEVICE_ORIENTATION_LANDSCAPE_RIGHT;break;case cc.DEVICE_ORIENTATION_LANDSCAPE_RIGHT:currentOrientation=cc.DEVICE_ORIENTATION_PORTRAIT_UPSIDE_DOWN;break;case cc.DEVICE_ORIENTATION_PORTRAIT_UPSIDE_DOWN:currentOrientation=cc.DEVICE_ORIENTATION_LANDSCAPE_LEFT}cc.Director.sharedDirector().setDeviceOrientation(currentOrientation)},rotateDevice:function(){this.newOrientation();this.restartCallback(null)},ccTouchesEnded:function(a){var b;if(!(0>=a.length))for(var c=0;c<a.length;c++){b=a[c];if(!b)break;
b=b.locationInView(b.view());var d=cc.Director.sharedDirector(),d=d.convertToUI(d.convertToGL(b));cc.Log("("+b.x+","+b.y+") ==( "+d.x+","+d.y+")")}},title:function(){return"Testing conversion"},subtitle:function(){return"Tap screen and see the debug console"}});
DirectorTestScene=TestScene.extend({runThisTest:function(){MAX_LAYER=1;currentOrientation=cc.DEVICE_ORIENTATION_PORTRAIT;this.addChild(nextDirectorTestCase());cc.Director.sharedDirector().replaceScene(this)},MainMenuCallback:function(a){cc.Director.sharedDirector().setDeviceOrientation(cc.DEVICE_ORIENTATION_PORTRAIT);this._super(a)}});var ITEM_TAG_BASIC=1E3,nCurCase=0,PerformanceTests=["PerformanceNodeChildrenTest","PerformanceParticleTest","PerformanceSpriteTest","PerformanceTextureTest","PerformanceTouchesTest"],PerformanceMainLayer=cc.Layer.extend({onEnter:function(){this._super();var a=cc.Director.sharedDirector().getWinSize(),b=cc.Menu.create(null);b.setPosition(cc.PointZero());cc.MenuItemFont.setFontName("Arial");cc.MenuItemFont.setFontSize(24);for(var c=0;c<PerformanceTests.length;c++){var d=cc.MenuItemFont.create(PerformanceTests[c],
this,this.menuCallback);d.setPosition(cc.ccp(a.width/2,a.height-(c+1)*LINE_SPACE));b.addChild(d,ITEM_TAG_BASIC+c)}this.addChild(b)},menuCallback:function(a){switch(a.getZOrder()-ITEM_TAG_BASIC){case 0:runNodeChildrenTest();break;case 1:runParticleTest();break;case 2:runSpriteTest();break;case 3:runTextureTest();break;case 4:runTouchesTest()}}}),PerformBasicLayer=cc.Layer.extend({_controlMenuVisible:!0,_maxCases:1,_curCase:0,ctor:function(){this._curCase=nCurCase},onEnter:function(){this._super();
var a=cc.Director.sharedDirector().getWinSize();cc.MenuItemFont.setFontName("Arial");cc.MenuItemFont.setFontSize(24);var b=cc.MenuItemFont.create("Back",this,this.toMainLayer);b.setPosition(cc.ccp(a.width-50,25));b=cc.Menu.create(b,null);b.setPosition(cc.PointZero());if(this._controlMenuVisible){var c=cc.MenuItemImage.create(s_pathB1,s_pathB2,this,this.backCallback),d=cc.MenuItemImage.create(s_pathR1,s_pathR2,this,this.restartCallback),e=cc.MenuItemImage.create(s_pathF1,s_pathF2,this,this.nextCallback);
c.setPosition(cc.ccp(a.width/2-100,30));d.setPosition(cc.ccp(a.width/2,30));e.setPosition(cc.ccp(a.width/2+100,30));b.addChild(c,ITEM_TAG_BASIC);b.addChild(d,ITEM_TAG_BASIC);b.addChild(e,ITEM_TAG_BASIC)}this.addChild(b)},restartCallback:function(){this.showCurrentTest()},nextCallback:function(){this._curCase++;nCurCase=this._curCase%=this._maxCases;this.showCurrentTest()},backCallback:function(){this._curCase--;0>this._curCase&&(this._curCase+=this._maxCases);nCurCase=this._curCase;this.showCurrentTest()},
showCurrentTest:function(){},toMainLayer:function(){(new PerformanceTestScene).runThisTest()}}),PerformanceTestScene=TestScene.extend({runThisTest:function(){this.addChild(new PerformanceMainLayer);cc.Director.sharedDirector().replaceScene(this)}});var MAX_SPRITES=1E3,SPRITES_INCREASE=50,TAG_INFO_LAYER=1,TAG_MAIN_LAYER=2,TAG_SPRITE_MENU_LAYER=MAX_SPRITES+1E3,s_nSpriteCurCase=0,SubTest=cc.Class.extend({_subtestNumber:null,_batchNode:null,_parent:null,removeByTag:function(a){switch(this._subtestNumber){case 1:case 4:case 7:this._parent.removeChildByTag(a+100,!0);break;case 2:case 3:case 5:case 6:case 8:case 9:this._batchNode.removeChildAtIndex(a,!0)}},createSpriteWithTag:function(a){cc.Texture2D.setDefaultAlphaPixelFormat(cc.CCTEXTURE_2D_PIXEL_FORMAT_RGBA8888);
var b=null;switch(this._subtestNumber){case 1:b=cc.Sprite.create("Resources/Images/grossinis_sister1.png");this._parent.addChild(b,0,a+100);break;case 2:case 3:b=cc.Sprite.createWithBatchNode(this._batchNode,cc.RectMake(0,0,52,139));this._batchNode.addChild(b,0,a+100);break;case 4:b=parseInt(14*cc.RANDOM_0_1())+1;b=10>b?"0"+b:b.toString();b=cc.Sprite.create("Resources/Images/grossini_dance_"+b+".png");this._parent.addChild(b,0,a+100);break;case 5:case 6:var b=0|14*cc.RANDOM_0_1(),c,b=cc.Sprite.createWithBatchNode(this._batchNode,
cc.RectMake(85*(b%5),121*(0|b/5),85,121));this._batchNode.addChild(b,0,a+100);break;case 7:c=0|64*cc.RANDOM_0_1();b=parseInt(c/8);c=parseInt(c%8);b=cc.Sprite.create("Resources/Images/sprites_test/sprite-"+c+"-"+b+".png");this._parent.addChild(b,0,a+100);break;case 8:case 9:c=0|64*cc.RANDOM_0_1(),b=cc.Sprite.createWithBatchNode(this._batchNode,cc.RectMake(32*(c%8),32*(0|c/8),32,32)),this._batchNode.addChild(b,0,a+100)}cc.Texture2D.setDefaultAlphaPixelFormat(cc.CCTEXTURE_2D_PIXEL_FORMAT_DEFAULT);return b},
initWithSubTest:function(a,b){this._subtestNumber=a;this._parent=b;this._batchNode=null;var c=cc.TextureCache.sharedTextureCache();c.removeTexture(c.addImage("Resources/Images/grossinis_sister1.png"));c.removeTexture(c.addImage("Resources/Images/grossini_dance_atlas.png"));c.removeTexture(c.addImage("Resources/Images/spritesheet1.png"));switch(this._subtestNumber){case 2:cc.Texture2D.setDefaultAlphaPixelFormat(cc.CCTEXTURE_2D_PIXEL_FORMAT_RGBA8888);this._batchNode=cc.SpriteBatchNode.create("Resources/Images/grossinis_sister1.png",
100);b.addChild(this._batchNode,0);break;case 3:cc.Texture2D.setDefaultAlphaPixelFormat(cc.CCTEXTURE_2D_PIXEL_FORMAT_RGBA4444);this._batchNode=cc.SpriteBatchNode.create("Resources/Images/grossinis_sister1.png",100);b.addChild(this._batchNode,0);break;case 5:cc.Texture2D.setDefaultAlphaPixelFormat(cc.CCTEXTURE_2D_PIXEL_FORMAT_RGBA8888);this._batchNode=cc.SpriteBatchNode.create("Resources/Images/grossini_dance_atlas.png",100);b.addChild(this._batchNode,0);break;case 6:cc.Texture2D.setDefaultAlphaPixelFormat(cc.CCTEXTURE_2D_PIXEL_FORMAT_RGBA4444);
this._batchNode=cc.SpriteBatchNode.create("Resources/Images/grossini_dance_atlas.png",100);b.addChild(this._batchNode,0);break;case 8:cc.Texture2D.setDefaultAlphaPixelFormat(cc.CCTEXTURE_2D_PIXEL_FORMAT_RGBA8888);this._batchNode=cc.SpriteBatchNode.create("Resources/Images/spritesheet1.png",100);b.addChild(this._batchNode,0);break;case 9:cc.Texture2D.setDefaultAlphaPixelFormat(cc.CCTEXTURE_2D_PIXEL_FORMAT_RGBA4444),this._batchNode=cc.SpriteBatchNode.create("Resources/Images/spritesheet1.png",100),
b.addChild(this._batchNode,0)}cc.Texture2D.setDefaultAlphaPixelFormat(cc.CCTEXTURE_2D_PIXEL_FORMAT_DEFAULT)}}),SpriteMenuLayer=PerformBasicLayer.extend({_maxCases:7,showCurrentTest:function(){var a=null,b=this.getParent(),c=b.getSubTestNum(),b=b.getNodesNum();switch(this._curCase){case 0:a=new SpritePerformTest1;break;case 1:a=new SpritePerformTest2;break;case 2:a=new SpritePerformTest3;break;case 3:a=new SpritePerformTest4;break;case 4:a=new SpritePerformTest5;break;case 5:a=new SpritePerformTest6;
break;case 6:a=new SpritePerformTest7}s_nSpriteCurCase=this._curCase;a&&(a.initWithSubTest(c,b),cc.Director.sharedDirector().replaceScene(a))}}),SpriteMainScene=cc.Scene.extend({_lastRenderedCount:null,_quantityNodes:null,_subTest:null,_subtestNumber:1,title:function(){return"No title"},initWithSubTest:function(a,b){this._subtestNumber=a;this._subTest=new SubTest;this._subTest.initWithSubTest(a,this);var c=cc.Director.sharedDirector().getWinSize();this._quantityNodes=this._lastRenderedCount=0;var d=
cc.LabelTTF.create(this.title(),"Arial",40);this.addChild(d,1);d.setPosition(cc.ccp(c.width/2,c.height-32));d.setColor(cc.ccc3(255,255,40));cc.MenuItemFont.setFontSize(65);d=cc.MenuItemFont.create(" - ",this,this.onDecrease);d.setColor(cc.ccc3(0,200,20));var e=cc.MenuItemFont.create(" + ",this,this.onIncrease);e.setColor(cc.ccc3(0,200,20));d=cc.Menu.create(d,e,null);d.alignItemsHorizontally();d.setPosition(cc.ccp(c.width/2,c.height-65));this.addChild(d,1);d=cc.LabelTTF.create("0 nodes","Marker Felt",
30);d.setColor(cc.ccc3(0,200,20));d.setPosition(cc.ccp(c.width/2,c.height-90));this.addChild(d,1,TAG_INFO_LAYER);d=new SpriteMenuLayer(!0,7,s_nSpriteCurCase);this.addChild(d,1,TAG_SPRITE_MENU_LAYER);cc.MenuItemFont.setFontSize(32);d=cc.Menu.create(null);for(e=1;9>=e;++e){var f=cc.MenuItemFont.create(e.toString(),this,this.testNCallback);f.setTag(e);d.addChild(f,10);3>=e?f.setColor(cc.ccc3(200,20,20)):6>=e?f.setColor(cc.ccc3(0,200,20)):f.setColor(cc.ccc3(0,20,200))}d.alignItemsHorizontally();d.setPosition(cc.ccp(c.width/
2,80));for(this.addChild(d,2);this._quantityNodes<b;)this.onIncrease(this)},updateNodes:function(){if(this._quantityNodes!=this._lastRenderedCount){var a=this._quantityNodes+" nodes";this.getChildByTag(TAG_INFO_LAYER).setString(a);this._lastRenderedCount=this._quantityNodes}},testNCallback:function(a){this._subtestNumber=a.getTag();this.getChildByTag(TAG_SPRITE_MENU_LAYER).restartCallback(a)},onIncrease:function(){if(!(this._quantityNodes>=MAX_SPRITES)){for(var a=0;a<SPRITES_INCREASE;a++)this.doTest(this._subTest.createSpriteWithTag(this._quantityNodes)),
this._quantityNodes++;this.updateNodes()}},onDecrease:function(){if(!(0>=this._quantityNodes)){for(var a=0;a<SPRITES_INCREASE;a++)this._quantityNodes--,this._subTest.removeByTag(this._quantityNodes);this.updateNodes()}},doTest:function(){},getSubTestNum:function(){return this._subtestNumber},getNodesNum:function(){return this._quantityNodes}});
function performanceActions(a){var b=cc.Director.sharedDirector().getWinSize();a.setPosition(cc.ccp(parseInt(Math.random()*b.width),parseInt(Math.random()*b.height)));var b=0.5+1E3*Math.random()/500,b=cc.RotateBy.create(b,360*cc.RANDOM_0_1()),c=b.reverse(),b=cc.RepeatForever.create(cc.Sequence.create(b,c,null));a.runAction(b);b=0.5+1E3*Math.random()/500;b=cc.ScaleBy.create(b,0.5,0.5);b=cc.RepeatForever.create(cc.Sequence._actionOneTwo(b,b.reverse()));a.runAction(b)}
function performanceActions20(a){var b=cc.Director.sharedDirector().getWinSize();0.2>cc.RANDOM_0_1()?a.setPosition(cc.ccp(parseInt(Math.random()*b.width),parseInt(Math.random()*b.height))):a.setPosition(cc.ccp(-1E3,-1E3));var b=0.5+1E3*Math.random()/500,b=cc.RotateBy.create(b,360*cc.RANDOM_0_1()),c=b.reverse(),b=cc.RepeatForever.create(cc.Sequence.create(b,c,null));a.runAction(b);b=0.5+1E3*Math.random()/500;b=cc.ScaleBy.create(b,0.5,0.5);b=cc.RepeatForever.create(cc.Sequence._actionOneTwo(b,b.reverse()));
a.runAction(b)}function performanceRotationScale(a){var b=cc.Director.sharedDirector().getWinSize();a.setPosition(cc.ccp(parseInt(Math.random()*b.width),parseInt(Math.random()*b.height)));a.setRotation(360*cc.RANDOM_0_1());a.setScale(2*cc.RANDOM_0_1())}function performancePosition(a){var b=cc.Director.sharedDirector().getWinSize();a.setPosition(cc.ccp(parseInt(Math.random()*b.width),parseInt(Math.random()*b.height)))}
function performanceout20(a){var b=cc.Director.sharedDirector().getWinSize();0.2>cc.RANDOM_0_1()?a.setPosition(cc.ccp(parseInt(Math.random()*b.width),parseInt(Math.random()*b.height))):a.setPosition(cc.ccp(-1E3,-1E3))}function performanceOut100(a){a.setPosition(cc.ccp(-1E3,-1E3))}function performanceScale(a){var b=cc.Director.sharedDirector().getWinSize();a.setPosition(cc.ccp(parseInt(Math.random()*b.width),parseInt(Math.random()*b.height)));a.setScale(100*cc.RANDOM_0_1()/50)}
var SpritePerformTest1=SpriteMainScene.extend({doTest:function(a){performancePosition(a)},title:function(){return"A ("+this._subtestNumber+") position"}}),SpritePerformTest2=SpriteMainScene.extend({doTest:function(a){performanceScale(a)},title:function(){return"B ("+this._subtestNumber+") scale"}}),SpritePerformTest3=SpriteMainScene.extend({doTest:function(a){performanceRotationScale(a)},title:function(){return"C ("+this._subtestNumber+") scale + rot"}}),SpritePerformTest4=SpriteMainScene.extend({doTest:function(a){performanceOut100(a)},
title:function(){return"D ("+this._subtestNumber+") 100% out"}}),SpritePerformTest5=SpriteMainScene.extend({doTest:function(a){performanceout20(a)},title:function(){return"E ("+this._subtestNumber+") 80% out"}}),SpritePerformTest6=SpriteMainScene.extend({doTest:function(a){performanceActions(a)},title:function(){return"F ("+this._subtestNumber+") actions"}}),SpritePerformTest7=SpriteMainScene.extend({doTest:function(a){performanceActions20(a)},title:function(){return"G ("+this._subtestNumber+") actions 80% out"}});
function runSpriteTest(){var a=new SpritePerformTest1;a.initWithSubTest(1,50);cc.Director.sharedDirector().replaceScene(a)};var TAG_PARTICLE_SYSTEM=3,TAG_LABEL_ATLAS=4,MAX_PARTICLES=1E3,PARTICLE_NODES_INCREASE=50,s_nParCurIdx=0,TAG_PARTICLE_MENU_LAYER=1E3,ParticleMenuLayer=PerformBasicLayer.extend({_maxCases:4,showCurrentTest:function(){var a=this.getParent(),b=a.getSubTestNum(),a=a.getParticlesNum(),c=null;switch(this._curCase){case 0:c=new ParticlePerformTest1;break;case 1:c=new ParticlePerformTest2;break;case 2:c=new ParticlePerformTest3;break;case 3:c=new ParticlePerformTest4}s_nParCurIdx=this._curCase;c&&(c.initWithSubTest(b,
a),cc.Director.sharedDirector().replaceScene(c))}}),ParticleMainScene=cc.Scene.extend({_lastRenderedCount:null,_quantityParticles:null,_subtestNumber:null,initWithSubTest:function(a,b){this._subtestNumber=a;var c=cc.Director.sharedDirector().getWinSize();this._lastRenderedCount=0;this._quantityParticles=b;cc.MenuItemFont.setFontSize(65);var d=cc.MenuItemFont.create(" - ",this,this.onDecrease);d.setColor(cc.ccc3(0,200,20));var e=cc.MenuItemFont.create(" + ",this,this.onIncrease);e.setColor(cc.ccc3(0,
200,20));d=cc.Menu.create(d,e,null);d.alignItemsHorizontally();d.setPosition(cc.ccp(c.width/2,c.height/2+15));this.addChild(d,1);d=cc.LabelTTF.create("0 nodes","Marker Felt",30);d.setColor(cc.ccc3(0,200,20));d.setPosition(cc.ccp(c.width/2,c.height-90));this.addChild(d,1,TAG_INFO_LAYER);d=cc.LabelTTF.create("0000","Marker Felt",30);this.addChild(d,0,TAG_LABEL_ATLAS);d.setPosition(cc.ccp(c.width-66,50));d=new ParticleMenuLayer(!0,4,s_nParCurIdx);this.addChild(d,1,TAG_PARTICLE_MENU_LAYER);cc.MenuItemFont.setFontSize(40);
d=cc.Menu.create(null);for(e=1;3>=e;++e){var f=cc.MenuItemFont.create(e.toString(),this,this.testNCallback);f.setTag(e);d.addChild(f,10);1>=e?f.setColor(cc.ccc3(200,20,20)):f.setColor(cc.ccc3(0,200,20))}d.alignItemsHorizontally();d.setPosition(cc.ccp(c.width/2,80));this.addChild(d,2);d=cc.LabelTTF.create(this.title(),"Arial",40);this.addChild(d,1);d.setPosition(cc.ccp(c.width/2,c.height-32));d.setColor(cc.ccc3(255,255,40));this.updateQuantityLabel();this.createParticleSystem();this.schedule(this.step)},
title:function(){return"No title"},step:function(){var a=this.getChildByTag(TAG_LABEL_ATLAS),b=this.getChildByTag(TAG_PARTICLE_SYSTEM).getParticleCount();a.setString(b)},createParticleSystem:function(){var a=null;this.removeChildByTag(TAG_PARTICLE_SYSTEM,!0);a=cc.TextureCache.sharedTextureCache().addImage("Resources/Images/fire.png");cc.TextureCache.sharedTextureCache().removeTexture(a);a=new cc.ParticleSystemQuad;switch(this._subtestNumber){case 1:cc.Texture2D.setDefaultAlphaPixelFormat(cc.CCTEXTURE_2D_PIXEL_FORMAT_RGBA8888);
a.initWithTotalParticles(this._quantityParticles);a.setTexture(cc.TextureCache.sharedTextureCache().addImage("Resources/Images/fire.png"));break;case 2:cc.Texture2D.setDefaultAlphaPixelFormat(cc.CCTEXTURE_2D_PIXEL_FORMAT_RGBA4444);a.initWithTotalParticles(this._quantityParticles);a.setTexture(cc.TextureCache.sharedTextureCache().addImage("Resources/Images/fire.png"));break;case 3:cc.Texture2D.setDefaultAlphaPixelFormat(cc.CCTEXTURE_2D_PIXEL_FORMAT_A8);a.initWithTotalParticles(this._quantityParticles);
a.setTexture(cc.TextureCache.sharedTextureCache().addImage("Resources/Images/fire.png"));break;default:a=null,cc.Log("Shall not happen!")}this.addChild(a,0,TAG_PARTICLE_SYSTEM);this.doTest();cc.Texture2D.setDefaultAlphaPixelFormat(cc.CCTEXTURE_2D_PIXEL_FORMAT_RGBA8888)},onDecrease:function(){this._quantityParticles-=PARTICLE_NODES_INCREASE;0>this._quantityParticles&&(this._quantityParticles=0);this.updateQuantityLabel();this.createParticleSystem()},onIncrease:function(){this._quantityParticles+=PARTICLE_NODES_INCREASE;
this._quantityParticles>MAX_PARTICLES&&(this._quantityParticles=MAX_PARTICLES);this.updateQuantityLabel();this.createParticleSystem()},testNCallback:function(a){this._subtestNumber=a.getTag();this.getChildByTag(TAG_PARTICLE_MENU_LAYER).restartCallback(a)},updateQuantityLabel:function(){if(this._quantityParticles!=this._lastRenderedCount){var a=this._quantityParticles+" particles";this.getChildByTag(TAG_INFO_LAYER).setString(a);this._lastRenderedCount=this._quantityParticles}},getSubTestNum:function(){return this._subtestNumber},
getParticlesNum:function(){return this._quantityParticles},doTest:function(){}}),ParticlePerformTest1=ParticleMainScene.extend({title:function(){return"A "+this._subtestNumber+" size=4"},doTest:function(){var a=cc.Director.sharedDirector().getWinSize(),b=this.getChildByTag(TAG_PARTICLE_SYSTEM);b.setDuration(-1);b.setGravity(cc.ccp(0,-90));b.setAngle(90);b.setAngleVar(0);b.setRadialAccel(0);b.setRadialAccelVar(0);b.setSpeed(180);b.setSpeedVar(50);b.setPosition(cc.ccp(a.width/2,100));b.setPosVar(cc.ccp(a.width/
2,0));b.setLife(2);b.setLifeVar(1);b.setEmissionRate(b.getTotalParticles()/b.getLife());a=new cc.Color4F(0.5,0.5,0.5,1);b.setStartColor(a);a=new cc.Color4F(0.5,0.5,0.5,1);b.setStartColorVar(a);a=new cc.Color4F(0.1,0.1,0.1,0.2);b.setEndColor(a);a=new cc.Color4F(0.1,0.1,0.1,0.2);b.setEndColorVar(a);b.setEndSize(4);b.setStartSize(4);b.setEndSizeVar(0);b.setStartSizeVar(0);b.setIsBlendAdditive(!1)}}),ParticlePerformTest2=ParticleMainScene.extend({title:function(){return"B "+this._subtestNumber+" size=8"},
doTest:function(){var a=cc.Director.sharedDirector().getWinSize(),b=this.getChildByTag(TAG_PARTICLE_SYSTEM);b.setDuration(-1);b.setGravity(cc.ccp(0,-90));b.setAngle(90);b.setAngleVar(0);b.setRadialAccel(0);b.setRadialAccelVar(0);b.setSpeed(180);b.setSpeedVar(50);b.setPosition(cc.ccp(a.width/2,100));b.setPosVar(cc.ccp(a.width/2,0));b.setLife(2);b.setLifeVar(1);b.setEmissionRate(b.getTotalParticles()/b.getLife());a=new cc.Color4F(0.5,0.5,0.5,1);b.setStartColor(a);a=new cc.Color4F(0.5,0.5,0.5,1);b.setStartColorVar(a);
a=new cc.Color4F(0.1,0.1,0.1,0.2);b.setEndColor(a);a=new cc.Color4F(0.1,0.1,0.1,0.2);b.setEndColorVar(a);b.setEndSize(8);b.setStartSize(8);b.setEndSizeVar(0);b.setStartSizeVar(0);b.setIsBlendAdditive(!1)}}),ParticlePerformTest3=ParticleMainScene.extend({title:function(){return"C "+this._subtestNumber+" size=32"},doTest:function(){var a=cc.Director.sharedDirector().getWinSize(),b=this.getChildByTag(TAG_PARTICLE_SYSTEM);b.setDuration(-1);b.setGravity(cc.ccp(0,-90));b.setAngle(90);b.setAngleVar(0);b.setRadialAccel(0);
b.setRadialAccelVar(0);b.setSpeed(180);b.setSpeedVar(50);b.setPosition(cc.ccp(a.width/2,100));b.setPosVar(cc.ccp(a.width/2,0));b.setLife(2);b.setLifeVar(1);b.setEmissionRate(b.getTotalParticles()/b.getLife());a=new cc.Color4F(0.5,0.5,0.5,1);b.setStartColor(a);a=new cc.Color4F(0.5,0.5,0.5,1);b.setStartColorVar(a);a=new cc.Color4F(0.1,0.1,0.1,0.2);b.setEndColor(a);a=new cc.Color4F(0.1,0.1,0.1,0.2);b.setEndColorVar(a);b.setEndSize(32);b.setStartSize(32);b.setEndSizeVar(0);b.setStartSizeVar(0);b.setIsBlendAdditive(!1)}}),
ParticlePerformTest4=ParticleMainScene.extend({title:function(){return"D "+this._subtestNumber+" size=64"},doTest:function(){var a=cc.Director.sharedDirector().getWinSize(),b=this.getChildByTag(TAG_PARTICLE_SYSTEM);b.setDuration(-1);b.setGravity(cc.ccp(0,-90));b.setAngle(90);b.setAngleVar(0);b.setRadialAccel(0);b.setRadialAccelVar(0);b.setSpeed(180);b.setSpeedVar(50);b.setPosition(cc.ccp(a.width/2,100));b.setPosVar(cc.ccp(a.width/2,0));b.setLife(2);b.setLifeVar(1);b.setEmissionRate(b.getTotalParticles()/
b.getLife());a=new cc.Color4F(0.5,0.5,0.5,1);b.setStartColor(a);a=new cc.Color4F(0.5,0.5,0.5,1);b.setStartColorVar(a);a=new cc.Color4F(0.1,0.1,0.1,0.2);b.setEndColor(a);a=new cc.Color4F(0.1,0.1,0.1,0.2);b.setEndColorVar(a);b.setEndSize(64);b.setStartSize(64);b.setEndSizeVar(0);b.setStartSizeVar(0);b.setIsBlendAdditive(!1)}});function runParticleTest(){var a=new ParticlePerformTest1;a.initWithSubTest(1,PARTICLE_NODES_INCREASE);cc.Director.sharedDirector().replaceScene(a)};var TAG_BASE=2E3,MAX_NODES=1500,NODES_INCREASE=50,s_nCurCase=0,NodeChildrenMenuLayer=PerformBasicLayer.extend({_maxCases:4,showCurrentTest:function(){var a=this.getParent().getQuantityOfNodes(),b=null;switch(this._curCase){case 0:b=new IterateSpriteSheetCArray;break;case 1:b=new AddSpriteSheet;break;case 2:b=new RemoveSpriteSheet;break;case 3:b=new ReorderSpriteSheet}s_nCurCase=this._curCase;b&&(b.initWithQuantityOfNodes(a),cc.Director.sharedDirector().replaceScene(b))}}),NodeChildrenMainScene=cc.Scene.extend({_lastRenderedCount:null,
_quantityOfNodes:null,_currentQuantityOfNodes:null,initWithQuantityOfNodes:function(a){var b=cc.Director.sharedDirector().getWinSize(),c=cc.LabelTTF.create(this.title(),"Arial",40);this.addChild(c,1);c.setPosition(cc.ccp(b.width/2,b.height-32));c.setColor(cc.ccc3(255,255,40));c=this.subtitle();c.length&&(c=cc.LabelTTF.create(c,"Thonburi",16),this.addChild(c,1),c.setPosition(cc.ccp(b.width/2,b.height-80)));this._currentQuantityOfNodes=this._lastRenderedCount=0;this._quantityOfNodes=a;cc.MenuItemFont.setFontSize(65);
a=cc.MenuItemFont.create(" - ",this,this.onDecrease);a.setColor(cc.ccc3(0,200,20));c=cc.MenuItemFont.create(" + ",this,this.onIncrease);c.setColor(cc.ccc3(0,200,20));a=cc.Menu.create(a,c,null);a.alignItemsHorizontally();a.setPosition(cc.ccp(b.width/2,b.height/2+15));this.addChild(a,1);a=cc.LabelTTF.create("0 nodes","Marker Felt",30);a.setColor(cc.ccc3(0,200,20));a.setPosition(cc.ccp(b.width/2,b.height/2-15));this.addChild(a,1,TAG_INFO_LAYER);a=new NodeChildrenMenuLayer(!0,4,s_nCurCase);this.addChild(a);
this.updateQuantityLabel();this.updateQuantityOfNodes()},title:function(){return"No title"},subtitle:function(){return""},updateQuantityOfNodes:function(){},onDecrease:function(){this._quantityOfNodes-=NODES_INCREASE;0>this._quantityOfNodes&&(this._quantityOfNodes=0);this.updateQuantityLabel();this.updateQuantityOfNodes()},onIncrease:function(){this._quantityOfNodes+=NODES_INCREASE;this._quantityOfNodes>MAX_NODES&&(this._quantityOfNodes=MAX_NODES);this.updateQuantityLabel();this.updateQuantityOfNodes()},
updateQuantityLabel:function(){if(this._quantityOfNodes!=this._lastRenderedCount){var a=this._quantityOfNodes+" nodes";this.getChildByTag(TAG_INFO_LAYER).setString(a);this._lastRenderedCount=this._quantityOfNodes}},getQuantityOfNodes:function(){return this._quantityOfNodes}}),IterateSpriteSheet=NodeChildrenMainScene.extend({_batchNode:null,_profilingTimer:null,ctor:function(){cc.ENABLE_PROFILERS&&(this._profilingTimer=new cc.ProfilingTimer)},updateQuantityOfNodes:function(){var a=cc.Director.sharedDirector().getWinSize();
if(this._currentQuantityOfNodes<this._quantityOfNodes)for(var b=0;b<this._quantityOfNodes-this._currentQuantityOfNodes;b++){var c=cc.Sprite.createWithTexture(this._batchNode.getTexture(),cc.RectMake(0,0,32,32));this._batchNode.addChild(c);c.setPosition(cc.ccp(cc.RANDOM_0_1()*a.width,cc.RANDOM_0_1()*a.height))}else if(this._currentQuantityOfNodes>this._quantityOfNodes)for(b=0;b<this._currentQuantityOfNodes-this._quantityOfNodes;b++)this._batchNode.removeChildAtIndex(this._currentQuantityOfNodes-b-
1,!0);this._currentQuantityOfNodes=this._quantityOfNodes},initWithQuantityOfNodes:function(a){this._batchNode=cc.SpriteBatchNode.create("Resources/Images/spritesheet1.png");this.addChild(this._batchNode);this._super(a);cc.ENABLE_PROFILERS&&(this._profilingTimer=cc.Profiler.timerWithName(this.profilerName(),this));this.scheduleUpdate()},update:function(){},profilerName:function(){return"none"}}),IterateSpriteSheetFastEnum=IterateSpriteSheet.extend({update:function(){var a=this._batchNode.getChildren();
cc.ENABLE_PROFILERS&&cc.ProfilingBeginTimingBlock(this._profilingTimer);for(var b=0;b<a.length;b++)a[b].setIsVisible(!1);cc.ENABLE_PROFILERS&&cc.ProfilingEndTimingBlock(this._profilingTimer)},title:function(){return"A - Iterate SpriteSheet"},subtitle:function(){return"Iterate children using Fast Enum API. See console"},profilerName:function(){return"iter fast enum"}}),IterateSpriteSheetCArray=IterateSpriteSheet.extend({update:function(){var a=this._batchNode.getChildren();cc.ENABLE_PROFILERS&&cc.ProfilingBeginTimingBlock(this._profilingTimer);
for(var b=0;b<a.length;b++)a[b].setIsVisible(!1);cc.ENABLE_PROFILERS&&cc.ProfilingEndTimingBlock(this._profilingTimer)},title:function(){return"B - Iterate SpriteSheet"},subtitle:function(){return"Iterate children using Array API. See console"},profilerName:function(){return"iter c-array"}}),AddRemoveSpriteSheet=NodeChildrenMainScene.extend({_batchNode:null,ctor:function(){cc.ENABLE_PROFILERS&&(this._profilingTimer=new cc.ProfilingTimer)},updateQuantityOfNodes:function(){var a=cc.Director.sharedDirector().getWinSize();
if(this._currentQuantityOfNodes<this._quantityOfNodes)for(var b=0;b<this._quantityOfNodes-this._currentQuantityOfNodes;b++){var c=cc.Sprite.createWithTexture(this._batchNode.getTexture(),cc.RectMake(0,0,32,32));this._batchNode.addChild(c);c.setPosition(cc.ccp(cc.RANDOM_0_1()*a.width,cc.RANDOM_0_1()*a.height));c.setIsVisible(!1)}else if(this._currentQuantityOfNodes>this._quantityOfNodes)for(b=0;b<this._currentQuantityOfNodes-this._quantityOfNodes;b++)this._batchNode.removeChildAtIndex(this._currentQuantityOfNodes-
b-1,!0);this._currentQuantityOfNodes=this._quantityOfNodes},initWithQuantityOfNodes:function(a){this._batchNode=cc.SpriteBatchNode.create("Resources/Images/spritesheet1.png");this.addChild(this._batchNode);this._super(a);cc.ENABLE_PROFILERS&&(this._profilingTimer=cc.Profiler.timerWithName(this.profilerName(),this));this.scheduleUpdate()},update:function(){},profilerName:function(){return"none"}}),AddSpriteSheet=AddRemoveSpriteSheet.extend({update:function(){var a=0.15*this._currentQuantityOfNodes;
if(0<a){for(var b=[],c=[],d=0;d<a;d++){var e=cc.Sprite.createWithTexture(this._batchNode.getTexture(),cc.RectMake(0,0,32,32));b.push(e);c[d]=50*cc.RANDOM_MINUS1_1()}cc.ENABLE_PROFILERS&&cc.ProfilingBeginTimingBlock(this._profilingTimer)}for(d=0;d<a;d++)this._batchNode.addChild(b[d],c[d],TAG_BASE+d);cc.ENABLE_PROFILERS&&cc.ProfilingEndTimingBlock(this._profilingTimer);for(d=0;d<a;d++)this._batchNode.removeChildByTag(TAG_BASE+d,!0);delete c},title:function(){return"C - Add to spritesheet"},subtitle:function(){return"Adds %10 of total sprites with random z. See console"},
profilerName:function(){return"add sprites"}}),RemoveSpriteSheet=AddRemoveSpriteSheet.extend({update:function(){var a=0.15*this._currentQuantityOfNodes;if(0<a){for(var b=[],c=0;c<a;c++){var d=cc.Sprite.createWithTexture(this._batchNode.getTexture(),cc.RectMake(0,0,32,32));b.push(d)}for(c=0;c<a;c++)this._batchNode.addChild(b[c],50*cc.RANDOM_MINUS1_1(),TAG_BASE+c);cc.ENABLE_PROFILERS&&cc.ProfilingBeginTimingBlock(this._profilingTimer);for(c=0;c<a;c++)this._batchNode.removeChildByTag(TAG_BASE+c,!0);
cc.ENABLE_PROFILERS&&cc.ProfilingEndTimingBlock(this._profilingTimer)}},title:function(){return"D - Del from spritesheet"},subtitle:function(){return"Remove %10 of total sprites placed randomly. See console"},profilerName:function(){return"remove sprites"}}),ReorderSpriteSheet=AddRemoveSpriteSheet.extend({update:function(){var a=0.15*this._currentQuantityOfNodes;if(0<a){for(var b=[],c=0;c<a;c++){var d=cc.Sprite.createWithTexture(this._batchNode.getTexture(),cc.RectMake(0,0,32,32));b.push(d)}for(c=
0;c<a;c++)this._batchNode.addChild(b[c],50*cc.RANDOM_MINUS1_1(),TAG_BASE+c);cc.ENABLE_PROFILERS&&cc.ProfilingBeginTimingBlock(this._profilingTimer);for(c=0;c<a;c++)this._batchNode.reorderChild(this._batchNode.getChildren()[c],50*cc.RANDOM_MINUS1_1());cc.ENABLE_PROFILERS&&cc.ProfilingEndTimingBlock(this._profilingTimer)}for(c=0;c<a;c++)this._batchNode.removeChildByTag(TAG_BASE+c,!0)},title:function(){return"E - Reorder from spritesheet"},subtitle:function(){return"Reorder %10 of total sprites placed randomly. See console"},
profilerName:function(){return"reorder sprites"}});function runNodeChildrenTest(){var a=new IterateSpriteSheetCArray;a.initWithQuantityOfNodes(NODES_INCREASE);cc.Director.sharedDirector().replaceScene(a)};var s_nTexCurCase=0,TextureMenuLayer=PerformBasicLayer.extend({showCurrentTest:function(){var a=null;switch(this._curCase){case 0:a=TextureTest.scene()}s_nTexCurCase=this._curCase;a&&cc.Director.sharedDirector().replaceScene(a)},onEnter:function(){this._super();var a=cc.Director.sharedDirector().getWinSize(),b=cc.LabelTTF.create(this.title(),"Arial",40);this.addChild(b,1);b.setPosition(cc.ccp(a.width/2,a.height-32));b.setColor(cc.ccc3(255,255,40));b=this.subtitle();b.length&&(b=cc.LabelTTF.create(b,
"Thonburi",16),this.addChild(b,1),b.setPosition(cc.ccp(a.width/2,a.height-80)));this.performTests()},title:function(){return"no title"},subtitle:function(){return"no subtitle"},performTests:function(){}}),TextureTest=TextureMenuLayer.extend({performTests:function(){cc.Log("--------");cc.Log("--- PNG 128x128 ---");this.performTestsPNG("Resources/Images/test_image.png");cc.Log("--- PNG 512x512 ---");this.performTestsPNG("Resources/Images/texture512x512.png");cc.Log("EMPTY IMAGE");cc.Log("--- PNG 1024x1024 ---");
this.performTestsPNG("Resources/Images/texture1024x1024.png");cc.Log("LANDSCAPE IMAGE");cc.Log("--- PNG 1024x1024 ---");this.performTestsPNG("Resources/Images/landscape-1024x1024.png")},title:function(){return"Texture Performance Test"},subtitle:function(){return"See console for results"},performTestsPNG:function(a){var b=cc.timeval(),c,d=cc.TextureCache.sharedTextureCache();cc.Log("RGBA 8888");cc.Texture2D.setDefaultAlphaPixelFormat(cc.CCTEXTURE_2D_PIXEL_FORMAT_RGBA8888);b=cc.Time.gettimeofdayCocos2d();
(c=d.addImage(a))?cc.Log("  ms:"+calculateDeltaTime(b)):cc.Log(" ERROR");d.removeTexture(c);cc.Log("RGBA 4444");cc.Texture2D.setDefaultAlphaPixelFormat(cc.CCTEXTURE_2D_PIXEL_FORMAT_RGBA4444);b=cc.Time.gettimeofdayCocos2d();(c=d.addImage(a))?cc.Log("  ms:"+calculateDeltaTime(b)):cc.Log(" ERROR");d.removeTexture(c);cc.Log("RGBA 5551");cc.Texture2D.setDefaultAlphaPixelFormat(cc.CCTEXTURE_2D_PIXEL_FORMAT_RGB5A1);b=cc.Time.gettimeofdayCocos2d();(c=d.addImage(a))?cc.Log("  ms:"+calculateDeltaTime(b)):cc.Log(" ERROR");
d.removeTexture(c);cc.Log("RGB 565");cc.Texture2D.setDefaultAlphaPixelFormat(cc.CCTEXTURE_2D_PIXEL_FORMAT_RGB565);b=cc.Time.gettimeofdayCocos2d();(c=d.addImage(a))?cc.Log("  ms:"+calculateDeltaTime(b)):cc.Log(" ERROR");d.removeTexture(c)}});TextureTest.scene=function(){var a=cc.Scene.create(),b=new TextureTest(!1,1,s_nTexCurCase);a.addChild(b);return a};function runTextureTest(){s_nTexCurCase=0;var a=TextureTest.scene();cc.Director.sharedDirector().replaceScene(a)}
function calculateDeltaTime(a){var b=cc.Time.gettimeofdayCocos2d();return b.tv_sec-a.tv_sec+(b.tv_usec-a.tv_usec)/1E6};var TAG_LABEL1=550,TAG_LABEL2=551,TAG_LABEL3=552,TAG_LABEL4=553,fontIdx=0,fontList="Verdana;Lucida Sans Unicode;Bookman Old Style;Symbol;Georgia;Trebuchet MS;Comic Sans MS;Arial Black;Tahoma;Impact".split(";");function nextFontTestAction(){fontIdx++;fontIdx%=fontList.length;return fontList[fontIdx]}function backFontTestAction(){fontIdx--;0>fontIdx&&(fontIdx+=fontList.length);return fontList[fontIdx]}function restartFontTestAction(){return fontList[fontIdx]}
FontTestScene=TestScene.extend({runThisTest:function(){this.addChild(FontTest.node());cc.Director.sharedDirector().replaceScene(this)}});
FontTest=cc.Layer.extend({ctor:function(){var a=cc.Director.sharedDirector().getWinSize(),b=cc.MenuItemImage.create(s_pathB1,s_pathB2,this,this.backCallback),c=cc.MenuItemImage.create(s_pathR1,s_pathR2,this,this.restartCallback),d=cc.MenuItemImage.create(s_pathF1,s_pathF2,this,this.nextCallback),e=cc.Menu.create(b,c,d,null);e.setPosition(cc.PointZero());b.setPosition(cc.ccp(a.width/2-100,30));c.setPosition(cc.ccp(a.width/2,30));d.setPosition(cc.ccp(a.width/2+100,30));this.addChild(e,1);this.showFont(restartFontTestAction())},
showFont:function(a){this.removeChildByTag(TAG_LABEL1,!0);this.removeChildByTag(TAG_LABEL2,!0);this.removeChildByTag(TAG_LABEL3,!0);this.removeChildByTag(TAG_LABEL4,!0);var b=cc.Director.sharedDirector().getWinSize(),c=cc.LabelTTF.create(a,a,24),d=cc.LabelTTF.create("alignment left",cc.SizeMake(b.width,50),cc.TEXT_ALIGNMENT_LEFT,a,32),e=cc.LabelTTF.create("alignment center",cc.SizeMake(b.width,50),cc.TEXT_ALIGNMENT_CENTER,a,32),a=cc.LabelTTF.create("alignment right",cc.SizeMake(b.width,50),cc.TEXT_ALIGNMENT_RIGHT,
a,32);c.setPosition(cc.ccp(b.width/2,3*b.height/4));d.setPosition(cc.ccp(b.width/2,b.height/2));e.setPosition(cc.ccp(b.width/2,3*b.height/8));a.setPosition(cc.ccp(b.width/2,b.height/4));this.addChild(d,0,TAG_LABEL1);this.addChild(a,0,TAG_LABEL2);this.addChild(e,0,TAG_LABEL3);this.addChild(c,0,TAG_LABEL4)},restartCallback:function(){this.showFont(restartFontTestAction())},nextCallback:function(){this.showFont(nextFontTestAction())},backCallback:function(){this.showFont(backFontTestAction())},title:function(){return"Font test"}});
FontTest.node=function(){var a=new FontTest;a.init();return a};var s_nTouchCurCase=0,TouchesMainScene=PerformBasicLayer.extend({_maxCases:2,_plabel:null,_numberOfTouchesB:0,_numberOfTouchesM:0,_numberOfTouchesE:0,_numberOfTouchesC:0,_elapsedTime:null,showCurrentTest:function(){var a=null;switch(this._curCase){case 0:a=new TouchesPerformTest1(!0,2,this._curCase);break;case 1:a=new TouchesPerformTest2(!0,2,this._curCase)}s_nTouchCurCase=this._curCase;if(a){var b=cc.Scene.create();b.addChild(a);cc.Director.sharedDirector().replaceScene(b)}},onEnter:function(){this._super();
var a=cc.Director.sharedDirector().getWinSize(),b=cc.LabelTTF.create(this.title(),"Arial",32);this.addChild(b,1);b.setPosition(cc.ccp(a.width/2,a.height-50));this.scheduleUpdate();this._plabel=cc.LabelTTF.create("00.0","Arial",16);this._plabel.setPosition(cc.ccp(a.width/2,a.height/2));this.addChild(this._plabel);this._numberOfTouchesB=this._numberOfTouchesM=this._numberOfTouchesE=this._numberOfTouchesC=this._elapsedTime=0},title:function(){return"No title"},update:function(a){this._elapsedTime+=a;
if(1<this._elapsedTime){var a=(this._numberOfTouchesB/this._elapsedTime).toFixed(1),b=(this._numberOfTouchesM/this._elapsedTime).toFixed(1),c=(this._numberOfTouchesE/this._elapsedTime).toFixed(1),d=(this._numberOfTouchesC/this._elapsedTime).toFixed(1);this._numberOfTouchesB=this._numberOfTouchesM=this._numberOfTouchesE=this._numberOfTouchesC=this._elapsedTime=0;this._plabel.setString(a+" "+b+" "+c+" "+d)}}}),TouchesPerformTest1=TouchesMainScene.extend({onEnter:function(){this._super();this.setIsTouchEnabled(!0)},
title:function(){return"Targeted touches"},registerWithTouchDispatcher:function(){cc.TouchDispatcher.sharedDispatcher().addTargetedDelegate(this,0,!0)},ccTouchBegan:function(){this._numberOfTouchesB++;return!0},ccTouchMoved:function(){this._numberOfTouchesM++},ccTouchEnded:function(){this._numberOfTouchesE++},ccTouchCancelled:function(){this._numberOfTouchesC++}}),TouchesPerformTest2=TouchesMainScene.extend({onEnter:function(){this._super();this.setIsTouchEnabled(!0)},title:function(){return"Standard touches"},
registerWithTouchDispatcher:function(){cc.TouchDispatcher.sharedDispatcher().addStandardDelegate(this,0)},ccTouchesBegan:function(a){this._numberOfTouchesB+=a.length},ccTouchesMoved:function(a){this._numberOfTouchesM+=a.length},ccTouchesEnded:function(a){this._numberOfTouchesE+=a.length},ccTouchesCancelled:function(a){this._numberOfTouchesC+=a.length}});
function runTouchesTest(){s_nTouchCurCase=0;var a=cc.Scene.create(),b=new TouchesPerformTest1(!0,2,s_nTouchCurCase);a.addChild(b);cc.Director.sharedDirector().replaceScene(a)};var TAG_LABEL=1,TAG_LABEL_SPRITE_MANAGER=1,TAG_BITMAP_ATLAS1=TAG_ANIMATION1=1,TAG_BITMAP_ATLAS2=2,TAG_BITMAP_ATLAS3=3,TAG_LABEL_SPRITE1=660,TAG_LABEL_SPRITE12=661,TAG_LABEL_SPRITE13=662,TAG_LABEL_SPRITE14=663,TAG_LABEL_SPRITE15=664,TAG_LABEL_SPRITE16=665,TAG_LABEL_SPRITE17=666,TAG_LABEL_SPRITE18=667,AtlasTests=[function(){return new LabelAtlasTest},function(){return new LabelAtlasColorTest},function(){return new Atlas3},function(){return new Atlas4},function(){return new Atlas5},function(){return new Atlas6},
function(){return new AtlasBitmapColor},function(){return new AtlasFastBitmap},function(){return new BitmapFontMultiLine},function(){return new LabelsEmpty},function(){return new LabelBMFontHD},function(){return new LabelAtlasHD},function(){return new LabelGlyphDesigner},function(){return new LabelTTFTest},function(){return new LabelTTFMultiline},function(){return new LabelTTFChinese},function(){return new LabelBMFontChinese}],atlasIdx=-1;
function nextAtlasAction(){++atlasIdx;atlasIdx%=AtlasTests.length;return AtlasTests[atlasIdx]()}function backAtlasAction(){--atlasIdx;0>atlasIdx&&(atlasIdx+=AtlasTests.length);return AtlasTests[atlasIdx]()}function restartAtlasAction(){return AtlasTests[atlasIdx]()}
var LabelTestScene=TestScene.extend({runThisTest:function(){atlasIdx=-1;this.addChild(nextAtlasAction());cc.Director.sharedDirector().replaceScene(this)}}),AtlasDemo=cc.Layer.extend({title:function(){return"No title"},subtitle:function(){return""},onEnter:function(){this._super();var a=cc.Director.sharedDirector().getWinSize(),b=cc.LabelTTF.create(this.title(),"Arial",28);this.addChild(b,1);b.setPosition(cc.ccp(a.width/2,a.height-50));if(b=this.subtitle())b=cc.LabelTTF.create(b.toString(),"Thonburi",
16),this.addChild(b,1),b.setPosition(cc.ccp(a.width/2,a.height-80));var b=cc.MenuItemImage.create(s_pathB1,s_pathB2,this,this.backCallback),c=cc.MenuItemImage.create(s_pathR1,s_pathR2,this,this.restartCallback),d=cc.MenuItemImage.create(s_pathF1,s_pathF2,this,this.nextCallback),e=cc.Menu.create(b,c,d,null);e.setPosition(cc.PointZero());b.setPosition(cc.ccp(a.width/2-100,30));c.setPosition(cc.ccp(a.width/2,30));d.setPosition(cc.ccp(a.width/2+100,30));this.addChild(e,1)},restartCallback:function(){var a=
new LabelTestScene;a.addChild(restartAtlasAction());cc.Director.sharedDirector().replaceScene(a)},nextCallback:function(){var a=new LabelTestScene;a.addChild(nextAtlasAction());cc.Director.sharedDirector().replaceScene(a)},backCallback:function(){var a=new LabelTestScene;a.addChild(backAtlasAction());cc.Director.sharedDirector().replaceScene(a)}}),Atlas1=AtlasDemo.extend({textureAtlas:null,ctor:function(){this.textureAtlas=cc.TextureAtlas.create(s_atlasTest,3);for(var a=cc.Director.sharedDirector().getWinSize(),
a=[new cc.V3F_C4B_T2F_Quad(new cc.V3F_C4B_T2F(new cc.Vertex3F(0,0,0),cc.ccc4(0,0,255,255),new cc.Tex2F(0,1)),new cc.V3F_C4B_T2F(new cc.Vertex3F(a.width,0,0),cc.ccc4(0,0,255,0),new cc.Tex2F(1,1)),new cc.V3F_C4B_T2F(new cc.Vertex3F(0,a.height,0),cc.ccc4(0,0,255,0),new cc.Tex2F(0,0)),new cc.V3F_C4B_T2F(new cc.Vertex3F(a.width,a.height,0),cc.ccc4(0,0,255,255),new cc.Tex2F(1,0))),new cc.V3F_C4B_T2F_Quad(new cc.V3F_C4B_T2F(new cc.Vertex3F(40,40,0),cc.ccc4(255,255,255,255),new cc.Tex2F(0,0.2)),new cc.V3F_C4B_T2F(new cc.Vertex3F(120,
80,0),cc.ccc4(255,0,0,255),new cc.Tex2F(0.5,0.2)),new cc.V3F_C4B_T2F(new cc.Vertex3F(40,160,0),cc.ccc4(255,255,255,255),new cc.Tex2F(0,0)),new cc.V3F_C4B_T2F(new cc.Vertex3F(160,160,0),cc.ccc4(0,255,0,255),new cc.Tex2F(0.5,0))),new cc.V3F_C4B_T2F_Quad(new cc.V3F_C4B_T2F(new cc.Vertex3F(a.width/2,40,0),cc.ccc4(255,0,0,255),new cc.Tex2F(0,1)),new cc.V3F_C4B_T2F(new cc.Vertex3F(a.width,40,0),cc.ccc4(0,255,0,255),new cc.Tex2F(1,1)),new cc.V3F_C4B_T2F(new cc.Vertex3F(a.width/2-50,200,0),cc.ccc4(0,0,255,
255),new cc.Tex2F(0,0)),new cc.V3F_C4B_T2F(new cc.Vertex3F(a.width,100,0),cc.ccc4(255,255,0,255),new cc.Tex2F(1,0)))],b=0;3>b;b++)this.textureAtlas.updateQuad(a[b],b)},title:function(){return"cc.TextureAtlas"},subtitle:function(){return"Manual creation of cc.TextureAtlas"},draw:function(){this._super();this.textureAtlas.drawQuads()}}),LabelAtlasTest=AtlasDemo.extend({time:null,ctor:function(){this.time=0;var a=cc.LabelAtlas.create("123 Test","Resources/fonts/tuffy_bold_italic-charmap.png",48,64," ");
this.addChild(a,0,TAG_LABEL_SPRITE1);a.setPosition(cc.ccp(10,100));a.setOpacity(200);a=cc.LabelAtlas.create("0123456789","Resources/fonts/tuffy_bold_italic-charmap.png",48,64," ");this.addChild(a,0,TAG_LABEL_SPRITE12);a.setPosition(cc.ccp(10,200));a.setOpacity(32);this.schedule(this.step)},step:function(a){this.time+=a;var a=this.getChildByTag(TAG_LABEL_SPRITE1),b=this.time.toFixed(2)+" Test";a.setString(b);a=this.getChildByTag(TAG_LABEL_SPRITE12);b=parseInt(this.time).toString();a.setString(b)},
title:function(){return"LabelAtlas"},subtitle:function(){return"Updating label should be fast"}}),LabelAtlasColorTest=AtlasDemo.extend({time:null,ctor:function(){var a=cc.LabelAtlas.create("123 Test","Resources/fonts/tuffy_bold_italic-charmap.png",48,64," ");this.addChild(a,0,TAG_LABEL_SPRITE1);a.setPosition(cc.ccp(10,100));a.setOpacity(200);a=cc.LabelAtlas.create("0123456789","Resources/fonts/tuffy_bold_italic-charmap.png",48,64," ");this.addChild(a,0,TAG_LABEL_SPRITE12);a.setPosition(cc.ccp(10,
200));a.setColor(cc.RED());var b=cc.FadeOut.create(1),c=b.reverse(),b=cc.Sequence.create(b,c,null),b=cc.RepeatForever.create(b);a.runAction(b);this.time=0;this.schedule(this.step)},step:function(a){this.time+=a;a=this.time.toFixed(2)+" Test";this.getChildByTag(TAG_LABEL_SPRITE1).setString(a);var a=this.getChildByTag(TAG_LABEL_SPRITE12),b=parseInt(this.time).toString();a.setString(b)},title:function(){return"cc.LabelAtlas"},subtitle:function(){return"Opacity + Color should work at the same time"}}),
Atlas3=AtlasDemo.extend({time:0,ctor:function(){this.addChild(cc.LayerColor.create(cc.ccc4(128,128,128,255)),-10);var a=cc.LabelBMFont.create("Test","Resources/fonts/bitmapFontTest2.fnt");a.setAnchorPoint(cc.ccp(0,0));this.addChild(a,0,TAG_BITMAP_ATLAS1);var b=cc.FadeOut.create(1),c=b.reverse(),b=cc.Sequence.create(b,c,null),c=cc.RepeatForever.create(b);a.runAction(c);b=cc.LabelBMFont.create("Test","Resources/fonts/bitmapFontTest2.fnt");b.setAnchorPoint(cc.ccp(0.5,0.5));b.setColor(cc.RED());this.addChild(b,
0,TAG_BITMAP_ATLAS2);b.runAction(c.copy());c=cc.LabelBMFont.create("Test","Resources/fonts/bitmapFontTest2.fnt");c.setAnchorPoint(cc.ccp(1,1));this.addChild(c,0,TAG_BITMAP_ATLAS3);var d=cc.Director.sharedDirector().getWinSize();a.setPosition(cc.ccp(0,0));b.setPosition(cc.ccp(d.width/2,d.height/2));c.setPosition(cc.ccp(d.width,d.height));this.schedule(this.step)},step:function(a){this.time+=a;a=this.time.toFixed(2)+"Test j";this.getChildByTag(TAG_BITMAP_ATLAS1).setString(a);this.getChildByTag(TAG_BITMAP_ATLAS2).setString(a);
this.getChildByTag(TAG_BITMAP_ATLAS3).setString(a)},title:function(){return"cc.LabelBMFont"},subtitle:function(){return"Testing alignment. Testing opacity + tint"}}),Atlas4=AtlasDemo.extend({time:null,ctor:function(){this.time=0;var a=cc.LabelBMFont.create("Bitmap Font Atlas","Resources/fonts/bitmapFontTest.fnt");this.addChild(a);var b=cc.Director.sharedDirector().getWinSize();a.setPosition(cc.ccp(b.width/2,b.height/2));a.setAnchorPoint(cc.ccp(0.5,0.5));var c=a.getChildByTag(0),d=a.getChildByTag(7),
a=a.getChildByTag(12),e=cc.RotateBy.create(2,360),e=cc.RepeatForever.create(e),f=cc.ScaleBy.create(2,1.5),g=f.reverse(),f=cc.Sequence.create(f,g,null),f=cc.RepeatForever.create(f),g=cc.JumpBy.create(0.5,cc.PointZero(),60,1),g=cc.RepeatForever.create(g),h=cc.FadeOut.create(1),i=cc.FadeIn.create(1),h=cc.Sequence.create(h,i,null),h=cc.RepeatForever.create(h);c.runAction(e);c.runAction(f);d.runAction(g);a.runAction(h);c=cc.LabelBMFont.create("00.0","Resources/fonts/bitmapFontTest.fnt");this.addChild(c,
0,TAG_BITMAP_ATLAS2);c.setPosition(cc.ccp(b.width/2,80));c.getChildByTag(3).runAction(e.copy());this.schedule(this.step,0.1)},step:function(a){this.time+=a;a=this.time.toFixed(1);this.getChildByTag(TAG_BITMAP_ATLAS2).setString(10>a?"0"+a:a)},draw:function(){var a=cc.Director.sharedDirector().getWinSize(),b=cc.RED();cc.renderContext.strokeStyle="rgba("+b.r+","+b.g+","+b.b+",1)";cc.drawingUtil.drawLine(cc.ccp(0,a.height/2),cc.ccp(a.width,a.height/2));cc.drawingUtil.drawLine(cc.ccp(a.width/2,0),cc.ccp(a.width/
2,a.height))},title:function(){return"cc.LabelBMFont"},subtitle:function(){return"Using fonts as cc.Sprite objects. Some characters should rotate."}}),Atlas5=AtlasDemo.extend({ctor:function(){var a=cc.LabelBMFont.create("abcdefg","Resources/fonts/bitmapFontTest4.fnt");this.addChild(a);var b=cc.Director.sharedDirector().getWinSize();a.setPosition(cc.ccp(b.width/2,b.height/2));a.setAnchorPoint(cc.ccp(0.5,0.5))},title:function(){return"cc.LabelBMFont"},subtitle:function(){return"Testing padding"}}),
Atlas6=AtlasDemo.extend({ctor:function(){var a=cc.Director.sharedDirector().getWinSize(),b=null,b=cc.LabelBMFont.create("FaFeFiFoFu","Resources/fonts/bitmapFontTest5.fnt");this.addChild(b);b.setPosition(cc.ccp(a.width/2,a.height/2+50));b.setAnchorPoint(cc.ccp(0.5,0.5));b=cc.LabelBMFont.create("fafefifofu","Resources/fonts/bitmapFontTest5.fnt");this.addChild(b);b.setPosition(cc.ccp(a.width/2,a.height/2));b.setAnchorPoint(cc.ccp(0.5,0.5));b=cc.LabelBMFont.create("aeiou","Resources/fonts/bitmapFontTest5.fnt");
this.addChild(b);b.setPosition(cc.ccp(a.width/2,a.height/2-50));b.setAnchorPoint(cc.ccp(0.5,0.5))},title:function(){return"cc.LabelBMFont"},subtitle:function(){return"Rendering should be OK. Testing offset"}}),AtlasBitmapColor=AtlasDemo.extend({ctor:function(){var a=cc.Director.sharedDirector().getWinSize(),b=null,b=cc.LabelBMFont.create("Blue","Resources/fonts/bitmapFontTest5.fnt");b.setColor(cc.BLUE());this.addChild(b);b.setPosition(cc.ccp(a.width/2,a.height/4));b.setAnchorPoint(cc.ccp(0.5,0.5));
b=cc.LabelBMFont.create("Red","Resources/fonts/bitmapFontTest5.fnt");this.addChild(b);b.setPosition(cc.ccp(a.width/2,2*a.height/4));b.setAnchorPoint(cc.ccp(0.5,0.5));b.setColor(cc.RED());b=cc.LabelBMFont.create("G","Resources/fonts/bitmapFontTest5.fnt");this.addChild(b);b.setPosition(cc.ccp(a.width/2,3*a.height/4));b.setAnchorPoint(cc.ccp(0.5,0.5));b.setColor(cc.GREEN());b.setString("Green")},title:function(){return"cc.LabelBMFont"},subtitle:function(){return"Testing color"}}),AtlasFastBitmap=AtlasDemo.extend({ctor:function(){for(var a=
0;100>a;a++){var b=cc.LabelBMFont.create("-"+a+"-","Resources/fonts/bitmapFontTest.fnt");this.addChild(b);var c=cc.Director.sharedDirector().getWinSize(),c=cc.ccp(cc.RANDOM_0_1()*c.width,cc.RANDOM_0_1()*c.height);b.setPosition(c);b.setAnchorPoint(cc.ccp(0.5,0.5))}},title:function(){return"cc.LabelBMFont"},subtitle:function(){return"Creating several cc.LabelBMFont with the same .fnt file should be fast"}}),BitmapFontMultiLine=AtlasDemo.extend({ctor:function(){var a,b=cc.LabelBMFont.create("Multi line\nLeft",
"Resources/fonts/bitmapFontTest3.fnt");b.setAnchorPoint(cc.ccp(0,0));this.addChild(b,0,TAG_BITMAP_ATLAS1);a=b.getContentSize();cc.Log("content size:"+a.width+","+a.height);var c=cc.LabelBMFont.create("Multi line\nCenter","Resources/fonts/bitmapFontTest3.fnt");c.setAnchorPoint(cc.ccp(0.5,0.5));this.addChild(c,0,TAG_BITMAP_ATLAS2);a=c.getContentSize();cc.Log("content size:"+a.width+","+a.height);var d=cc.LabelBMFont.create("Multi line\nRight\nThree lines Three","Resources/fonts/bitmapFontTest3.fnt");
d.setAnchorPoint(cc.ccp(1,1));this.addChild(d,0,TAG_BITMAP_ATLAS3);a=d.getContentSize();cc.Log("content size:"+a.width+","+a.height);a=cc.Director.sharedDirector().getWinSize();b.setPosition(cc.ccp(0,0));c.setPosition(cc.ccp(a.width/2,a.height/2));d.setPosition(cc.ccp(a.width,a.height))},title:function(){return"cc.LabelBMFont"},subtitle:function(){return"Multiline + anchor point"}}),LabelsEmpty=AtlasDemo.extend({setEmpty:null,ctor:function(){var a=cc.Director.sharedDirector().getWinSize(),b=cc.LabelBMFont.create("",
"Resources/fonts/bitmapFontTest3.fnt");this.addChild(b,0,TAG_BITMAP_ATLAS1);b.setPosition(cc.ccp(a.width/2,a.height-100));b=cc.LabelTTF.create("","Arial",24);this.addChild(b,0,TAG_BITMAP_ATLAS2);b.setPosition(cc.ccp(a.width/2,a.height/2));b=cc.LabelAtlas.create("","Resources/fonts/tuffy_bold_italic-charmap.png",48,64," ");this.addChild(b,0,TAG_BITMAP_ATLAS3);b.setPosition(cc.ccp(a.width/2,100));this.schedule(this.updateStrings,1);this.setEmpty=!1},updateStrings:function(){var a=this.getChildByTag(TAG_BITMAP_ATLAS1),
b=this.getChildByTag(TAG_BITMAP_ATLAS2),c=this.getChildByTag(TAG_BITMAP_ATLAS3);this.setEmpty?(a.setString(""),b.setString(""),c.setString(""),this.setEmpty=!1):(a.setString("not empty"),b.setString("not empty"),c.setString("hi"),this.setEmpty=!0)},title:function(){return"Testing empty labels"},subtitle:function(){return"3 empty labels: LabelAtlas, LabelTTF and LabelBMFont"}}),LabelBMFontHD=AtlasDemo.extend({ctor:function(){var a=cc.Director.sharedDirector().getWinSize(),b=cc.LabelBMFont.create("TESTING RETINA DISPLAY",
"Resources/fonts/konqa32.fnt");this.addChild(b);b.setPosition(cc.ccp(a.width/2,a.height/2))},title:function(){return"Testing Retina Display BMFont"},subtitle:function(){return"loading arista16 or arista16-hd"}}),LabelAtlasHD=AtlasDemo.extend({ctor:function(){var a=cc.Director.sharedDirector().getWinSize(),b=cc.LabelAtlas.create("TESTING RETINA DISPLAY","Resources/fonts/larabie-16.png",10,20,"A");b.setAnchorPoint(cc.ccp(0.5,0.5));this.addChild(b);b.setPosition(cc.ccp(a.width/2,a.height/2))},title:function(){return"LabelAtlas with Retina Display"},
subtitle:function(){return"loading larabie-16 / larabie-16-hd"}}),LabelGlyphDesigner=AtlasDemo.extend({ctor:function(){var a=cc.Director.sharedDirector().getWinSize();this.addChild(cc.LayerColor.create(cc.ccc4(128,128,128,255)),-10);var b=cc.LabelBMFont.create("Testing Glyph Designer","Resources/fonts/futura-48.fnt");this.addChild(b);b.setPosition(cc.ccp(a.width/2,a.height/2))},title:function(){return"Testing Glyph Designer"},subtitle:function(){return"You should see a font with shawdows and outline"}}),
LabelTTFTest=AtlasDemo.extend({ctor:function(){var a=cc.Director.sharedDirector().getWinSize(),b=cc.LabelTTF.create("align left",cc.SizeMake(a.width,50),cc.TEXT_ALIGNMENT_LEFT,"Marker Felt",32),c=cc.LabelTTF.create("align center",cc.SizeMake(a.width,50),cc.TEXT_ALIGNMENT_CENTER,"Marker Felt",32),d=cc.LabelTTF.create("align right",cc.SizeMake(a.width,50),cc.TEXT_ALIGNMENT_RIGHT,"Marker Felt",32);b.setPosition(cc.ccp(a.width/2,200));c.setPosition(cc.ccp(a.width/2,150));d.setPosition(cc.ccp(a.width/
2,100));this.addChild(b);this.addChild(c);this.addChild(d)},title:function(){return"Testing cc.LabelTTF"},subtitle:function(){return"You should see 3 labels aligned left, center and right"}}),LabelTTFMultiline=AtlasDemo.extend({ctor:function(){var a=cc.Director.sharedDirector().getWinSize(),b=cc.LabelTTF.create("word wrap \"testing\" (bla0) bla1 'bla2' [bla3] (bla4) {bla5} {bla6} [bla7] (bla8) [bla9] 'bla0' \"bla1\"",cc.SizeMake(a.width/2,200),cc.TEXT_ALIGNMENT_CENTER,"Marker Felt",32);b.setPosition(cc.ccp(a.width/
2,150));this.addChild(b)},title:function(){return"Testing cc.LabelTTF Word Wrap"},subtitle:function(){return"Word wrap using cc.LabelTTF"}}),LabelTTFChinese=AtlasDemo.extend({ctor:function(){var a=cc.Director.sharedDirector().getWinSize(),b=cc.LabelTTF.create("\u4e2d\u56fd","Marker Felt",30);b.setPosition(cc.ccp(a.width/2,a.height/2));this.addChild(b)},title:function(){return"Testing cc.LabelTTF with Chinese character"}}),LabelBMFontChinese=AtlasDemo.extend({ctor:function(){var a=cc.Director.sharedDirector().getWinSize(),
b=cc.LabelBMFont.create("\u4e2d\u56fd","Resources/fonts/bitmapFontChinese.fnt");b.setPosition(cc.ccp(a.width/2,a.height/2));this.addChild(b)},title:function(){return"Testing CCLabelBMFont with Chinese character"}});var CurrentLanguageTest=cc.Layer.extend({ctor:function(){this._super();var a=cc.Director.sharedDirector().getWinSize(),b=cc.LabelTTF.create("Current language Test","Arial",28);this.addChild(b,0);b.setPosition(new cc.Point(a.width/2,a.height-50));b=cc.LabelTTF.create("","Arial",20);b.setPosition(new cc.Point(a.width/2,a.height/2));switch(cc.Application.getCurrentLanguage()){case cc.LANGUAGE_ENGLISH:b.setString("current language is English");break;case cc.LANGUAGE_CHINESE:b.setString("current language is Chinese");
break;case cc.LANGUAGE_FRENCH:b.setString("current language is French");break;case cc.LANGUAGE_GERMAN:b.setString("current language is German");break;case cc.LANGUAGE_ITALIAN:b.setString("current language is Italian");break;case cc.LANGUAGE_RUSSIAN:b.setString("current language is Russian");break;case cc.LANGUAGE_SPANISH:b.setString("current language is Spanish")}this.addChild(b)}}),CurrentLanguageTestScene=TestScene.extend({runThisTest:function(){this.addChild(new CurrentLanguageTest);cc.Director.sharedDirector().replaceScene(this)}});var TEXT_FIELD_TTF_DEFAULT_TEST=0,TEXT_FIELD_TTF_ACTION_TEST=1,TEXT_INPUT_TESTS_COUNT=2,TEXT_INPUT_FONT_NAME="Thonburi",TEXT_INPUT_FONT_SIZE=36,inputTestIdx=-1,createTextInputTest=function(a){switch(a){case TEXT_FIELD_TTF_DEFAULT_TEST:return new TextFieldTTFDefaultTest;case TEXT_FIELD_TTF_ACTION_TEST:return new TextFieldTTFActionTest;default:return 0}},restartTextInputTest=function(){var a=new TextInputTest,b=createTextInputTest(inputTestIdx);a.addKeyboardNotificationLayer(b);return a},nextTextInputTest=
function(){inputTestIdx++;inputTestIdx%=TEXT_INPUT_TESTS_COUNT;return restartTextInputTest()},backTextInputTest=function(){inputTestIdx--;0>inputTestIdx&&(inputTestIdx+=TEXT_INPUT_TESTS_COUNT);return restartTextInputTest()},textInputGetRect=function(a){a=new cc.Rect(a.getPosition().x,a.getPosition().y,a.getContentSize().width,a.getContentSize().height);a.origin.x-=a.size.width/2;a.origin.y-=a.size.height/2;return a},TextInputTest=cc.Layer.extend({notificationLayer:null,ctor:function(){},restartCallback:function(){var a=
new TextInputTestScene;a.addChild(restartTextInputTest());cc.Director.sharedDirector().replaceScene(a)},nextCallback:function(){var a=new TextInputTestScene;a.addChild(nextTextInputTest());cc.Director.sharedDirector().replaceScene(a)},backCallback:function(){var a=new TextInputTestScene;a.addChild(backTextInputTest());cc.Director.sharedDirector().replaceScene(a)},title:function(){return"text input test"},addKeyboardNotificationLayer:function(a){this.notificationLayer=a;this.addChild(a)},onEnter:function(){this._super();
var a=cc.Director.sharedDirector().getWinSize(),b=cc.LabelTTF.create(this.title(),"Arial",24);this.addChild(b);b.setPosition(new cc.Point(a.width/2,a.height-50));if((b=this.notificationLayer.subtitle())&&""!=b)b=cc.LabelTTF.create(b,"Thonburi",16),this.addChild(b,1),b.setPosition(new cc.Point(a.width/2,a.height-80));var b=cc.MenuItemImage.create(s_pathB1,s_pathB2,this,this.backCallback),c=cc.MenuItemImage.create(s_pathR1,s_pathR2,this,this.restartCallback),d=cc.MenuItemImage.create(s_pathF1,s_pathF2,
this,this.nextCallback),e=cc.Menu.create(b,c,d);e.setPosition(cc.PointZero());b.setPosition(new cc.Point(a.width/2-100,30));c.setPosition(new cc.Point(a.width/2,30));d.setPosition(new cc.Point(a.width/2+100,30));this.addChild(e,1)}}),KeyboardNotificationLayer=cc.Layer.extend({_pTrackNode:null,_beginPos:null,ctor:function(){this.setIsTouchEnabled(!0)},subtitle:function(){return""},onClickTrackNode:function(){},registerWithTouchDispatcher:function(){cc.TouchDispatcher.sharedDispatcher().addTargetedDelegate(this,
0,!1)},keyboardWillShow:function(a){cc.Log("TextInputTest:keyboardWillShowAt(origin:"+a.end.origin.x+","+a.end.origin.y+", size:"+a.end.size.width+","+a.end.size.height+")");if(this._pTrackNode){var b=textInputGetRect(this._pTrackNode);cc.Log("TextInputTest:trackingNodeAt(origin:"+a.end.origin.x+","+a.end.origin.y+", size:"+a.end.size.width+","+a.end.size.height+")");if(cc.Rect.CCRectIntersectsRect(b,a.end)){a=cc.Rect.CCRectGetMaxY(a.end)-cc.Rect.CCRectGetMinY(b);cc.Log("TextInputTest:needAdjustVerticalPosition("+
a+")");for(var b=this.getChildren(),c=0;c<b.length;++c){var d=b[c],e=d.getPosition();e.y+=a;d.setPosition(e)}}}},ccTouchBegan:function(a){cc.Log("++++++++++++++++++++++++++++++++++++++++++++");this._beginPos=a.locationInView(a.view());this._beginPos=cc.Director.sharedDirector().convertToGL(this._beginPos);return!0},ccTouchEnded:function(a){if(this._pTrackNode){var b=a.locationInView(a.view()),b=cc.Director.sharedDirector().convertToGL(b);5<Math.abs(b.x-this._beginPos.x)||5<Math.abs(b.y-this._beginPos.y)?
this._beginPos.x=this._beginPos.y=-1:(a=this.convertTouchToNodeSpaceAR(a),cc.Log("KeyboardNotificationLayer:clickedAt("+a.x+","+a.y+")"),b=textInputGetRect(this._pTrackNode),cc.Log("KeyboardNotificationLayer:TrackNode at(origin:"+b.origin.x+","+b.origin.y+", size:"+b.size.width+","+b.size.height+")"),this.onClickTrackNode(cc.Rect.CCRectContainsPoint(b,a)),cc.Log("----------------------------------"))}}}),TextFieldTTFDefaultTest=KeyboardNotificationLayer.extend({subtitle:function(){return"TextFieldTTF with default behavior test"},
onClickTrackNode:function(a){var b=this._pTrackNode;a?(cc.Log("TextFieldTTFDefaultTest:CCTextFieldTTF attachWithIME"),b.attachWithIME()):(cc.Log("TextFieldTTFDefaultTest:CCTextFieldTTF detachWithIME"),b.detachWithIME())},onEnter:function(){this._super();var a=cc.Director.sharedDirector().getWinSize(),b=cc.TextFieldTTF.create("<click here for input>",TEXT_INPUT_FONT_NAME,TEXT_INPUT_FONT_SIZE);this.addChild(b);b.setPosition(new cc.Point(a.width/2,a.height/2));this._pTrackNode=b}}),TextFieldTTFActionTest=
KeyboardNotificationLayer.extend({_pTextField:null,_pTextFieldAction:null,_bAction:!1,_nCharLimit:0,ctor:function(){this._super()},callbackRemoveNodeWhenDidAction:function(a){this.removeChild(a,!0)},subtitle:function(){return"CCTextFieldTTF with action and char limit test"},onClickTrackNode:function(a){var b=this._pTrackNode;a?(cc.Log("TextFieldTTFActionTest:CCTextFieldTTF attachWithIME"),b.attachWithIME()):(cc.Log("TextFieldTTFActionTest:CCTextFieldTTF detachWithIME"),b.detachWithIME())},onEnter:function(){this._super();
this._nCharLimit=20;this._pTextFieldAction=cc.RepeatForever.create(cc.Sequence.create(cc.FadeOut.create(0.25),cc.FadeIn.create(0.25)));this._bAction=!1;var a=cc.Director.sharedDirector().getWinSize();this._pTextField=cc.TextFieldTTF.create("<click here for input>",TEXT_INPUT_FONT_NAME,TEXT_INPUT_FONT_SIZE);this.addChild(this._pTextField);this._pTextField.setDelegate(this);this._pTextField.setPosition(new cc.Point(a.width/2,a.height/2));this._pTrackNode=this._pTextField},onExit:function(){this._super()},
onTextFieldAttachWithIME:function(){this._bAction||(this._pTextField.runAction(this._pTextFieldAction),this._bAction=!0);return!1},onTextFieldDetachWithIME:function(){this._bAction&&(this._pTextField.stopAction(this._pTextFieldAction),this._pTextField.setOpacity(255),this._bAction=!1);return!1},onTextFieldInsertText:function(a,b){if("\n"==b)return!1;if(a.getCharCount()>=this._nCharLimit)return!0;var c=cc.LabelTTF.create(b,TEXT_INPUT_FONT_NAME,TEXT_INPUT_FONT_SIZE);this.addChild(c);var d=new cc.Color3B(226,
121,7);c.setColor(d);d=new cc.Point(a.getPositionX(),a.getPositionY());a.getCharCount()&&(d.x+=a.getContentSize().width/2);var e=c.getContentSize(),e=new cc.Point(d.x,cc.Director.sharedDirector().getWinSize().height-2*e.height);c.setPosition(e);c.setScale(8);d=cc.Sequence.create(cc.Spawn.create(cc.MoveTo.create(0.5,d),cc.ScaleTo.create(0.5,1),cc.FadeOut.create(0.5)),cc.CallFunc.create(this,this.callbackRemoveNodeWhenDidAction));c.runAction(d);return!1},onTextFieldDeleteBackward:function(a,b){var c=
cc.LabelTTF.create(b,TEXT_INPUT_FONT_NAME,TEXT_INPUT_FONT_SIZE);this.addChild(c);var d=new cc.Point(a.getPositionX(),a.getPositionY()),e=a.getContentSize(),f=c.getContentSize();d.x+=(e.width-f.width)/2;e=cc.Director.sharedDirector().getWinSize();e=new cc.Point(-e.width/4,e.height*(0.5+Math.random()/2));c.setPosition(d);d=cc.Sequence.create(cc.Spawn.create(cc.MoveTo.create(1,e),cc.Repeat.create(cc.RotateBy.create(0.2,Math.random()%2?360:-360),5),cc.FadeOut.create(1)),cc.CallFunc.create(this,this.callbackRemoveNodeWhenDidAction));
c.runAction(d);return!1},onDraw:function(){return!1}}),TextInputTestScene=TestScene.extend({runThisTest:function(){this.addChild(nextTextInputTest());cc.Director.sharedDirector().replaceScene(this)}});var TAG_SPRITE_MANAGER=1,PTM_RATIO=32;
Box2DTestLayer=cc.Layer.extend({world:null,ctor:function(){this.setIsTouchEnabled(!0);var a=Box2D.Common.Math.b2Vec2,b=Box2D.Dynamics.b2BodyDef,c=Box2D.Dynamics.b2Body,d=Box2D.Dynamics.b2FixtureDef,e=Box2D.Dynamics.b2World,f=Box2D.Collision.Shapes.b2PolygonShape,g=cc.Director.sharedDirector().getWinSize();this.world=new e(new a(0,10),!0);this.world.SetContinuousPhysics(!0);a=new d;a.density=1;a.friction=0.5;a.restitution=0.2;b=new b;b.type=c.b2_staticBody;a.shape=new f;a.shape.SetAsBox(20,2);b.position.Set(10,
g.height/PTM_RATIO+1.8);this.world.CreateBody(b).CreateFixture(a);b.position.Set(10,-1.8);this.world.CreateBody(b).CreateFixture(a);a.shape.SetAsBox(2,14);b.position.Set(-1.8,13);this.world.CreateBody(b).CreateFixture(a);b.position.Set(26.8,13);this.world.CreateBody(b).CreateFixture(a);this.addChild(cc.SpriteBatchNode.create(s_pathBlock,150),0,TAG_SPRITE_MANAGER);this.addNewSpriteWithCoords(cc.PointMake(g.width/2,g.height/2));c=cc.LabelTTF.create("Tap screen","Marker Felt",32);this.addChild(c,0);
c.setColor(cc.ccc3(0,0,255));c.setPosition(cc.PointMake(g.width/2,g.height-50));this.scheduleUpdate()},addNewSpriteWithCoords:function(a){var b=this.getChildByTag(TAG_SPRITE_MANAGER),c=0.5<cc.RANDOM_0_1()?0:1,d=0.5<cc.RANDOM_0_1()?0:1,c=cc.Sprite.createWithTexture(b.getTexture(),cc.RectMake(32*c,32*d,32,32));b.addChild(c);c.setPosition(cc.PointMake(a.x,a.y));var e=Box2D.Dynamics.b2Body,b=Box2D.Dynamics.b2FixtureDef,d=Box2D.Collision.Shapes.b2PolygonShape,f=new Box2D.Dynamics.b2BodyDef;f.type=e.b2_dynamicBody;
f.position.Set(a.x/PTM_RATIO,a.y/PTM_RATIO);f.userData=c;a=this.world.CreateBody(f);c=new d;c.SetAsBox(0.5,0.5);b=new b;b.shape=c;b.density=1;b.friction=0.3;a.CreateFixture(b)},update:function(a){this.world.Step(a,8,1);for(a=this.world.GetBodyList();a;a=a.GetNext())if(null!=a.GetUserData()){var b=a.GetUserData();b.setPosition(cc.PointMake(a.GetPosition().x*PTM_RATIO,a.GetPosition().y*PTM_RATIO));b.setRotation(-1*cc.RADIANS_TO_DEGREES(a.GetAngle()))}},ccTouchesEnded:function(a){for(var b=0;b<a.length;b++){var c=
a[b];if(!c)break;this.addNewSpriteWithCoords(c.locationInView(c.view()))}}});Box2DTestScene=TestScene.extend({runThisTest:function(){this.addChild(new Box2DTestLayer);cc.Director.sharedDirector().replaceScene(this)}});